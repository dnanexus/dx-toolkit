make -C src python
make[1]: Entering directory '/home/orodeh/dx-toolkit/src'
(if [ ! -e "/home/orodeh/dx-toolkit/src/../src/python/dxpy/toolkit_version.py" ]; then \
    echo "version = 'UNKNOWN_VERSION'" > "/home/orodeh/dx-toolkit/src/../src/python/dxpy/toolkit_version.py"; \
    echo -e "package com.dnanexus;\nclass DXToolkitVersion {\n    public static final String TOOLKIT_VERSION = \"0.0.0\";\n}" > "/home/orodeh/dx-toolkit/src/../src/java/src/main/java/com/dnanexus/DXToolkitVersion.java"; \
    echo UNKNOWN_VERSION > "/home/orodeh/dx-toolkit/src/../build/info/version"; \
fi)
(if [ -d "/home/orodeh/dx-toolkit/src/../.git" ]; then \
    export GIT_TOOLKIT_VERSION=$((git describe --match 'v*.*.*' || git rev-parse --short HEAD) | sed -e 's/-[0-9]-/+/'); \
    echo "version = '${GIT_TOOLKIT_VERSION/#v/}'" > "/home/orodeh/dx-toolkit/src/../src/python/dxpy/toolkit_version.py"; \
    echo -e "package com.dnanexus;\nclass DXToolkitVersion {\n    public static final String TOOLKIT_VERSION = \"$GIT_TOOLKIT_VERSION\";\n}" > "/home/orodeh/dx-toolkit/src/../src/java/src/main/java/com/dnanexus/DXToolkitVersion.java"; \
    echo $GIT_TOOLKIT_VERSION > "/home/orodeh/dx-toolkit/src/../build/info/version"; \
fi)
make -j -l 2.0 -C ../contrib api_wrappers
make[2]: Entering directory '/home/orodeh/dx-toolkit/contrib'
make -C ./perl lib/DNAnexus/API.pm
make[3]: Entering directory '/home/orodeh/dx-toolkit/contrib/perl'
make[3]: 'lib/DNAnexus/API.pm' is up to date.
make[3]: Leaving directory '/home/orodeh/dx-toolkit/contrib/perl'
make -C ./ruby lib/dxruby/api.rb
make[3]: Entering directory '/home/orodeh/dx-toolkit/contrib/ruby'
make[3]: 'lib/dxruby/api.rb' is up to date.
make[3]: Leaving directory '/home/orodeh/dx-toolkit/contrib/ruby'
make[2]: Leaving directory '/home/orodeh/dx-toolkit/contrib'
ln -s -f /home/orodeh/dx-toolkit/src/../bin/dxWDL-0.74.jar /home/orodeh/dx-toolkit/src/../bin/dxWDL.jar
python -c 'import sys; exit("dx-toolkit is not compatible with Python < 2.7" if sys.version_info < (2, 7) else 0)'
rm -rf "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/python3.5/site-packages" "/home/orodeh/dx-toolkit/src/../build/py_env" python/dist
mkdir -p "$(dirname '/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/python3.5/site-packages')"
python3 -m venv "/home/orodeh/dx-toolkit/src/../build/py_env"
unset PYTHONPATH; source "/home/orodeh/dx-toolkit/src/../build/py_env/bin/activate"; pip3 install --upgrade -r python/requirements_setuptools.txt
Collecting pip==9.0.1 (from -r python/requirements_setuptools.txt (line 1))
  Using cached https://files.pythonhosted.org/packages/b6/ac/7015eb97dc749283ffdec1c3a88ddb8ae03b8fad0f0e611408f196358da3/pip-9.0.1-py2.py3-none-any.whl
Collecting setuptools==19.4 (from -r python/requirements_setuptools.txt (line 2))
  Using cached https://files.pythonhosted.org/packages/cd/1f/8415bc5ec42da81d4c5da35a21eb8c36f33768de99daeee09c33aacd51eb/setuptools-19.4-py2.py3-none-any.whl
Collecting wheel==0.26.0 (from -r python/requirements_setuptools.txt (line 3))
  Using cached https://files.pythonhosted.org/packages/d9/6f/cfb45d489703e4843b30c28e01ab39c87b0648bfa11a6c4a959f426fe217/wheel-0.26.0-py2.py3-none-any.whl
Installing collected packages: pip, setuptools, wheel
  Found existing installation: pip 8.1.1
    Uninstalling pip-8.1.1:
      Successfully uninstalled pip-8.1.1
  Found existing installation: setuptools 20.7.0
    Uninstalling setuptools-20.7.0:
      Successfully uninstalled setuptools-20.7.0
Successfully installed pip-9.0.1 setuptools-19.4 wheel-0.26.0
You are using pip version 9.0.1, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
unset PYTHONPATH; source "/home/orodeh/dx-toolkit/src/../build/py_env/bin/activate"; cd python; python setup.py bdist_wheel
running bdist_wheel
running build
running build_py
copying dxpy/toolkit_version.py -> build/lib/dxpy
running build_scripts
installing to build/bdist.linux-x86_64/wheel
running install
running install_lib
creating build/bdist.linux-x86_64/wheel
creating build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/app_categories.py -> build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/api.py -> build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/executable_builder.py -> build/bdist.linux-x86_64/wheel/dxpy
creating build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxproject.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxfile_functions.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxjob.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/auth.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxfile.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxapp_container_functions.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxglobalworkflow.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxanalysis.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/download_all_inputs.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxgtable.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxrecord.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxdataobject_functions.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/search.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxgtable_functions.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxapp.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxapplet.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/dxworkflow.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/bindings/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy/bindings
copying build/lib/dxpy/app_builder.py -> build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/toolkit_version.py -> build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/compat.py -> build/bdist.linux-x86_64/wheel/dxpy
creating build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/printing.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/batch_utils.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/exec_utils.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/describe.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/file_load_utils.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/pathmatch.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/config.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/local_exec_utils.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/job_log_client.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/resolver.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/executable_unbuilder.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/completer.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/spelling_corrector.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/genomic_utils.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/utils/pretty_print.py -> build/bdist.linux-x86_64/wheel/dxpy/utils
copying build/lib/dxpy/dxlog.py -> build/bdist.linux-x86_64/wheel/dxpy
creating build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_reads_to_fastq.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_build_asset.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_build_app.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_app_wizard.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_genes_to_gff.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_mappings_to_fastq.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_build_report_html.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_genes_to_gtf.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_build_applet.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_mappings_to_sam.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_spans_to_bed.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/dx_variants_to_vcf.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/scripts/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy/scripts
copying build/lib/dxpy/asset_builder.py -> build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/ssh_tunnel_app_support.py -> build/bdist.linux-x86_64/wheel/dxpy
creating build/bdist.linux-x86_64/wheel/dxpy/packages
copying build/lib/dxpy/packages/shlex.py -> build/bdist.linux-x86_64/wheel/dxpy/packages
creating build/bdist.linux-x86_64/wheel/dxpy/packages/argcomplete
copying build/lib/dxpy/packages/argcomplete/completers.py -> build/bdist.linux-x86_64/wheel/dxpy/packages/argcomplete
copying build/lib/dxpy/packages/argcomplete/my_shlex.py -> build/bdist.linux-x86_64/wheel/dxpy/packages/argcomplete
copying build/lib/dxpy/packages/argcomplete/my_argparse.py -> build/bdist.linux-x86_64/wheel/dxpy/packages/argcomplete
copying build/lib/dxpy/packages/argcomplete/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy/packages/argcomplete
copying build/lib/dxpy/packages/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy/packages
creating build/bdist.linux-x86_64/wheel/dxpy/cli
copying build/lib/dxpy/cli/workflow.py -> build/bdist.linux-x86_64/wheel/dxpy/cli
copying build/lib/dxpy/cli/exec_io.py -> build/bdist.linux-x86_64/wheel/dxpy/cli
copying build/lib/dxpy/cli/org.py -> build/bdist.linux-x86_64/wheel/dxpy/cli
copying build/lib/dxpy/cli/cp.py -> build/bdist.linux-x86_64/wheel/dxpy/cli
copying build/lib/dxpy/cli/download.py -> build/bdist.linux-x86_64/wheel/dxpy/cli
copying build/lib/dxpy/cli/parsers.py -> build/bdist.linux-x86_64/wheel/dxpy/cli
copying build/lib/dxpy/cli/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy/cli
creating build/bdist.linux-x86_64/wheel/dxpy/templating
copying build/lib/dxpy/templating/python.py -> build/bdist.linux-x86_64/wheel/dxpy/templating
copying build/lib/dxpy/templating/utils.py -> build/bdist.linux-x86_64/wheel/dxpy/templating
copying build/lib/dxpy/templating/bash.py -> build/bdist.linux-x86_64/wheel/dxpy/templating
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/basic
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/basic/test
copying build/lib/dxpy/templating/templates/python/basic/test/test.py -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/basic/test
copying build/lib/dxpy/templating/templates/python/basic/dxapp.json -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/basic
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/basic/src
copying build/lib/dxpy/templating/templates/python/basic/src/code.py -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/basic/src
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/parallelized
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/parallelized/test
copying build/lib/dxpy/templating/templates/python/parallelized/test/test.py -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/parallelized/test
copying build/lib/dxpy/templating/templates/python/parallelized/dxapp.json -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/parallelized
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/parallelized/src
copying build/lib/dxpy/templating/templates/python/parallelized/src/code.py -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/parallelized/src
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/scatter-process-gather
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/scatter-process-gather/test
copying build/lib/dxpy/templating/templates/python/scatter-process-gather/test/test.py -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/scatter-process-gather/test
copying build/lib/dxpy/templating/templates/python/scatter-process-gather/dxapp.json -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/scatter-process-gather
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/scatter-process-gather/src
copying build/lib/dxpy/templating/templates/python/scatter-process-gather/src/code.py -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/python/scatter-process-gather/src
copying build/lib/dxpy/templating/templates/Readme.md -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/basic
copying build/lib/dxpy/templating/templates/bash/basic/dxapp.json -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/basic
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/basic/src
copying build/lib/dxpy/templating/templates/bash/basic/src/code.sh -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/basic/src
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/parallelized
copying build/lib/dxpy/templating/templates/bash/parallelized/dxapp.json -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/parallelized
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/parallelized/src
copying build/lib/dxpy/templating/templates/bash/parallelized/src/code.sh -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/parallelized/src
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/scatter-process-gather
copying build/lib/dxpy/templating/templates/bash/scatter-process-gather/dxapp.json -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/scatter-process-gather
creating build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/scatter-process-gather/src
copying build/lib/dxpy/templating/templates/bash/scatter-process-gather/src/code.sh -> build/bdist.linux-x86_64/wheel/dxpy/templating/templates/bash/scatter-process-gather/src
copying build/lib/dxpy/templating/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy/templating
copying build/lib/dxpy/workflow_builder.py -> build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/__init__.py -> build/bdist.linux-x86_64/wheel/dxpy
copying build/lib/dxpy/exceptions.py -> build/bdist.linux-x86_64/wheel/dxpy
running install_egg_info
running egg_info
writing entry points to dxpy.egg-info/entry_points.txt
writing dependency_links to dxpy.egg-info/dependency_links.txt
writing requirements to dxpy.egg-info/requires.txt
writing dxpy.egg-info/PKG-INFO
writing top-level names to dxpy.egg-info/top_level.txt
reading manifest file 'dxpy.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'dxpy.egg-info/SOURCES.txt'
Copying dxpy.egg-info to build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5-py3.5.egg-info
running install_scripts
creating build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data
creating build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-run-app-locally -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-jobutil-add-output -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-fetch-bundled-depends -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-jobutil-new-job -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-download-all-inputs -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-docker -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-print-bash-vars -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-upload-all-outputs -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-log-stream -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-jobutil-dxlink -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-clone-asset -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-generate-dxapp -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-jobutil-report-error -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
copying build/scripts-3.5/dx-jobutil-parse-link -> build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-run-app-locally to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-jobutil-add-output to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-fetch-bundled-depends to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-jobutil-new-job to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-download-all-inputs to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-docker to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-print-bash-vars to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-upload-all-outputs to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-log-stream to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-jobutil-dxlink to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-clone-asset to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-generate-dxapp to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-jobutil-report-error to 755
changing mode of build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.data/scripts/dx-jobutil-parse-link to 755
creating build/bdist.linux-x86_64/wheel/dxpy-0.265.0_35_ga1d50f5.dist-info/WHEEL
/home/orodeh/dx-toolkit/build/py_env/lib/python3.5/site-packages/setuptools/dist.py:294: UserWarning: The version specified ('0.265.0-35-ga1d50f5') is an invalid version, this may not work as expected with newer versions of setuptools, pip, and PyPI. Please see PEP 440 for more details.
  "details." % self.metadata.version
unset PYTHONPATH; source "/home/orodeh/dx-toolkit/src/../build/py_env/bin/activate"; pip3 install --ignore-installed --prefix="/home/orodeh/dx-toolkit/src/.." python/dist/*.whl
Processing ./python/dist/dxpy-0.265.0_35_ga1d50f5-py2.py3-none-any.whl
Collecting mock==2.0.0 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/e6/35/f187bdf23be87092bd0f1200d43d23076cee4d0dec109f195173fd3ebc79/mock-2.0.0-py2.py3-none-any.whl
Collecting python-magic==0.4.6 (from dxpy==0.265.0-35-ga1d50f5)
Collecting coverage==3.7.1 (from dxpy==0.265.0-35-ga1d50f5)
Collecting beautifulsoup4==4.4.1 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/cf/69/9abfdab06490af5e0233bcebe3f617ec128486d94ea987ad4f77b9332eef/beautifulsoup4-4.4.1-py3-none-any.whl
Collecting psutil>=3.3.0 (from dxpy==0.265.0-35-ga1d50f5)
Collecting pytest==3.5.1 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/76/52/fc48d02492d9e6070cb672d9133382e83084f567f88eff1c27bd2c6c27a8/pytest-3.5.1-py2.py3-none-any.whl
Collecting pexpect==4.6 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/89/e6/b5a1de8b0cc4e07ca1b305a4fcc3f9806025c1b651ea302646341222f88b/pexpect-4.6.0-py2.py3-none-any.whl
Collecting cryptography<=2.2.2 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/fa/f4/3cde3604972dfa2b0fea85b9711948bb4fb70ab64095322aef35071bd254/cryptography-2.2.2-cp34-abi3-manylinux1_x86_64.whl
Collecting ws4py==0.3.2 (from dxpy==0.265.0-35-ga1d50f5)
Collecting requests>=2.8.0 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/65/47/7e02164a2a3db50ed6d8a6ab1d6d60b69c4c3fdf57a284257925dfc12bda/requests-2.19.1-py2.py3-none-any.whl
Collecting pyopenssl==16.2.0 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/ac/93/b4cd538d31adacd07f83013860db6b88d78755af1f3fefe68ec22d397e7b/pyOpenSSL-16.2.0-py2.py3-none-any.whl
Collecting python-dateutil>=2.5 (from dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/cf/f5/af2b09c957ace60dcfac112b669c45c8c97e32f94aa8b56da4c6d1682825/python_dateutil-2.7.3-py2.py3-none-any.whl
Collecting pbr>=0.11 (from mock==2.0.0->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/01/0a/1e81639e7ed6aa51554ab05827984d07885d6873e612a97268ab3d80c73f/pbr-4.3.0-py2.py3-none-any.whl
Collecting six>=1.9 (from mock==2.0.0->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/67/4b/141a581104b1f6397bfa78ac9d43d8ad29a7ca43ea90a2d863fe3056e86a/six-1.11.0-py2.py3-none-any.whl
Collecting pluggy<0.7,>=0.5 (from pytest==3.5.1->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/ba/65/ded3bc40bbf8d887f262f150fbe1ae6637765b5c9534bd55690ed2c0b0f7/pluggy-0.6.0-py3-none-any.whl
Collecting setuptools (from pytest==3.5.1->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/96/06/c8ee69628191285ddddffb277bd5abdf769166e7a14b867c2a172f0175b1/setuptools-40.4.3-py2.py3-none-any.whl
Collecting py>=1.5.0 (from pytest==3.5.1->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/c8/47/d179b80ab1dc1bfd46a0c87e391be47e6c7ef5831a9c138c5c49d1756288/py-1.6.0-py2.py3-none-any.whl
Collecting more-itertools>=4.0.0 (from pytest==3.5.1->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/79/b1/eace304ef66bd7d3d8b2f78cc374b73ca03bc53664d78151e9df3b3996cc/more_itertools-4.3.0-py3-none-any.whl
Collecting attrs>=17.4.0 (from pytest==3.5.1->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/3a/e1/5f9023cc983f1a628a8c2fd051ad19e76ff7b142a0faf329336f9a62a514/attrs-18.2.0-py2.py3-none-any.whl
Collecting ptyprocess>=0.5 (from pexpect==4.6->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/d1/29/605c2cc68a9992d18dada28206eeada56ea4bd07a239669da41674648b6f/ptyprocess-0.6.0-py2.py3-none-any.whl
Collecting cffi>=1.7; platform_python_implementation != "PyPy" (from cryptography<=2.2.2->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/59/cc/0e1635b4951021ef35f5c92b32c865ae605fac2a19d724fb6ff99d745c81/cffi-1.11.5-cp35-cp35m-manylinux1_x86_64.whl
Collecting asn1crypto>=0.21.0 (from cryptography<=2.2.2->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/ea/cd/35485615f45f30a510576f1a56d1e0a7ad7bd8ab5ed7cdc600ef7cd06222/asn1crypto-0.24.0-py2.py3-none-any.whl
Collecting idna>=2.1 (from cryptography<=2.2.2->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/4b/2a/0276479a4b3caeb8a8c1af2f8e4355746a97fab05a372e4a2c6a6b876165/idna-2.7-py2.py3-none-any.whl
Collecting chardet<3.1.0,>=3.0.2 (from requests>=2.8.0->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl
Collecting urllib3<1.24,>=1.21.1 (from requests>=2.8.0->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/bd/c9/6fdd990019071a4a32a5e7cb78a1d92c53851ef4f56f62a3486e6a7d8ffb/urllib3-1.23-py2.py3-none-any.whl
Collecting certifi>=2017.4.17 (from requests>=2.8.0->dxpy==0.265.0-35-ga1d50f5)
  Using cached https://files.pythonhosted.org/packages/df/f7/04fee6ac349e915b82171f8e23cee63644d83663b34c539f7a09aed18f9e/certifi-2018.8.24-py2.py3-none-any.whl
Collecting pycparser (from cffi>=1.7; platform_python_implementation != "PyPy"->cryptography<=2.2.2->dxpy==0.265.0-35-ga1d50f5)
Installing collected packages: pbr, six, mock, python-magic, coverage, beautifulsoup4, psutil, pluggy, setuptools, py, more-itertools, attrs, pytest, ptyprocess, pexpect, pycparser, cffi, asn1crypto, idna, cryptography, ws4py, chardet, urllib3, certifi, requests, pyopenssl, python-dateutil, dxpy
Successfully installed asn1crypto-0.24.0 attrs-18.2.0 beautifulsoup4-4.4.1 certifi-2018.8.24 cffi-1.11.5 chardet-3.0.4 coverage-3.7.1 cryptography-2.2.2 dxpy-0.265.0-35-ga1d50f5 idna-2.7 mock-2.0.0 more-itertools-4.3.0 pbr-4.3.0 pexpect-4.6.0 pluggy-0.6.0 psutil-5.4.7 ptyprocess-0.6.0 py-1.6.0 pycparser-2.19 pyopenssl-16.2.0 pytest-3.5.1 python-dateutil-2.7.3 python-magic-0.4.6 requests-2.19.1 setuptools-40.4.3 six-1.11.0 urllib3-1.23 ws4py-0.3.2
You are using pip version 9.0.1, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
mv "/home/orodeh/dx-toolkit/src/.."/lib/python?.?/site-packages "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/python3.5/site-packages" || mv "/home/orodeh/dx-toolkit/src/.."/site-packages "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/python3.5/site-packages"
rm -f "/home/orodeh/dx-toolkit/src/../bin/xattr"
mkdir -p "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/java"
cp -f "/home/orodeh/dx-toolkit/src/.."/bin/dxWDL.jar "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/java"/dxWDL.jar
ln -s ../../../../java/dxWDL.jar "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/python3.5/site-packages"/dxpy/scripts/dxWDL.jar
make[1]: Leaving directory '/home/orodeh/dx-toolkit/src'
make -C src src_libs
make[1]: Entering directory '/home/orodeh/dx-toolkit/src'
(if [ ! -e "/home/orodeh/dx-toolkit/src/../src/python/dxpy/toolkit_version.py" ]; then \
    echo "version = 'UNKNOWN_VERSION'" > "/home/orodeh/dx-toolkit/src/../src/python/dxpy/toolkit_version.py"; \
    echo -e "package com.dnanexus;\nclass DXToolkitVersion {\n    public static final String TOOLKIT_VERSION = \"0.0.0\";\n}" > "/home/orodeh/dx-toolkit/src/../src/java/src/main/java/com/dnanexus/DXToolkitVersion.java"; \
    echo UNKNOWN_VERSION > "/home/orodeh/dx-toolkit/src/../build/info/version"; \
fi)
(if [ -d "/home/orodeh/dx-toolkit/src/../.git" ]; then \
    export GIT_TOOLKIT_VERSION=$((git describe --match 'v*.*.*' || git rev-parse --short HEAD) | sed -e 's/-[0-9]-/+/'); \
    echo "version = '${GIT_TOOLKIT_VERSION/#v/}'" > "/home/orodeh/dx-toolkit/src/../src/python/dxpy/toolkit_version.py"; \
    echo -e "package com.dnanexus;\nclass DXToolkitVersion {\n    public static final String TOOLKIT_VERSION = \"$GIT_TOOLKIT_VERSION\";\n}" > "/home/orodeh/dx-toolkit/src/../src/java/src/main/java/com/dnanexus/DXToolkitVersion.java"; \
    echo $GIT_TOOLKIT_VERSION > "/home/orodeh/dx-toolkit/src/../build/info/version"; \
fi)
make -j -l 2.0 -C ../contrib api_wrappers
make[2]: Entering directory '/home/orodeh/dx-toolkit/contrib'
make -C ./perl lib/DNAnexus/API.pm
make[3]: Entering directory '/home/orodeh/dx-toolkit/contrib/perl'
make[3]: 'lib/DNAnexus/API.pm' is up to date.
make[3]: Leaving directory '/home/orodeh/dx-toolkit/contrib/perl'
make -C ./ruby lib/dxruby/api.rb
make[3]: Entering directory '/home/orodeh/dx-toolkit/contrib/ruby'
make[3]: 'lib/dxruby/api.rb' is up to date.
make[3]: Leaving directory '/home/orodeh/dx-toolkit/contrib/ruby'
make[2]: Leaving directory '/home/orodeh/dx-toolkit/contrib'
mkdir -p "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib"
cp -R -v bash "/home/orodeh/dx-toolkit/src/../share/dnanexus/lib"
'bash/dx_helpers.sh' -> '/home/orodeh/dx-toolkit/src/../share/dnanexus/lib/bash/dx_helpers.sh'
make[1]: Leaving directory '/home/orodeh/dx-toolkit/src'
removed '.coverage.ee2de3afb7c4.2479.168604'
removed '.coverage.ee2de3afb7c4.2485.134544'
test_dx_debug_shows_request_id (test_dxclient.TestApiDebugOutput) ... ok
test_dx_debug_shows_request_response (test_dxclient.TestApiDebugOutput) ... FAIL
test_dx_debug_shows_timestamp (test_dxclient.TestApiDebugOutput) ... ok
test_upload_binary_data (test_dxclient.TestApiDebugOutput) ... $ dx cd project-FKqvfv0069b8v4f81Y9jpZff:/

$ _DX_DEBUG=1 dx ls
('', ">0 [1538771825.339478] POST https://stagingapi.dnanexus.com:443/project-FKqvfv0069b8v4f81Y9jpZff/listFolder => {'describe': {'fields': {'class': True, 'id': True, 'name': True}}, 'folder': '/', 'includeHidden': False, 'only': 'all'}\n  <0 [1538771825.339478] POST 1538771825618-641320 https://stagingapi.dnanexus.com:443/project-FKqvfv0069b8v4f81Y9jpZff/listFolder <= 200 (349ms) {'folders': [], 'objects': []}\n")
$ dx cd project-FKqvfxQ0fbbqF33K1Y3xP37f:/

$ _DX_DEBUG=1 dx new project --brief dx_debug_test
('project-FKqvfy00QFzjq92B1XYG3f23\n', ">0 [1538771831.930631] POST https://stagingapi.dnanexus.com:443/project/new => {'name': 'dx_debug_test'}\n  <0 [1538771831.930631] POST 1538771832204-868829 https://stagingapi.dnanexus.com:443/project/new <= 200 (354ms) {'id': 'project-FKqv...jq92B1XYG3f23'}\n")
$ dx cd project-FKqvfyj0jxy11fbZ1X5xp1FF:/

$ _DX_DEBUG=1 dx ls
('', ">0 [1538771836.873769] POST https://stagingapi.dnanexus.com:443/project-FKqvfyj0jxy11fbZ1X5xp1FF/listFolder => {'describe': {'fields': {'class': True, 'id': True, 'name': True}}, 'folder': '/', 'includeHidden': False, 'only': 'all'}\n  <0 [1538771836.873769] POST 1538771837152-53469 https://stagingapi.dnanexus.com:443/project-FKqvfyj0jxy11fbZ1X5xp1FF/listFolder <= 200 (355ms) {'folders': [], 'objects': []}\n")
$ _DX_DEBUG=2 dx ls
('', '>0 [1538771837.632627] POST https://stagingapi.dnanexus.com:443/project-FKqvfyj0jxy11fbZ1X5xp1FF/listFolder => {"describe": {"fields": {"class": true, "name": true, "id": true}}, "folder": "/", "includeHidden": false, "only": "all"}\n  <0 [1538771837.632627] POST 1538771837897-303103 https://stagingapi.dnanexus.com:443/project-FKqvfyj0jxy11fbZ1X5xp1FF/listFolder <= 200 (343ms) {"objects": [], "folders": []}\n')
$ dx cd project-FKqvg080B1XJ3k5Y1VygK9jg:/

$ _DX_DEBUG=1 dx upload binary
('ID                  file-FKqvg0Q0B1X76bQj4GxFByZ7\nClass               file\nProject             project-FKqvg080B1XJ3k5Y1VygK9jg\nFolder              /\nName                binary\nState               closing\nVisibility          visible\nTypes               -\nProperties          -\nTags                -\nOutgoing links      -\nCreated             Fri Oct  5 13:37:22 2018\nCreated by          orodeh\nLast modified       Fri Oct  5 13:37:23 2018\nMedia type          \narchivalState       "live"\n', '>0 [1538771842.671273] POST https://stagingapi.dnanexus.com:443/file/new => {\'folder\': \'/\', \'hidden\': False, \'name\': \'binary\', \'nonce\': "b\'33ab107399...771842.671186", ...}\n  <0 [1538771842.671273] POST 1538771842927-992878 https://stagingapi.dnanexus.com:443/file/new <= 200 (398ms) {\'id\': \'file-FKqvg0Q...76bQj4GxFByZ7\'}\n>1 [1538771843.071071] POST https://stagingapi.dnanexus.com:443/project-FKqvg080B1XJ3k5Y1VygK9jg/describe => {\'fields\': {\'fileUploadParameters\': True}}\n  <1 [1538771843.071071] POST 1538771843086-263805 https://stagingapi.dnanexus.com:443/project-FKqvg080B1XJ3k5Y1VygK9jg/describe <= 200 (94ms) {\'fileUploadParameters\': {\'emptyLastPartAllowed\': True, \'maximumFileSize\': 5497558138880, \'maximumNumParts\': 10000, \'maximumPartSize\': 5368709120, ...}, \'id\': \'project-FKqv...J3k5Y1VygK9jg\'}\n>3 [1538771843.170386] POST https://stagingapi.dnanexus.com:443/file-FKqvg0Q0B1X76bQj4GxFByZ7/upload => {\'index\': 1, \'md5\': \'f580bc3357ef...df4de1fe1c23f\', \'size\': 4}\n  <3 [1538771843.170386] POST 1538771843185-73626 https://stagingapi.dnanexus.com:443/file-FKqvg0Q0B1X76bQj4GxFByZ7/upload <= 200 (112ms) {\'expires\': 1538771963204, \'headers\': {\'content-length\': \'4\', \'content-md5\': \'9YC8M1fvQ6CQvfTeH+HCPw==\', \'content-type\': \'binary/octet-stream\', \'host\': \'dnanexus-pla...amazonaws.com\', ...}, \'url\': \'https://dnan...30347a54862bd\'}\n>2 [1538771843.170292] PUT https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/5a1c/file/open/file-FKqvg0Q0B1X76bQj4GxFByZ7/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203723Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=bb92f59c578455a167f7222ef7666e43fcfb77451b24b77b09630347a54862bd => b\'\\xee\\xee\\xee\\xef\'\n  <2 [1538771843.170292] PUT -- https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/5a1c/file/open/file-FKqvg0Q0B1X76bQj4GxFByZ7/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203723Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=bb92f59c578455a167f7222ef7666e43fcfb77451b24b77b09630347a54862bd <= 200 (496ms) \n>4 [1538771843.667701] POST https://stagingapi.dnanexus.com:443/file-FKqvg0Q0B1X76bQj4GxFByZ7/close => {}\n  <4 [1538771843.667701] POST 1538771843682-393735 https://stagingapi.dnanexus.com:443/file-FKqvg0Q0B1X76bQj4GxFByZ7/close <= 200 (126ms) {\'id\': \'file-FKqvg0Q...76bQj4GxFByZ7\'}\n>5 [1538771843.794711] POST https://stagingapi.dnanexus.com:443/file-FKqvg0Q0B1X76bQj4GxFByZ7/describe => {\'details\': True, \'project\': \'project-FKqv...J3k5Y1VygK9jg\', \'properties\': True}\n  <5 [1538771843.794711] POST 1538771843809-185937 https://stagingapi.dnanexus.com:443/file-FKqvg0Q0B1X76bQj4GxFByZ7/describe <= 200 (110ms) {\'archivalState\': \'live\', \'class\': \'file\', \'created\': 1538771842000, \'createdBy\': {\'user\': \'user-orodeh\'}, ...}\n')
$ _DX_DEBUG=2 dx upload binary
('ID                  file-FKqvg100B1X0J4q44Gp7FVPP\nClass               file\nProject             project-FKqvg080B1XJ3k5Y1VygK9jg\nFolder              /\nName                binary\nState               closing\nVisibility          visible\nTypes               -\nProperties          -\nTags                -\nOutgoing links      -\nCreated             Fri Oct  5 13:37:24 2018\nCreated by          orodeh\nLast modified       Fri Oct  5 13:37:25 2018\narchivalState       "live"\nMedia type          \n', '>0 [1538771844.376190] POST https://stagingapi.dnanexus.com:443/file/new => {"folder": "/", "parents": false, "nonce": "b\'14dbe822133af1dd0cb00393ff2481d722a3c49ff7dc563187cd670977956fa8\'1538771844.376109", "project": "project-FKqvg080B1XJ3k5Y1VygK9jg", "name": "binary", "hidden": false}\n  <0 [1538771844.376190] POST 1538771844628-920879 https://stagingapi.dnanexus.com:443/file/new <= 200 (381ms) {"id": "file-FKqvg100B1X0J4q44Gp7FVPP"}\n>1 [1538771844.758761] POST https://stagingapi.dnanexus.com:443/project-FKqvg080B1XJ3k5Y1VygK9jg/describe => {"fields": {"fileUploadParameters": true}}\n  <1 [1538771844.758761] POST 1538771844772-164305 https://stagingapi.dnanexus.com:443/project-FKqvg080B1XJ3k5Y1VygK9jg/describe <= 200 (95ms) {"id": "project-FKqvg080B1XJ3k5Y1VygK9jg", "fileUploadParameters": {"minimumPartSize": 5242880, "maximumPartSize": 5368709120, "emptyLastPartAllowed": true, "maximumFileSize": 5497558138880, "maximumNumParts": 10000}}\n>3 [1538771844.858645] POST https://stagingapi.dnanexus.com:443/file-FKqvg100B1X0J4q44Gp7FVPP/upload => {"index": 1, "size": 4, "md5": "f580bc3357ef43a090bdf4de1fe1c23f"}\n  <3 [1538771844.858645] POST 1538771844871-733582 https://stagingapi.dnanexus.com:443/file-FKqvg100B1X0J4q44Gp7FVPP/upload <= 200 (108ms) {"url": "https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/946f/file/open/file-FKqvg100B1X0J4q44Gp7FVPP/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203724Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=322a05df534e36d5db3f3663ceca79abab1d2a0f403b26035f499745822b670a", "headers": {"content-type": "binary/octet-stream", "content-length": "4", "host": "dnanexus-platform-upload-stg.s3.amazonaws.com", "x-amz-server-side-encryption": "AES256", "content-md5": "9YC8M1fvQ6CQvfTeH+HCPw=="}, "expires": 1538771964891}\n>2 [1538771844.858564] PUT https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/946f/file/open/file-FKqvg100B1X0J4q44Gp7FVPP/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203724Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=322a05df534e36d5db3f3663ceca79abab1d2a0f403b26035f499745822b670a => <file data of length 4>\n  <2 [1538771844.858564] PUT -- https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/946f/file/open/file-FKqvg100B1X0J4q44Gp7FVPP/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203724Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=322a05df534e36d5db3f3663ceca79abab1d2a0f403b26035f499745822b670a <= 200 (540ms) \n>4 [1538771845.399864] POST https://stagingapi.dnanexus.com:443/file-FKqvg100B1X0J4q44Gp7FVPP/close => {}\n  <4 [1538771845.399864] POST 1538771845412-199683 https://stagingapi.dnanexus.com:443/file-FKqvg100B1X0J4q44Gp7FVPP/close <= 200 (118ms) {"id": "file-FKqvg100B1X0J4q44Gp7FVPP"}\n>5 [1538771845.518617] POST https://stagingapi.dnanexus.com:443/file-FKqvg100B1X0J4q44Gp7FVPP/describe => {"project": "project-FKqvg080B1XJ3k5Y1VygK9jg", "properties": true, "details": true}\n  <5 [1538771845.518617] POST 1538771845530-893693 https://stagingapi.dnanexus.com:443/file-FKqvg100B1X0J4q44Gp7FVPP/describe <= 200 (100ms) {"links": [], "archivalState": "live", "media": "", "createdBy": {"user": "user-orodeh"}, "id": "file-FKqvg100B1X0J4q44Gp7FVPP", "name": "binary", "sponsored": false, "properties": {}, "folder": "/", "state": "closing", "created": 1538771844000, "details": {}, "modified": 1538771845431, "class": "file", "project": "project-FKqvg080B1XJ3k5Y1VygK9jg", "tags": [], "types": [], "hidden": false}\n')ok
test_accepts_semver (test_dxclient.TestDXBuildApp) ... ok
test_applet_help (test_dxclient.TestDXBuildApp) ... ok
test_archive_in_another_project (test_dxclient.TestDXBuildApp) ...
$ _DX_DEBUG=3 dx upload binary
('ID                  file-FKqvg1Q0B1X7fzxb4JGxGx1x\nClass               file\nProject             project-FKqvg080B1XJ3k5Y1VygK9jg\nFolder              /\nName                binary\nState               closing\nVisibility          visible\nTypes               -\nProperties          -\nTags                -\nOutgoing links      -\nCreated             Fri Oct  5 13:37:26 2018\nCreated by          orodeh\nLast modified       Fri Oct  5 13:37:27 2018\nMedia type          \narchivalState       "live"\n', '>0 [1538771846.091384] POST https://stagingapi.dnanexus.com:443/file/new => {\n  "project": "project-FKqvg080B1XJ3k5Y1VygK9jg",\n  "parents": false,\n  "hidden": false,\n  "nonce": "b\'b3e3cac76ef5de2d0b584802f9a14ae4081582a28831a3ce1f5f31b624d7025c\'1538771846.091302",\n  "folder": "/",\n  "name": "binary"\n}\n  <0 [1538771846.091384] POST 1538771846347-811028 https://stagingapi.dnanexus.com:443/file/new <= 200 (370ms) \n  {\n    "id": "file-FKqvg1Q0B1X7fzxb4JGxGx1x"\n  }\n>1 [1538771846.462255] POST https://stagingapi.dnanexus.com:443/project-FKqvg080B1XJ3k5Y1VygK9jg/describe => {\n  "fields": {\n    "fileUploadParameters": true\n  }\n}\n  <1 [1538771846.462255] POST 1538771846474-940889 https://stagingapi.dnanexus.com:443/project-FKqvg080B1XJ3k5Y1VygK9jg/describe <= 200 (98ms) \n  {\n    "fileUploadParameters": {\n      "maximumFileSize": 5497558138880,\n      "minimumPartSize": 5242880,\n      "emptyLastPartAllowed": true,\n      "maximumPartSize": 5368709120,\n      "maximumNumParts": 10000\n    },\n    "id": "project-FKqvg080B1XJ3k5Y1VygK9jg"\n  }\n>3 [1538771846.563639] POST https://stagingapi.dnanexus.com:443/file-FKqvg1Q0B1X7fzxb4JGxGx1x/upload => {\n  "size": 4,\n  "md5": "f580bc3357ef43a090bdf4de1fe1c23f",\n  "index": 1\n}\n  <3 [1538771846.563639] POST 1538771846576-226597 https://stagingapi.dnanexus.com:443/file-FKqvg1Q0B1X7fzxb4JGxGx1x/upload <= 200 (111ms) \n  {\n    "headers": {\n      "host": "dnanexus-platform-upload-stg.s3.amazonaws.com",\n      "content-length": "4",\n      "content-md5": "9YC8M1fvQ6CQvfTeH+HCPw==",\n      "x-amz-server-side-encryption": "AES256",\n      "content-type": "binary/octet-stream"\n    },\n    "url": "https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/eb45/file/open/file-FKqvg1Q0B1X7fzxb4JGxGx1x/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203726Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=4a920d0f97d8403620eb6d4e5bc4a30e95d713fa624e7dd5439c5d7b2bfc180c",\n    "expires": 1538771966595\n  }\n>2 [1538771846.563560] PUT https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/eb45/file/open/file-FKqvg1Q0B1X7fzxb4JGxGx1x/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203726Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=4a920d0f97d8403620eb6d4e5bc4a30e95d713fa624e7dd5439c5d7b2bfc180c => <file data of length 4>\n  <2 [1538771846.563560] PUT -- https://dnanexus-platform-upload-stg.s3.amazonaws.com/filev2/eb45/file/open/file-FKqvg1Q0B1X7fzxb4JGxGx1x/1?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIS6O7WVJLMXWNL7A%2F20181005%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20181005T203726Z&X-Amz-Expires=120&X-Amz-SignedHeaders=content-length%3Bcontent-md5%3Bcontent-type%3Bhost%3Bx-amz-server-side-encryption&X-Amz-Signature=4a920d0f97d8403620eb6d4e5bc4a30e95d713fa624e7dd5439c5d7b2bfc180c <= 200 (546ms) \n>4 [1538771847.110200] POST https://stagingapi.dnanexus.com:443/file-FKqvg1Q0B1X7fzxb4JGxGx1x/close => {}\n  <4 [1538771847.110200] POST 1538771847121-168992 https://stagingapi.dnanexus.com:443/file-FKqvg1Q0B1X7fzxb4JGxGx1x/close <= 200 (118ms) \n  {\n    "id": "file-FKqvg1Q0B1X7fzxb4JGxGx1x"\n  }\n>5 [1538771847.228664] POST https://stagingapi.dnanexus.com:443/file-FKqvg1Q0B1X7fzxb4JGxGx1x/describe => {\n  "details": true,\n  "properties": true,\n  "project": "project-FKqvg080B1XJ3k5Y1VygK9jg"\n}\n  <5 [1538771847.228664] POST 1538771847239-428754 https://stagingapi.dnanexus.com:443/file-FKqvg1Q0B1X7fzxb4JGxGx1x/describe <= 200 (104ms) \n  {\n    "name": "binary",\n    "project": "project-FKqvg080B1XJ3k5Y1VygK9jg",\n    "media": "",\n    "createdBy": {\n      "user": "user-orodeh"\n    },\n    "state": "closing",\n    "modified": 1538771847142,\n    "class": "file",\n    "types": [],\n    "id": "file-FKqvg1Q0B1X7fzxb4JGxGx1x",\n    "properties": {},\n    "links": [],\n    "archivalState": "live",\n    "sponsored": false,\n    "hidden": false,\n    "details": {},\n    "created": 1538771846000,\n    "folder": "/",\n    "tags": []\n  }\n')
$ dx cd project-FKqvg2j0j5xV1fbZ1X5xp1FG:/

$ dx cd project-FKqvg3j0pJyFF33K1Y3xP37g:/

$ dx build --json /tmp/tmpjim3vq_9/Ã¥pplet_help
{"state": "closed", "sponsored": false, "outputSpec": [{"label": "Mappings", "help": "The mapped reads.", "class": "gtable", "name": "mappings", "type": "LetterMappings"}], "dxapi": "1.0.0", "name": "applet_help", "project": "project-FKqvg3j0pJyFF33K1Y3xP37g", "types": [], "created": 1538771857000, "class": "applet", "ignoreReuse": false, "links": [], "runSpec": {"bundledDepends": [], "executionPolicy": {}, "release": "14.04", "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": []}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "distribution": "Ubuntu", "systemRequirements": {}}, "developerNotes": "", "access": {"network": []}, "modified": 1538771857928, "folder": "/", "createdBy": {"user": "user-orodeh"}, "title": "", "tags": [], "id": "applet-FKqvg480pJy5V1604K0F4fg2", "hidden": false, "inputSpec": [{"label": "Reads", "help": "One or more Reads table objects.", "class": "array:gtable", "name": "reads", "type": "LetterReads"}, {"label": "Required", "help": "Another parameter", "class": "file", "name": "required"}, {"label": "Optional", "help": "Optional parameter", "class": "file", "name": "optional", "optional": true}], "description": "", "summary": ""}

$ dx run applet-FKqvg480pJy5V1604K0F4fg2 -h
usage: dx run applet-FKqvg480pJy5V1604K0F4fg2 [-iINPUT_NAME=VALUE ...]

Applet:

Inputs:
  Reads: -ireads=(gtable, type LetterReads) [-ireads=... [...]]
        One or more Reads table objects.

  Required: -irequired=(file)
        Another parameter

  Optional: [-ioptional=(file)]
        Optional parameter

Outputs:
  Mappings: mappings (gtable, type LetterMappings)
        The mapped reads.

$ dx cd project-FKqvg5j0jGQJ3k5Y1VygK9jj:/

$ dx build --json -d project-FKqvg5j0jGQJ3k5Y1VygK9jj: /tmp/tmpnl9fsqp2/archive_in_another_project
{"hidden": false, "inputSpec": [], "summary": "", "project": "project-FKqvg5j0jGQJ3k5Y1VygK9jj", "tags": [], "id": "applet-FKqvg680jGQ3YZ6g4J2qQpz8", "ignoreReuse": false, "modified": 1538771865653, "createdBy": {"user": "user-orodeh"}, "description": "", "types": [], "class": "applet", "folder": "/", "dxapi": "1.0.0", "state": "closed", "outputSpec": [], "created": 1538771865000, "title": "", "name": "archive_in_another_project", "runSpec": {"release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDependsByRegion": {"aws:us-east-1": []}, "executionPolicy": {}, "systemRequirements": {}, "interpreter": "python2.7", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "distribution": "Ubuntu", "bundledDepends": []}, "links": [], "sponsored": false, "access": {"network": []}, "developerNotes": ""}

$ dx build --json --archive -d project-FKqvg5j0jGQJ3k5Y1VygK9jj: /tmp/tmpnl9fsqp2/archive_in_another_project
{"description": "", "state": "closed", "folder": "/", "outputSpec": [], "developerNotes": "", "access": {"network": []}, "name": "archive_in_another_project", "runSpec": {"bundledDependsByRegion": {"aws:us-east-1": []}, "distribution": "Ubuntu", "bundledDepends": [], "interpreter": "python2.7", "executionPolicy": {}, "systemRequirements": {}, "release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}]}, "sponsored": false, "inputSpec": [], "modified": 1538771867741, "createdBy": {"user": "user-orodeh"}, "id": "applet-FKqvg6j0jGQ76bQj4GxFByZ9", "dxapi": "1.0.0", "tags": [], "project": "project-FKqvg5j0jGQJ3k5Y1VygK9jj", "ignoreReuse": false, "summary": "", "class": "applet", "created": 1538771867000, "links": [], "types": [], "hidden": false, "title": ""}
ok
test_asset_depends_clone (test_dxclient.TestDXBuildApp) ... ok
test_asset_depends_clone_app (test_dxclient.TestDXBuildApp) ... ok
test_asset_depends_failure (test_dxclient.TestDXBuildApp) ... ok
test_asset_depends_malform_details (test_dxclient.TestDXBuildApp) ... ok
test_asset_depends_using_id (test_dxclient.TestDXBuildApp) ... ok
test_asset_depends_using_name (test_dxclient.TestDXBuildApp) ... ok
test_build_and_get_cluster_app_bootstrap_script_inlined (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_and_run_applet_remote (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would run jobs'
test_build_app_and_pretend_to_update_devs (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_and_update_code (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_and_update_devs (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_autonumbering (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_suggestions (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_suggestions_success (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_warnings (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_with_bill_to (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_with_region (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_with_regional_options (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_app_with_resources (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_applet (test_dxclient.TestDXBuildApp) ... ok
test_build_applet_and_run_immediately (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would run jobs'
test_build_applet_dry_run (test_dxclient.TestDXBuildApp) ...
$ dx cd project-FKqvg900VYxjq92B1XYG3f24:/

$ dx build --json /tmp/tmpe1j9qrwo/asset_depends
{"types": [], "dxapi": "1.0.0", "links": ["file-FKqvg980VYxyG7FP1Vb1bXxv"], "created": 1538771882000, "runSpec": {"distribution": "Ubuntu", "systemRequirements": {}, "release": "14.04", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvg980VYxyG7FP1Vb1bXxv"}, "name": "test-asset.tar.gz"}]}, "executionPolicy": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvg980VYxyG7FP1Vb1bXxv"}, "name": "test-asset.tar.gz"}]}, "folder": "/", "developerNotes": "", "ignoreReuse": false, "outputSpec": [], "sponsored": false, "project": "project-FKqvgB00fG4jJkY81VjxgB7Y", "description": "", "modified": 1538771882787, "createdBy": {"user": "user-orodeh"}, "state": "closed", "class": "applet", "name": "asset_depends", "tags": [], "hidden": false, "title": "", "summary": "", "id": "applet-FKqvgBQ0fG4gfzxb4JGxGx23", "access": {"network": []}, "inputSpec": []}

$ dx ls asset-record --brief
record-FKqvgB00VYxjq92B1XYG3f25

$ dx cd project-FKqvgJ803gkjJkY81VjxgB7Z:/

$ dx build --json /tmp/tmp5gwwfm63/asset_depends
{"dxapi": "1.0.0", "ignoreReuse": false, "created": 1538771899000, "inputSpec": [], "hidden": false, "description": "", "outputSpec": [], "id": "applet-FKqvgKj03gkQJv6x4JjGxx95", "folder": "/", "sponsored": false, "state": "closed", "developerNotes": "", "modified": 1538771899280, "types": [], "createdBy": {"user": "user-orodeh"}, "class": "applet", "tags": [], "project": "project-FKqvgJ803gkjJkY81VjxgB7Z", "access": {"network": []}, "title": "", "name": "asset_depends", "links": ["file-FKqvgJQ03gkqF33K1Y3xP37k"], "summary": "", "runSpec": {"executionPolicy": {}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvgJQ03gkqF33K1Y3xP37k"}, "name": "test-asset.tar.gz"}]}, "interpreter": "python2.7", "distribution": "Ubuntu", "release": "14.04", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvgJQ03gkqF33K1Y3xP37k"}, "name": "test-asset.tar.gz"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "systemRequirements": {}}}

$ dx ls test-asset.tar.gz --brief
file-FKqvgJQ03gkqF33K1Y3xP37k

$ dx cd project-FKqvgQj0qxVjv4f81Y9jpZfq:/

$ dx build --json /tmp/tmpi4e9bnx4/asset_depends
Error: ('No asset bundle was found that matched the specification {"version": "0.1.1", "name": "asset-record", "project": "project-FKqvgQj0qxVjv4f81Y9jpZfq"}',)

$ dx cd project-FKqvgYQ0FQv8JkY81VjxgB7f:/

$ dx build --json /tmp/tmp4r_1emnw/asset_depends
Error: ("The required field 'archiveFileId' was not found in the details of the asset bundle record-FKqvgZQ0FQvJ3k5Y1VygK9jx ",)

$ dx cd project-FKqvgf006z4J3k5Y1VygK9jz:/

$ dx build --json /tmp/tmpv8e7f93s/asset_depends
{"sponsored": false, "dxapi": "1.0.0", "folder": "/", "summary": "", "title": "", "state": "closed", "hidden": false, "types": [], "runSpec": {"distribution": "Ubuntu", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "interpreter": "python2.7", "systemRequirements": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvgf806z4F9ykx1XqKGJ55"}, "name": "test-asset.tar.gz"}]}, "executionPolicy": {}, "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvgf806z4F9ykx1XqKGJ55"}, "name": "test-asset.tar.gz"}], "release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}}, "ignoreReuse": false, "class": "applet", "access": {"network": []}, "createdBy": {"user": "user-orodeh"}, "outputSpec": [], "created": 1538771933000, "project": "project-FKqvgf006z4J3k5Y1VygK9jz", "developerNotes": "", "inputSpec": [], "description": "", "name": "asset_depends", "links": ["file-FKqvgf806z4F9ykx1XqKGJ55"], "id": "applet-FKqvgg806z4BffQ84KPxZ8BK", "modified": 1538771934045, "tags": []}

$ dx cd project-FKqvgjQ0X0F8q92B1XYG3f27:/

$ dx build --json /tmp/tmpjmqjpn58/asset_depends
Error: ('No asset bundle was found that matched the specification {"project": "project-FKqvgjQ0X0F8q92B1XYG3f27", "version": "0.0.1", "name": "asset-record"}',)

$ dx build --json /tmp/tmpjmqjpn58/asset_depends
{"hidden": false, "project": "project-FKqvgjQ0X0F8q92B1XYG3f27", "class": "applet", "sponsored": false, "created": 1538771946000, "outputSpec": [], "access": {"network": []}, "runSpec": {"systemRequirements": {}, "executionPolicy": {}, "distribution": "Ubuntu", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvgjj0X0F8JkY81VjxgB7g"}, "name": "test-asset.tar.gz"}]}, "interpreter": "python2.7", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvgjj0X0F8JkY81VjxgB7g"}, "name": "test-asset.tar.gz"}], "release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}}, "id": "applet-FKqvgpQ0X0F0J4q44Gp7FVPV", "createdBy": {"user": "user-orodeh"}, "ignoreReuse": false, "modified": 1538771946257, "title": "", "description": "", "links": ["file-FKqvgjj0X0F8JkY81VjxgB7g"], "folder": "/", "tags": [], "inputSpec": [], "state": "closed", "dxapi": "1.0.0", "developerNotes": "", "summary": "", "name": "asset_depends", "types": []}

$ dx build --json /tmp/tmpjmqjpn58/asset_depends_fail
Error: ('Found more than one asset record that matches: name=asset-record, folder=/record_subfolder in project=project-FKqvgjQ0X0F8q92B1XYG3f27.',)

$ dx cd project-FKqvgv00fY3FF33K1Y3xP37q:/

$ dx build --json /tmp/tmprnhrc0r7/minimal_Ã¥pplet
{"outputSpec": [], "class": "applet", "created": 1538771954000, "types": [], "links": [], "tags": [], "createdBy": {"user": "user-orodeh"}, "project": "project-FKqvgv00fY3FF33K1Y3xP37q", "developerNotes": "", "title": "", "dxapi": "1.0.0", "id": "applet-FKqvgvQ0fY376bQj4GxFByZJ", "inputSpec": [], "summary": "", "runSpec": {"bundledDependsByRegion": {"aws:us-east-1": []}, "systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7", "release": "14.04", "distribution": "Ubuntu", "executionPolicy": {}, "bundledDepends": [], "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}]}, "name": "minimal_applet", "state": "closed", "folder": "/", "sponsored": false, "access": {"network": []}, "ignoreReuse": false, "hidden": false, "modified": 1538771954647, "description": ""}

$ dx cd project-FKqvgxj09f0x3k5Y1VygK9k2:/

$ dx build --dry-run /tmp/tmps1870aks/minimal_applet_dry_run --run -y --brief
usage: dx build [-h] [--env-help] [--ensure-upload] [--force-symlinks] [--app]
                [--workflow] [--globalworkflow] [-d DESTINATION] [--dry-run]
                [--publish] [--remote] [--no-watch] [-f] [-a] [-v VERSION]
                [-b USER_OR_ORG] [--no-check-syntax]
                [--no-version-autonumbering] [--no-update]
                [--no-dx-toolkit-autodep] [--no-parallel-build] [-y]
                [--extra-args EXTRA_ARGS] [--run ...] [--region REGION]
                [src_dir]

Build an applet, app, or workflow object from a local source directory. You
can use dx-app-wizard to generate a skeleton directory of an app/applet with
the necessary files.

positional arguments:
  src_dir               App, applet, or workflow source directory (default:
                        current directory)

optional arguments:
  -h, --help            show this help message and exit
  --env-help            Display help message for overriding environment
                        variables
  --ensure-upload       If specified, will bypass computing checksum of
                        resources directory and upload it unconditionally; by
                        default, will compute checksum and upload only if it
                        differs from a previously uploaded resources bundle.
  --force-symlinks      If specified, will not attempt to dereference symbolic
                        links pointing outside of the resource directory. By
                        default, any symlinks within the resource directory
                        are kept as links while links to files outside the
                        resource directory are dereferenced (note that links
                        to directories outside of the resource directory will
                        cause an error).
  --app, --create-app   Create an app.
  --workflow, --create-workflow
                        Create a workflow.
  --globalworkflow, --create-globalworkflow
                        Create a global workflow.
  --dry-run, -n         Do not create an app(let): only perform local checks
                        and compilation steps, and show the spec of the
                        app(let) that would have been created.
  --remote              Build the app remotely by uploading the source
                        directory to the DNAnexus Platform and building it
                        there. This option is useful if you would otherwise
                        need to cross-compile the app(let) to target the
                        Execution Environment.
  --no-watch            Don't watch the real-time logs of the remote builder.
                        (This option only applicable if --remote was
                        specified).
  -v VERSION, --version VERSION
                        Override the version number supplied in the manifest.
  --no-check-syntax     Warn but do not fail when syntax problems are found
                        (default is to fail on such errors)
  --no-dx-toolkit-autodep
                        Do not auto-insert the dx-toolkit dependency (default
                        is to add it if it would otherwise be absent from the
                        runSpec)
  --no-parallel-build   Build with make instead of make -jN.
  --extra-args EXTRA_ARGS
                        Arguments (in JSON format) to pass to the /applet/new
                        API method, overriding all other settings
  --run ...             Run the app or applet after building it (options
                        following this are passed to dx run; run at high
                        priority by default)

options for creating apps:
  (Only valid when --app/--create-app is specified)

  --publish             Publish the resulting app and make it the default.
  -b USER_OR_ORG, --bill-to USER_OR_ORG
                        Entity (of the form user-NAME or org-ORGNAME) to bill
                        for the app.
  --no-version-autonumbering
                        Only attempt to create the version number supplied in
                        the manifest (that is, do not try to create an
                        autonumbered version such as 1.2.3+git.ab1b1c1d if
                        1.2.3 already exists and is published).
  --no-update           Never update an existing unpublished app in place.
  -y, --yes             Do not ask for confirmation for potentially dangerous
                        operations
  --region REGION       Enable the app in this region. This flag can be
                        specified multiple times to enable the app in multiple
                        regions. If --region is not specified, then the
                        enabled region(s) will be determined by
                        'regionalOptions' in dxapp.json, or the project
                        context.

options for creating applets or workflows:
  (Only valid when --app/--create-app is NOT specified)

  -d DESTINATION, --destination DESTINATION
                        Specifies the destination project, destination folder,
                        and/or name for the applet, in the form
                        [PROJECT_NAME_OR_ID:][/[FOLDER/][NAME]]. Overrides the
                        project, folder, and name fields of the dxapp.json or
                        dxworkflow.json, if they were supplied.
  -f, --overwrite       Remove existing applet(s) of the same name in the
                        destination folder. This option is not yet supported
                        for workflows.
  -a, --archive         Archive existing applet(s) of the same name in the
                        destination folder. This option is not yet supported
                        for workflows.

dx build: error: Options --dry-run and --run cannot be specified together
ok
test_build_applet_warnings (test_dxclient.TestDXBuildApp) ... ok
test_build_applet_with_malformed_dxapp_json (test_dxclient.TestDXBuildApp) ... ok
test_build_applet_with_no_dxapp_json (test_dxclient.TestDXBuildApp) ... ok
test_build_applets_using_multi_region_dxapp_json (test_dxclient.TestDXBuildApp) ... /usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 36650), raddr=('54.175.190.114', 443)>
  self._sock = None
ok
test_build_failure (test_dxclient.TestDXBuildApp) ... ok
test_build_multi_region_app (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_multi_region_app_regional_options_empty (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_multi_region_app_regions_do_not_match (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_multi_region_app_requires_temporary_projects (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_multi_region_app_with_malformed_regional_options (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_multi_region_app_with_regional_options (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_multi_region_app_with_resources_failure (test_dxclient.TestDXBuildApp) ... /home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:7493: DeprecationWarning: Please use assertRaisesRegex instead.
  with self.assertRaisesRegexp(DXCalledProcessError, error_message):
ok
test_build_multi_region_app_without_regional_options (test_dxclient.TestDXBuildApp) ...
$ dx build --dry-run /tmp/tmps1870aks/minimal_applet_dry_run
Would create the following applet:
{
  "folder": "/",
  "version": "1.0.0",
  "project": "project-dummy",
  "inputSpec": [],
  "runSpec": {
    "code": "\n",
    "assetDepends": [],
    "bundledDepends": [],
    "execDepends": [
      {
        "name": "dx-toolkit",
        "package_manager": "apt"
      }
    ],
    "distribution": "Ubuntu",
    "release": "14.04",
    "interpreter": "python2.7"
  },
  "name": "minimal_applet_dry_run",
  "dxapi": "1.0.0",
  "outputSpec": [],
  "ignoreReuse": false
}
*** DRY-RUN-- no applet was created ***

$ dx cd project-FKqvgz80qbZqF33K1Y3xP37v:/

$ dx build /tmp/tmp80zijvyq/test_build_Ã¥pplet_warnings
WARNING:dxpy:app is missing a name, please add one in the "name" field of dxapp.json
ERROR:dxpy:input 0 has illegal name "34" (must match ^[a-zA-Z_][0-9a-zA-Z_]*$)
ERROR:dxpy:output 0 has illegal name "92" (must match ^[a-zA-Z_][0-9a-zA-Z_]*$)
Error: Expected name "34" of input parameter 0 to match ^[a-zA-Z_][0-9a-zA-Z_]*$, code 422. Request Time=1538771967.3409603, Request ID=1538771967352-590095

$ dx build /tmp/tmp80zijvyq/test_build_second_Ã¥pplet_warnings
WARNING:dxpy:app is missing a name, please add one in the "name" field of dxapp.json
WARNING:dxpy:dxapp.json contains no input specification (inputSpec). Your applet will not be usable as an app, runnable from the GUI, or composable using workflows.
WARNING:dxpy:dxapp.json contains no output specification (outputSpec). Your applet will not be usable as an app, runnable from the GUI, or composable using workflows.
Error: ('runSpec.interpreter field was not present',)

$ dx cd project-FKqvj0j0PQF8JkY81VjxgB7q:/

$ dx build /tmp/tmpabohheqj/Ã¥pplet_with_malformed_dxapp_json
Error: ("Could not parse dxapp.json file as JSON: ('Expecting property name enclosed in double quotes: line 1 column 2 (char 1)',)",)

$ dx cd project-FKqvj200KvFJ3k5Y1VygK9k3:/

$ dx build /tmp/tmpvdonmi4x/Ã¥pplet_with_no_dxapp_json
Error: ('Directory /tmp/tmpvdonmi4x/Ã¥pplet_with_no_dxapp_json does not contain dxapp.json: not a valid DNAnexus app source directory',)

$ dx cd project-FKqvj300bY2V1fbZ1X5xp1FV:/

$ dx build --json /tmp/tmph1l5fbz4/applet_1538771981_multi_region_dxapp_json_with_regional_system_requirements
{"project": "project-FKqvj38004vKG7FP1Vb1bXy0", "developerNotes": "", "createdBy": {"user": "user-orodeh"}, "sponsored": false, "summary": "", "state": "closed", "ignoreReuse": false, "modified": 1538771983014, "description": "", "links": [], "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {"main": {"instanceType": "mem2_hdd2_x1"}}}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDepends": [], "systemRequirements": {"main": {"instanceType": "mem2_hdd2_x1"}}, "release": "14.04", "executionPolicy": {}, "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": []}, "distribution": "Ubuntu"}, "tags": [], "id": "applet-FKqvj3Q004v0Jv6x4JjGxx97", "folder": "/", "created": 1538771982000, "class": "applet", "access": {"network": []}, "dxapi": "1.0.0", "name": "applet_1538771981_multi_region_dxapp_json_with_regional_system_requirements", "hidden": false, "outputSpec": [], "inputSpec": [], "types": [], "title": ""}

$ dx build --json /tmp/tmph1l5fbz4/applet_1538771981_multi_region_dxapp_json_with_regional_system_requirements
{"name": "applet_1538771981_multi_region_dxapp_json_with_regional_system_requirements", "ignoreReuse": false, "inputSpec": [], "created": 1538771987000, "state": "closed", "description": "", "id": "applet-FKqvj4j9ybXbV1604K0F4fg4", "links": [], "title": "", "project": "project-FKqvj4Q9ybXjq92B1XYG3f28", "sponsored": false, "tags": [], "access": {"network": []}, "summary": "", "dxapi": "1.0.0", "class": "applet", "hidden": false, "runSpec": {"executionPolicy": {}, "bundledDependsByRegion": {"azure:westus": []}, "systemRequirements": {"main": {"instanceType": "azure:mem2_ssd1_x1"}}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDepends": [], "distribution": "Ubuntu", "systemRequirementsByRegion": {"azure:westus": {"main": {"instanceType": "azure:mem2_ssd1_x1"}}}, "interpreter": "python2.7", "release": "14.04"}, "outputSpec": [], "developerNotes": "", "modified": 1538771988042, "types": [], "folder": "/", "createdBy": {"user": "user-orodeh"}}

$ dx cd project-FKqvj6j0YG17fzxb4JGxGx25:/

$ dx build /tmp/tmpns7bc_4q/build_failure
make: *** [all] Error 7
Error: ('make -j4 in target directory failed with exit code 2',)

$ dx build --no-parallel-build /tmp/tmpns7bc_4q/build_failure
make: *** [all] Error 7
Error: ('make in target directory failed with exit code 2',)

$ dx cd project-FKqvj880Z46QJv6x4JjGxx99:/

$ dx build --create-app --json --region aws:us-east-1 --region azure:westus /tmp/tmpjmlljuuy/asset_1538772002_multi_region_app_resources
WARNING:dxpy:app is missing a title, please add one in the "title" field of dxapp.json
WARNING:dxpy:app is missing a summary, please add one in the "summary" field of dxapp.json
WARNING:dxpy:app is missing a description, please supply one in README.md
Error: ('dxapp.json cannot contain a top-level "resources" field when the "regionalOptions" field is used or when the app is enabled in multiple regions',)

$ dx build --create-app --json /tmp/tmpjmlljuuy/asset_1538772011_multi_region_app_resources
WARNING:dxpy:app is missing a title, please add one in the "title" field of dxapp.json
WARNING:dxpy:app is missing a summary, please add one in the "summary" field of dxapp.json
WARNING:dxpy:app is missing a description, please supply one in README.md
Error: ('dxapp.json cannot contain a top-level "resources" field when the "regionalOptions" field is used or when the app is enabled in multiple regions',)

$ dx cd project-FKqvjJ80FjKpffQ84KPxZ8BV:/

$ dx build --create-app --region aws:us-east-1 --region azure:westus --json /tmp/tmp4l31ff04/asset_1538772022_multi_region_app
{"resources": "container-FKqvjK00FpkBffQ84KPxZ8BZ", "name": "asset_1538772022_multi_region_app", "created": 1538772024000, "runSpec": {"interpreter": "python2.7", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "systemRequirementsByRegion": {"azure:westus": {}, "aws:us-east-1": {}}, "distribution": "Ubuntu", "executionPolicy": {}, "systemRequirements": {}, "bundledDependsByRegion": {"azure:westus": [], "aws:us-east-1": []}, "release": "14.04", "bundledDepends": []}, "applet": "applet-FKqvjK00z9XF6V404KBXf4vF", "details": {}, "class": "app", "deleted": false, "description": "", "openSource": false, "title": "asset_1538772022_multi_region_app", "ignoreReuse": false, "aliases": ["1.0.0", "default"], "version": "1.0.0", "installed": true, "installs": 1, "billTo": "user-orodeh", "categories": [], "modified": 1538772025391, "outputSpec": [], "createdBy": "user-orodeh", "id": "app-FKqvjK09z42BffQ84KPxZ8BY", "region": "aws:us-east-1", "lineItemPerTest": null, "inputSpec": [], "authorizedUsers": [], "dxapi": "1.0.0", "regionalOptions": {"azure:westus": {"resources": "container-FKqvjK09VQkBffQ84KPxZ8Bb", "applet": "applet-FKqvjK099bVg6bQj4GxFByZQ"}, "aws:us-east-1": {"resources": "container-FKqvjK00FpkBffQ84KPxZ8BZ", "applet": "applet-FKqvjK00z9XF6V404KBXf4vF"}}, "developerNotes": "", "summary": "", "isDeveloperFor": true, "access": {"network": []}}

$ dx describe --json app-FKqvjK09z42BffQ84KPxZ8BY
{
    "installs": 1,
    "categories": [],
    "name": "asset_1538772022_multi_region_app",
    "runSpec": {
        "interpreter": "python2.7",
        "executionPolicy": {},
        "release": "14.04",
        "systemRequirementsByRegion": {
            "aws:us-east-1": {},
            "azure:westus": {}
        },
        "bundledDependsByRegion": {
            "aws:us-east-1": [],
            "azure:westus": []
        },
        "execDepends": [
            {
                "name": "dx-toolkit",
                "package_manager": "apt"
            }
        ],
        "bundledDepends": [],
        "distribution": "Ubuntu",
        "systemRequirements": {}
    },
    "authorizedUsers": [],
    "installed": true,
    "resources": "container-FKqvjK00FpkBffQ84KPxZ8BZ",
    "ignoreReuse": false,
    "version": "1.0.0",
    "created": 1538772024000,
    "summary": "",
    "regionalOptions": {
        "aws:us-east-1": {
            "applet": "applet-FKqvjK00z9XF6V404KBXf4vF",
            "resources": "container-FKqvjK00FpkBffQ84KPxZ8BZ"
        },
        "azure:westus": {
            "applet": "applet-FKqvjK099bVg6bQj4GxFByZQ",
            "resources": "container-FKqvjK09VQkBffQ84KPxZ8Bb"
        }
    },
    "inputSpec": [],
    "aliases": [
        "1.0.0",
        "default"
    ],
    "lineItemPerTest": null,
    "deleted": false,
    "title": "asset_1538772022_multi_region_app",
    "outputSpec": [],
    "region": "aws:us-east-1",
    "createdBy": "user-orodeh",
    "modified": 1538772025391,
    "details": {},
    "access": {
        "network": []
    },
    "isDeveloperFor": true,
    "applet": "applet-FKqvjK00z9XF6V404KBXf4vF",
    "openSource": false,
    "id": "app-FKqvjK09z42BffQ84KPxZ8BY",
    "billTo": "user-orodeh",
    "developerNotes": "",
    "class": "app",
    "description": "",
    "dxapi": "1.0.0"
}
ok
test_build_single_region_app_without_regional_options (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_build_without_context (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would clobber your local environment'
test_bundled_depends_reuse (test_dxclient.TestDXBuildApp) ... ok
test_bundled_depends_reuse_with_force (test_dxclient.TestDXBuildApp) ... ok
test_cannot_build_applet_with_mismatching_regional_options (test_dxclient.TestDXBuildApp) ... /home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:7456: DeprecationWarning: Please use assertRaisesRegex instead.
  with self.assertRaisesRegexp(DXCalledProcessError, "do not contain this region"):
ok
test_cannot_remote_build_multi_region_app (test_dxclient.TestDXBuildApp) ... ok
test_categories_propagated_to_tags (test_dxclient.TestDXBuildApp) ...
$ dx cd project-FKqvjV80Xz87fzxb4JGxGx27:/

$ dx build --json -d project-FKqvjV80Xz87fzxb4JGxGx27:applet1 /tmp/tmpd94pqxke/bundled_depends_reuse
{"name": "applet1", "modified": 1538772043009, "project": "project-FKqvjV80Xz87fzxb4JGxGx27", "outputSpec": [], "createdBy": {"user": "user-orodeh"}, "types": [], "title": "", "runSpec": {"distribution": "Ubuntu", "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjVj0Xz879BgjPbyVKqP0"}}], "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "release": "14.04", "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjVj0Xz879BgjPbyVKqP0"}}]}, "systemRequirements": {}, "interpreter": "python2.7", "executionPolicy": {}}, "summary": "", "folder": "/", "ignoreReuse": false, "id": "applet-FKqvjXQ0Xz835kk4Pg1xk44q", "access": {"network": []}, "created": 1538772042000, "dxapi": "1.0.0", "tags": [], "developerNotes": "", "links": ["file-FKqvjVj0Xz879BgjPbyVKqP0"], "sponsored": false, "state": "closed", "hidden": false, "description": "", "inputSpec": [], "class": "applet"}

$ dx build --json -d project-FKqvjV80Xz87fzxb4JGxGx27:applet2 /tmp/tmpd94pqxke/bundled_depends_reuse
{"created": 1538772044000, "state": "closed", "links": ["file-FKqvjVj0Xz879BgjPbyVKqP0"], "id": "applet-FKqvjY00Xz81Vz2vPbKb72Yx", "description": "", "createdBy": {"user": "user-orodeh"}, "outputSpec": [], "folder": "/", "modified": 1538772044501, "class": "applet", "inputSpec": [], "project": "project-FKqvjV80Xz87fzxb4JGxGx27", "tags": [], "ignoreReuse": false, "developerNotes": "", "dxapi": "1.0.0", "summary": "", "name": "applet2", "types": [], "title": "", "sponsored": false, "access": {"network": []}, "hidden": false, "runSpec": {"release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "distribution": "Ubuntu", "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjVj0Xz879BgjPbyVKqP0"}}], "systemRequirements": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjVj0Xz879BgjPbyVKqP0"}}]}, "interpreter": "python2.7", "executionPolicy": {}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}]}}

$ dx build --json -d project-FKqvjV80Xz87fzxb4JGxGx27:applet3 /tmp/tmpd94pqxke/bundled_depends_reuse
{"dxapi": "1.0.0", "summary": "", "name": "applet3", "ignoreReuse": false, "project": "project-FKqvjV80Xz87fzxb4JGxGx27", "access": {"network": []}, "hidden": false, "tags": [], "class": "applet", "state": "closed", "inputSpec": [], "links": ["file-FKqvjY80Xz835kk4Pg1xk44x"], "outputSpec": [], "created": 1538772048000, "developerNotes": "", "modified": 1538772048972, "id": "applet-FKqvjZ00Xz835kk4Pg1xk44z", "folder": "/", "createdBy": {"user": "user-orodeh"}, "runSpec": {"distribution": "Ubuntu", "executionPolicy": {}, "interpreter": "python2.7", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvjY80Xz835kk4Pg1xk44x"}, "name": "resources.tar.gz"}], "release": "14.04", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvjY80Xz835kk4Pg1xk44x"}, "name": "resources.tar.gz"}]}, "systemRequirements": {}}, "title": "", "sponsored": false, "description": "", "types": []}

$ dx cd project-FKqvjb80P5vBffQ84KPxZ8Bj:/

$ dx build --json -d project-FKqvjb80P5vBffQ84KPxZ8Bj:applet1 /tmp/tmp0lvm82f6/bundled_depends_reuse_with_force
{"types": [], "tags": [], "created": 1538772059000, "links": ["file-FKqvjbj0P5v4V1JGPfgV6FvB"], "outputSpec": [], "developerNotes": "", "dxapi": "1.0.0", "id": "applet-FKqvjfj0P5v35kk4Pg1xk451", "sponsored": false, "name": "applet1", "access": {"network": []}, "hidden": false, "title": "", "summary": "", "class": "applet", "folder": "/", "createdBy": {"user": "user-orodeh"}, "state": "closed", "runSpec": {"bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjbj0P5v4V1JGPfgV6FvB"}}], "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjbj0P5v4V1JGPfgV6FvB"}}]}, "executionPolicy": {}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "release": "14.04", "interpreter": "python2.7", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "systemRequirements": {}, "distribution": "Ubuntu"}, "project": "project-FKqvjb80P5vBffQ84KPxZ8Bj", "inputSpec": [], "description": "", "ignoreReuse": false, "modified": 1538772059138}

$ dx build --json -f -d project-FKqvjb80P5vBffQ84KPxZ8Bj:applet1 /tmp/tmp0lvm82f6/bundled_depends_reuse_with_force
{"types": [], "tags": [], "id": "applet-FKqvjg00P5v4V1JGPfgV6FvG", "name": "applet1", "access": {"network": []}, "sponsored": false, "folder": "/", "summary": "", "project": "project-FKqvjb80P5vBffQ84KPxZ8Bj", "description": "", "dxapi": "1.0.0", "modified": 1538772060782, "state": "closed", "ignoreReuse": false, "hidden": false, "created": 1538772060000, "class": "applet", "links": ["file-FKqvjbj0P5v4V1JGPfgV6FvB"], "createdBy": {"user": "user-orodeh"}, "runSpec": {"bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjbj0P5v4V1JGPfgV6FvB"}}], "release": "14.04", "interpreter": "python2.7", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "executionPolicy": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvjbj0P5v4V1JGPfgV6FvB"}}]}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirements": {}, "distribution": "Ubuntu"}, "developerNotes": "", "inputSpec": [], "outputSpec": [], "title": ""}

$ dx describe applet-FKqvjfj0P5v35kk4Pg1xk451
dxpy.exceptions.DXCLIError: No matches found for applet-FKqvjfj0P5v35kk4Pg1xk451

$ dx cd project-FKqvjjQ0xZZQJv6x4JjGxx9F:/

$ dx build --json /tmp/tmpwqkq6kd1/applet_1538772067_with_regional_system_requirements
Error: ('destination project is in region azure:westus but "regionalOptions" do not contain this region. Please, update your "regionalOptions" specification',)

$ dx cd project-FKqvjpQ0P93BffQ84KPxZ8Bk:/

$ dx build --remote --app --region aws:us-east-1 --region azure:westus /tmp/tmpgm7yv0fz/asset_1538772075_remote_multi_region_app
WARNING:dxpy:app is missing a title, please add one in the "title" field of dxapp.json
WARNING:dxpy:app is missing a summary, please add one in the "summary" field of dxapp.json
WARNING:dxpy:app is missing a description, please supply one in README.md
usage: dx [-h]
dx: error: --region can only be specified once for remote builds

$ dx cd project-FKqvjqj0zpKgfzxb4JGxGx28:/

$ dx build --json -d categories1 /tmp/tmp5c1oc1hc/categories_propagated_to_tags
{"links": [], "sponsored": false, "ignoreReuse": false, "hidden": false, "runSpec": {"systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "distribution": "Ubuntu", "bundledDependsByRegion": {"aws:us-east-1": []}, "executionPolicy": {}, "bundledDepends": [], "interpreter": "python2.7", "release": "14.04", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}]}, "project": "project-FKqvjqj0zpKgfzxb4JGxGx28", "tags": ["Import", "mytag"], "dxapi": "1.0.0", "id": "applet-FKqvjvQ0zpKVVz2vPbKb72Yz", "outputSpec": [], "state": "closed", "created": 1538772082000, "class": "applet", "inputSpec": [], "developerNotes": "", "types": [], "name": "categories1", "summary": "", "modified": 1538772082108, "access": {"network": []}, "title": "", "description": "", "createdBy": {"user": "user-orodeh"}, "folder": "/"}

$ dx build --json -d categories2 /tmp/tmp5c1oc1hc/categories_propagated_to_tags
{"summary": "", "hidden": false, "class": "applet", "state": "closed", "project": "project-FKqvjqj0zpKgfzxb4JGxGx28", "links": [], "sponsored": false, "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {}}, "systemRequirements": {}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "release": "14.04", "executionPolicy": {}, "distribution": "Ubuntu", "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": []}, "bundledDepends": []}, "dxapi": "1.0.0", "createdBy": {"user": "user-orodeh"}, "outputSpec": [], "description": "", "tags": ["Import"], "ignoreReuse": false, "modified": 1538772083602, "access": {"network": []}, "name": "categories2", "folder": "/", "developerNotes": "", "title": "", "types": [], "inputSpec": [], "id": "applet-FKqvjvj0zpKY5kk4Pg1xk453", "created": 1538772083000}
ok
test_deps_without_network_access (test_dxclient.TestDXBuildApp) ... ok
test_dry_run_does_not_clone_asset_depends (test_dxclient.TestDXBuildApp) ... ok
test_duplicate_keys_in_spec (test_dxclient.TestDXBuildApp) ... ok
test_dx_add_list_remove_developers_of_apps (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_dx_add_list_remove_users_of_apps (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_dx_build_applet_dxapp_json_created_with_makefile (test_dxclient.TestDXBuildApp) ... ok
test_dx_build_applet_no_app_linting (test_dxclient.TestDXBuildApp) ... {"id": "applet-FKqvk680j3jJ6fP0PbFbK3x2"}
{"id": "applet-FKqvk6Q0j3j1Vz2vPbKb72Z1"}
{"id": "applet-FKqvk6j0j3j35kk4Pg1xk455"}
ok
test_dx_publish_app (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create app'
test_help_without_security_context (test_dxclient.TestDXBuildApp) ... ok
test_invalid_authorized_users (test_dxclient.TestDXBuildApp) ...
$ dx cd project-FKqvjxj0gGJQJ4q44Gp7FVPY:/

$ dx build --json /tmp/tmparudyy_9/deps_without_network_access
WARNING:dxpy:app name "test_deps_without_network_access" does not match containing directory "deps_without_network_access"
Error: ('runSpec.execDepends specifies non-APT dependencies, but no network access spec is given.\nAdd {"access": {"network": ["*"]}} to allow dependencies to install.\nSee https://wiki.dnanexus.com/Developer-Tutorials/Request-Additional-App-Resources#Network-Access.\nRerun with --no-check-syntax to proceed anyway.',)

$ dx cd project-FKqvjz00ZV9BffQ84KPxZ8Bp:/

$ dx build --dry-run /tmp/tmph7vpa68k/asset_depends_not_cloned
Would create the following applet:
{
  "outputSpec": [],
  "name": "asset_depends_not_cloned",
  "ignoreReuse": false,
  "dxapi": "1.0.0",
  "folder": "/",
  "inputSpec": [],
  "project": "project-dummy",
  "version": "1.0.0",
  "runSpec": {
    "code": "\n",
    "interpreter": "python2.7",
    "execDepends": [
      {
        "name": "dx-toolkit",
        "package_manager": "apt"
      }
    ],
    "distribution": "Ubuntu",
    "bundledDepends": [
      {
        "name": "test-asset.tar.gz",
        "id": {
          "$dnanexus_link": "file-FKqvjz80ZV93YZ6g4J2qQpzB"
        }
      }
    ],
    "release": "14.04",
    "assetDepends": [
      {
        "id": "record-FKqvk000ZV95V1604K0F4fg6"
      }
    ]
  }
}
*** DRY-RUN-- no applet was created ***

$ dx cd project-FKqvk2Q0zXV0Jv6x4JjGxx9G:/

$ dx build --json /tmp/tmpigdpx6_6/duplicate_keys_in_spec
Error: ('Could not parse dxapp.json file as JSON: ("duplicate key: \'file\'",)',)

$ dx cd project-FKqvk3j02YxQJ4q44Gp7FVPZ:/

$ dx build /tmp/tmp_66xx9jh/nodxapp_applet
make: Entering directory '/tmp/tmp_66xx9jh/nodxapp_applet'
cp temp_dxapp.json dxapp.json
make: Leaving directory '/tmp/tmp_66xx9jh/nodxapp_applet'
{"id": "applet-FKqvk4802YxZV1JGPfgV6FvK"}

$ dx cd project-FKqvk5Q0j3jBffQ84KPxZ8Bv:/

$ dx clearenv

$ dx cd project-FKqvk800YFv7fzxb4JGxGx29:/

$ dx build -h
usage: dx build [-h] [--env-help] [--ensure-upload] [--force-symlinks] [--app]
                [--workflow] [--globalworkflow] [-d DESTINATION] [--dry-run]
                [--publish] [--remote] [--no-watch] [-f] [-a] [-v VERSION]
                [-b USER_OR_ORG] [--no-check-syntax]
                [--no-version-autonumbering] [--no-update]
                [--no-dx-toolkit-autodep] [--no-parallel-build] [-y]
                [--extra-args EXTRA_ARGS] [--run ...] [--region REGION]
                [src_dir]

Build an applet, app, or workflow object from a local source directory. You
can use dx-app-wizard to generate a skeleton directory of an app/applet with
the necessary files.

positional arguments:
  src_dir               App, applet, or workflow source directory (default:
                        current directory)

optional arguments:
  -h, --help            show this help message and exit
  --env-help            Display help message for overriding environment
                        variables
  --ensure-upload       If specified, will bypass computing checksum of
                        resources directory and upload it unconditionally; by
                        default, will compute checksum and upload only if it
                        differs from a previously uploaded resources bundle.
  --force-symlinks      If specified, will not attempt to dereference symbolic
                        links pointing outside of the resource directory. By
                        default, any symlinks within the resource directory
                        are kept as links while links to files outside the
                        resource directory are dereferenced (note that links
                        to directories outside of the resource directory will
                        cause an error).
  --app, --create-app   Create an app.
  --workflow, --create-workflow
                        Create a workflow.
  --globalworkflow, --create-globalworkflow
                        Create a global workflow.
  --dry-run, -n         Do not create an app(let): only perform local checks
                        and compilation steps, and show the spec of the
                        app(let) that would have been created.
  --remote              Build the app remotely by uploading the source
                        directory to the DNAnexus Platform and building it
                        there. This option is useful if you would otherwise
                        need to cross-compile the app(let) to target the
                        Execution Environment.
  --no-watch            Don't watch the real-time logs of the remote builder.
                        (This option only applicable if --remote was
                        specified).
  -v VERSION, --version VERSION
                        Override the version number supplied in the manifest.
  --no-check-syntax     Warn but do not fail when syntax problems are found
                        (default is to fail on such errors)
  --no-dx-toolkit-autodep
                        Do not auto-insert the dx-toolkit dependency (default
                        is to add it if it would otherwise be absent from the
                        runSpec)
  --no-parallel-build   Build with make instead of make -jN.
  --extra-args EXTRA_ARGS
                        Arguments (in JSON format) to pass to the /applet/new
                        API method, overriding all other settings
  --run ...             Run the app or applet after building it (options
                        following this are passed to dx run; run at high
                        priority by default)

options for creating apps:
  (Only valid when --app/--create-app is specified)

  --publish             Publish the resulting app and make it the default.
  -b USER_OR_ORG, --bill-to USER_OR_ORG
                        Entity (of the form user-NAME or org-ORGNAME) to bill
                        for the app.
  --no-version-autonumbering
                        Only attempt to create the version number supplied in
                        the manifest (that is, do not try to create an
                        autonumbered version such as 1.2.3+git.ab1b1c1d if
                        1.2.3 already exists and is published).
  --no-update           Never update an existing unpublished app in place.
  -y, --yes             Do not ask for confirmation for potentially dangerous
                        operations
  --region REGION       Enable the app in this region. This flag can be
                        specified multiple times to enable the app in multiple
                        regions. If --region is not specified, then the
                        enabled region(s) will be determined by
                        'regionalOptions' in dxapp.json, or the project
                        context.

options for creating applets or workflows:
  (Only valid when --app/--create-app is NOT specified)

  -d DESTINATION, --destination DESTINATION
                        Specifies the destination project, destination folder,
                        and/or name for the applet, in the form
                        [PROJECT_NAME_OR_ID:][/[FOLDER/][NAME]]. Overrides the
                        project, folder, and name fields of the dxapp.json or
                        dxworkflow.json, if they were supplied.
  -f, --overwrite       Remove existing applet(s) of the same name in the
                        destination folder. This option is not yet supported
                        for workflows.
  -a, --archive         Archive existing applet(s) of the same name in the
                        destination folder. This option is not yet supported
                        for workflows.

$ dx cd project-FKqvk9Q0J72QJv6x4JjGxx9P:/

$ dx build --json /tmp/tmprwcg9948/invalid_authorized_users
Error: ('Expected authorizedUsers to be a list of strings',)

$ dx build --json /tmp/tmprwcg9948/invalid_authorized_users_2
WARNING:dxpy:app name "invalid_authorized_users" does not match containing directory "invalid_authorized_users_2"
Error: ('authorizedUsers field contains an entry which is not either the string "PUBLIC" or a user or org ID',)
ok
test_invalid_execdepends (test_dxclient.TestDXBuildApp) ... ok
test_invalid_project_context (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_overwrite_applet (test_dxclient.TestDXBuildApp) ... ok
test_overwrite_multiple_applets (test_dxclient.TestDXBuildApp) ...
$ dx cd project-FKqvkF80pQp0J4q44Gp7FVPb:/

$ dx build --json /tmp/tmp0vwai_iu/invalid_execdepends
Error: ('Expected runSpec.execDepends to be an array. Rerun with --no-check-syntax to proceed anyway.',)

$ dx cd project-FKqvkGQ0v1bBffQ84KPxZ8Bx:/

$ dx build --json /tmp/tmp752s221e/applet_overwriting
{"created": 1538772148000, "class": "applet", "modified": 1538772148132, "types": [], "dxapi": "1.0.0", "sponsored": false, "ignoreReuse": false, "runSpec": {"executionPolicy": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "distribution": "Ubuntu", "bundledDependsByRegion": {"aws:us-east-1": []}, "bundledDepends": [], "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "release": "14.04", "systemRequirements": {}, "interpreter": "python2.7"}, "name": "applet_overwriting", "outputSpec": [], "project": "project-FKqvkGQ0v1bBffQ84KPxZ8Bx", "title": "", "createdBy": {"user": "user-orodeh"}, "access": {"network": []}, "developerNotes": "", "folder": "/", "summary": "", "description": "", "inputSpec": [], "hidden": false, "state": "closed", "tags": [], "links": [], "id": "applet-FKqvkJ00v1b35kk4Pg1xk457"}

$ dx mkdir subfolder

$ dx build --destination=subfolder/applet_overwriting /tmp/tmp752s221e/applet_overwriting
{"id": "applet-FKqvkJQ0v1bKjkqFPf8Kkfk1"}

$ dx build /tmp/tmp752s221e/applet_overwriting
Error: ('An applet already exists at /applet_overwriting (id applet-FKqvkJ00v1b35kk4Pg1xk457) and neither -f/--overwrite nor -a/--archive were given.',)

$ dx build -f /tmp/tmp752s221e/applet_overwriting
{"id": "applet-FKqvkK00v1b9kQyPPfJjb8XY"}

$ dx describe applet-FKqvkJ00v1b35kk4Pg1xk457
dxpy.exceptions.DXCLIError: No matches found for applet-FKqvkJ00v1b35kk4Pg1xk457

$ dx cd project-FKqvkPQ0f6y7fzxb4JGxGx2P:/

$ dx mkdir subfolder1

$ dx build --json --destination=subfolder1/applet_overwriting /tmp/tmpiekos47_/applet_overwriting
{"description": "", "project": "project-FKqvkPQ0f6y7fzxb4JGxGx2P", "title": "", "outputSpec": [], "inputSpec": [], "class": "applet", "developerNotes": "", "state": "closed", "summary": "", "types": [], "hidden": false, "folder": "/subfolder1", "modified": 1538772161735, "sponsored": false, "name": "applet_overwriting", "tags": [], "access": {"network": []}, "runSpec": {"distribution": "Ubuntu", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDependsByRegion": {"aws:us-east-1": []}, "interpreter": "python2.7", "systemRequirements": {}, "release": "14.04", "bundledDepends": [], "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "executionPolicy": {}}, "id": "applet-FKqvkQ80f6y79BgjPbyVKqP2", "dxapi": "1.0.0", "created": 1538772161000, "createdBy": {"user": "user-orodeh"}, "links": [], "ignoreReuse": false}

$ dx mkdir subfolder2

$ dx build --json --destination=subfolder2/applet_overwriting /tmp/tmpiekos47_/applet_overwriting
{"links": [], "created": 1538772163000, "tags": [], "state": "closed", "project": "project-FKqvkPQ0f6y7fzxb4JGxGx2P", "modified": 1538772163835, "sponsored": false, "folder": "/subfolder2", "id": "applet-FKqvkQj0f6y35kk4Pg1xk459", "dxapi": "1.0.0", "inputSpec": [], "outputSpec": [], "developerNotes": "", "types": [], "description": "", "class": "applet", "ignoreReuse": false, "createdBy": {"user": "user-orodeh"}, "title": "", "summary": "", "runSpec": {"executionPolicy": {}, "systemRequirements": {}, "distribution": "Ubuntu", "bundledDepends": [], "release": "14.04", "bundledDependsByRegion": {"aws:us-east-1": []}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "interpreter": "python2.7", "systemRequirementsByRegion": {"aws:us-east-1": {}}}, "access": {"network": []}, "name": "applet_overwriting", "hidden": false}

$ dx mv subfolder2/applet_overwriting subfolder1

$ dx describe --json applet-FKqvkQ80f6y79BgjPbyVKqP2
{
    "project": "project-FKqvkPQ0f6y7fzxb4JGxGx2P",
    "created": 1538772161000,
    "description": "",
    "createdBy": {
        "user": "user-orodeh"
    },
    "types": [],
    "summary": "",
    "hidden": false,
    "properties": {},
    "dxapi": "1.0.0",
    "state": "closed",
    "developerNotes": "",
    "inputSpec": [],
    "outputSpec": [],
    "ignoreReuse": false,
    "name": "applet_overwriting",
    "folder": "/subfolder1",
    "sponsored": false,
    "class": "applet",
    "runSpec": {
        "interpreter": "python2.7",
        "bundledDepends": [],
        "systemRequirements": {},
        "execDepends": [
            {
                "package_manager": "apt",
                "name": "dx-toolkit"
            }
        ],
        "bundledDependsByRegion": {
            "aws:us-east-1": []
        },
        "executionPolicy": {},
        "distribution": "Ubuntu",
        "systemRequirementsByRegion": {
            "aws:us-east-1": {}
        },
        "release": "14.04"
    },
    "access": {
        "network": []
    },
    "links": [],
    "tags": [],
    "details": {},
    "modified": 1538772161735,
    "id": "applet-FKqvkQ80f6y79BgjPbyVKqP2",
    "title": ""
}

$ dx describe --json applet-FKqvkQj0f6y35kk4Pg1xk459
{
    "details": {},
    "summary": "",
    "outputSpec": [],
    "id": "applet-FKqvkQj0f6y35kk4Pg1xk459",
    "folder": "/subfolder1",
    "name": "applet_overwriting",
    "title": "",
    "modified": 1538772163835,
    "ignoreReuse": false,
    "inputSpec": [],
    "createdBy": {
        "user": "user-orodeh"
    },
    "hidden": false,
    "sponsored": false,
    "state": "closed",
    "tags": [],
    "properties": {},
    "class": "applet",
    "description": "",
    "access": {
        "network": []
    },
    "developerNotes": "",
    "links": [],
    "types": [],
    "runSpec": {
        "execDepends": [
            {
                "name": "dx-toolkit",
                "package_manager": "apt"
            }
        ],
        "executionPolicy": {},
        "interpreter": "python2.7",
        "systemRequirements": {},
        "release": "14.04",
        "systemRequirementsByRegion": {
            "aws:us-east-1": {}
        },
        "bundledDepends": [],
        "distribution": "Ubuntu",
        "bundledDependsByRegion": {
            "aws:us-east-1": []
        }
    },
    "dxapi": "1.0.0",
    "project": "project-FKqvkPQ0f6y7fzxb4JGxGx2P",
    "created": 1538772163000
}

$ dx build --destination=subfolder1/applet_overwriting /tmp/tmpiekos47_/applet_overwriting
Error: ('An applet already exists at /subfolder1/applet_overwriting (id applet-FKqvkQj0f6y35kk4Pg1xk459) and neither -f/--overwrite nor -a/--archive were given.',)

$ dx build -f --json --destination=subfolder1/applet_overwriting /tmp/tmpiekos47_/applet_overwriting
{"links": [], "createdBy": {"user": "user-orodeh"}, "created": 1538772168000, "project": "project-FKqvkPQ0f6y7fzxb4JGxGx2P", "name": "applet_overwriting", "folder": "/subfolder1", "hidden": false, "ignoreReuse": false, "runSpec": {"executionPolicy": {}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "release": "14.04", "systemRequirements": {}, "interpreter": "python2.7", "bundledDepends": [], "bundledDependsByRegion": {"aws:us-east-1": []}, "distribution": "Ubuntu", "systemRequirementsByRegion": {"aws:us-east-1": {}}}, "class": "applet", "inputSpec": [], "access": {"network": []}, "tags": [], "title": "", "outputSpec": [], "developerNotes": "", "dxapi": "1.0.0", "summary": "", "types": [], "sponsored": false, "state": "closed", "id": "applet-FKqvkX00f6y4V1JGPfgV6FvQ", "modified": 1538772168700, "description": ""}

$ dx describe applet-FKqvkQ80f6y79BgjPbyVKqP2
dxpy.exceptions.DXCLIError: No matches found for applet-FKqvkQ80f6y79BgjPbyVKqP2

$ dx describe applet-FKqvkQj0f6y35kk4Pg1xk459
dxpy.exceptions.DXCLIError: No matches found for applet-FKqvkQj0f6y35kk4Pg1xk459

$ dx describe applet-FKqvkX00f6y4V1JGPfgV6FvQ
Result 1:
ID                  applet-FKqvkX00f6y4V1JGPfgV6FvQ
Class               applet
Project             project-FKqvkPQ0f6y7fzxb4JGxGx2P
Folder              /subfolder1
Name                applet_overwriting
State               closed
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 13:42:48 2018
Created by          orodeh
Last modified       Fri Oct  5 13:42:48 2018
Title
Summary
Access              {"network": []}
API version         1.0.0
Input Spec          -
Output Spec         -
Interpreter         python2.7
bundledDepends      -
execDepends         apt: dx-toolkit
Sys Requirements    {}
ignoreReuse         false
ok
test_remote_build_app (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps and run jobs'
test_remote_build_app_and_run_immediately (test_dxclient.TestDXBuildApp) ... ok
test_remote_build_app_trusty (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps and run jobs'
test_remote_build_applet (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps and run jobs'
test_remote_build_applet_and_run_immediately (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would run jobs'
test_remote_build_applet_trusty (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps and run jobs'
test_syntax_checks (test_dxclient.TestDXBuildApp) ... ok
test_update_app_authorized_users (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_update_app_categories (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_update_multi_region_app (test_dxclient.TestDXBuildApp) ... skipped 'skipping test that would create apps'
test_upload_resources (test_dxclient.TestDXBuildApp) ...
$ dx cd project-FKqvkZ004x0QJv6x4JjGxx9Q:/

$ dx build --remote --app /tmp/tmpxhsb0rfo/minimal_remote_build_Ã¥pp_to_run --run --yes
usage: dx build [-h] [--env-help] [--ensure-upload] [--force-symlinks] [--app]
                [--workflow] [--globalworkflow] [-d DESTINATION] [--dry-run]
                [--publish] [--remote] [--no-watch] [-f] [-a] [-v VERSION]
                [-b USER_OR_ORG] [--no-check-syntax]
                [--no-version-autonumbering] [--no-update]
                [--no-dx-toolkit-autodep] [--no-parallel-build] [-y]
                [--extra-args EXTRA_ARGS] [--run ...] [--region REGION]
                [src_dir]

Build an applet, app, or workflow object from a local source directory. You
can use dx-app-wizard to generate a skeleton directory of an app/applet with
the necessary files.

positional arguments:
  src_dir               App, applet, or workflow source directory (default:
                        current directory)

optional arguments:
  -h, --help            show this help message and exit
  --env-help            Display help message for overriding environment
                        variables
  --ensure-upload       If specified, will bypass computing checksum of
                        resources directory and upload it unconditionally; by
                        default, will compute checksum and upload only if it
                        differs from a previously uploaded resources bundle.
  --force-symlinks      If specified, will not attempt to dereference symbolic
                        links pointing outside of the resource directory. By
                        default, any symlinks within the resource directory
                        are kept as links while links to files outside the
                        resource directory are dereferenced (note that links
                        to directories outside of the resource directory will
                        cause an error).
  --app, --create-app   Create an app.
  --workflow, --create-workflow
                        Create a workflow.
  --globalworkflow, --create-globalworkflow
                        Create a global workflow.
  --dry-run, -n         Do not create an app(let): only perform local checks
                        and compilation steps, and show the spec of the
                        app(let) that would have been created.
  --remote              Build the app remotely by uploading the source
                        directory to the DNAnexus Platform and building it
                        there. This option is useful if you would otherwise
                        need to cross-compile the app(let) to target the
                        Execution Environment.
  --no-watch            Don't watch the real-time logs of the remote builder.
                        (This option only applicable if --remote was
                        specified).
  -v VERSION, --version VERSION
                        Override the version number supplied in the manifest.
  --no-check-syntax     Warn but do not fail when syntax problems are found
                        (default is to fail on such errors)
  --no-dx-toolkit-autodep
                        Do not auto-insert the dx-toolkit dependency (default
                        is to add it if it would otherwise be absent from the
                        runSpec)
  --no-parallel-build   Build with make instead of make -jN.
  --extra-args EXTRA_ARGS
                        Arguments (in JSON format) to pass to the /applet/new
                        API method, overriding all other settings
  --run ...             Run the app or applet after building it (options
                        following this are passed to dx run; run at high
                        priority by default)

options for creating apps:
  (Only valid when --app/--create-app is specified)

  --publish             Publish the resulting app and make it the default.
  -b USER_OR_ORG, --bill-to USER_OR_ORG
                        Entity (of the form user-NAME or org-ORGNAME) to bill
                        for the app.
  --no-version-autonumbering
                        Only attempt to create the version number supplied in
                        the manifest (that is, do not try to create an
                        autonumbered version such as 1.2.3+git.ab1b1c1d if
                        1.2.3 already exists and is published).
  --no-update           Never update an existing unpublished app in place.
  -y, --yes             Do not ask for confirmation for potentially dangerous
                        operations
  --region REGION       Enable the app in this region. This flag can be
                        specified multiple times to enable the app in multiple
                        regions. If --region is not specified, then the
                        enabled region(s) will be determined by
                        'regionalOptions' in dxapp.json, or the project
                        context.

options for creating applets or workflows:
  (Only valid when --app/--create-app is NOT specified)

  -d DESTINATION, --destination DESTINATION
                        Specifies the destination project, destination folder,
                        and/or name for the applet, in the form
                        [PROJECT_NAME_OR_ID:][/[FOLDER/][NAME]]. Overrides the
                        project, folder, and name fields of the dxapp.json or
                        dxworkflow.json, if they were supplied.
  -f, --overwrite       Remove existing applet(s) of the same name in the
                        destination folder. This option is not yet supported
                        for workflows.
  -a, --archive         Archive existing applet(s) of the same name in the
                        destination folder. This option is not yet supported
                        for workflows.

dx build: error: Options --remote, --app, and --run cannot all be specified together. Try removing --run and then separately invoking dx run.

$ dx cd project-FKqvkbQ0jz3QJ4q44Gp7FVPj:/

$ dx build /tmp/tmpz95mznvg/syntax_checks
/tmp/tmpz95mznvg/syntax_checks/code.py has a syntax error! Interpreter output:
  Sorry: IndentationError: Missing parentheses in call to 'print' (code.py, line 2)
Error: ('Entry point file /tmp/tmpz95mznvg/syntax_checks/code.py has syntax errors, see above for details. Rerun with --no-check-syntax to proceed anyway.',)

$ dx build --no-check-syntax /tmp/tmpz95mznvg/syntax_checks
{"id": "applet-FKqvkf00jz3Y5kk4Pg1xk45F"}

$ dx cd project-FKqvkg80QzXBffQ84KPxZ8By:/

$ dx mkdir /subfolder

$ dx cd /subfolder

$ dx build --json /tmp/tmpcsc66ql6/upload_app_resources
{"sponsored": false, "folder": "/subfolder", "developerNotes": "", "hidden": false, "summary": "", "state": "closed", "created": 1538772196000, "modified": 1538772196369, "runSpec": {"bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkj80QzXKjkqFPf8Kkfk3"}}], "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "executionPolicy": {}, "distribution": "Ubuntu", "release": "14.04", "interpreter": "python2.7", "systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkj80QzXKjkqFPf8Kkfk3"}}]}}, "title": "", "createdBy": {"user": "user-orodeh"}, "access": {"network": []}, "dxapi": "1.0.0", "id": "applet-FKqvkk00QzX9kQyPPfJjb8Xb", "tags": [], "outputSpec": [], "description": "", "types": [], "inputSpec": [], "name": "upload_resources", "ignoreReuse": false, "project": "project-FKqvkg80QzXBffQ84KPxZ8By", "class": "applet", "links": ["file-FKqvkj80QzXKjkqFPf8Kkfk3"]}

$ dx describe --json file-FKqvkj80QzXKjkqFPf8Kkfk3
{
    "folder": "/subfolder",
    "createdBy": {
        "user": "user-orodeh"
    },
    "types": [],
    "media": "application/gzip",
    "tags": [],
    "sponsored": false,
    "project": "project-FKqvkg80QzXBffQ84KPxZ8By",
    "name": "tmploewj4mo.tar.gz",
    "class": "file",
    "created": 1538772193000,
    "hidden": true,
    "state": "closed",
    "properties": {
        "resource_bundle_checksum": "19954a51dafac14882e638e887e24d2e86970eac"
    },
    "archivalState": "live",
    "links": [],
    "modified": 1538772194435,
    "details": {},
    "size": 170,
    "id": "file-FKqvkj80QzXKjkqFPf8Kkfk3"
}
ok
test_upload_resources_advanced (test_dxclient.TestDXBuildApp) ...
$ dx cd project-FKqvkp8014pF6V404KBXf4vJ:/

$ dx build -f --json --force-symlinks /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"created": 1538772206000, "state": "closed", "folder": "/", "hidden": false, "inputSpec": [], "sponsored": false, "name": "upload_resources_advanced", "dxapi": "1.0.0", "description": "", "id": "applet-FKqvkqQ014pG093BPbZkY9b8", "class": "applet", "types": [], "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "release": "14.04", "executionPolicy": {}, "distribution": "Ubuntu", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvkpj014p4V1JGPfgV6FvX"}, "name": "resources.tar.gz"}]}, "systemRequirements": {}, "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvkpj014p4V1JGPfgV6FvX"}, "name": "resources.tar.gz"}]}, "developerNotes": "", "links": ["file-FKqvkpj014p4V1JGPfgV6FvX"], "modified": 1538772206882, "createdBy": {"user": "user-orodeh"}, "summary": "", "project": "project-FKqvkp8014pF6V404KBXf4vJ", "tags": [], "ignoreReuse": false, "outputSpec": [], "title": "", "access": {"network": []}}

$ dx build -f --json --force-symlinks /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"project": "project-FKqvkp8014pF6V404KBXf4vJ", "modified": 1538772208459, "hidden": false, "created": 1538772208000, "access": {"network": []}, "outputSpec": [], "tags": [], "folder": "/", "description": "", "runSpec": {"interpreter": "python2.7", "distribution": "Ubuntu", "release": "14.04", "executionPolicy": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkpj014p4V1JGPfgV6FvX"}}]}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkpj014p4V1JGPfgV6FvX"}}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "systemRequirements": {}}, "createdBy": {"user": "user-orodeh"}, "id": "applet-FKqvkv0014pG093BPbZkY9bB", "name": "upload_resources_advanced", "summary": "", "links": ["file-FKqvkpj014p4V1JGPfgV6FvX"], "inputSpec": [], "ignoreReuse": false, "sponsored": false, "state": "closed", "dxapi": "1.0.0", "title": "", "developerNotes": "", "class": "applet", "types": []}

$ dx build -f --json --force-symlinks /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"id": "applet-FKqvkx8014pKjkqFPf8Kkfk5", "links": ["file-FKqvkv8014p1Vz2vPbKb72Z3"], "created": 1538772213000, "developerNotes": "", "ignoreReuse": false, "project": "project-FKqvkp8014pF6V404KBXf4vJ", "modified": 1538772213370, "inputSpec": [], "createdBy": {"user": "user-orodeh"}, "summary": "", "hidden": false, "access": {"network": []}, "types": [], "dxapi": "1.0.0", "outputSpec": [], "folder": "/", "title": "", "tags": [], "state": "closed", "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkv8014p1Vz2vPbKb72Z3"}}]}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkv8014p1Vz2vPbKb72Z3"}}], "systemRequirements": {}, "distribution": "Ubuntu", "release": "14.04", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "executionPolicy": {}}, "class": "applet", "name": "upload_resources_advanced", "sponsored": false, "description": ""}

$ dx build -f --json --force-symlinks --ensure-upload /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"title": "", "ignoreReuse": false, "summary": "", "id": "applet-FKqvkyQ014p79BgjPbyVKqP7", "sponsored": false, "outputSpec": [], "developerNotes": "", "created": 1538772218000, "tags": [], "description": "", "name": "upload_resources_advanced", "folder": "/", "class": "applet", "createdBy": {"user": "user-orodeh"}, "modified": 1538772218073, "project": "project-FKqvkp8014pF6V404KBXf4vJ", "state": "closed", "hidden": false, "types": [], "dxapi": "1.0.0", "runSpec": {"bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvkxQ014pG093BPbZkY9bG"}, "name": "resources.tar.gz"}], "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvkxQ014pG093BPbZkY9bG"}, "name": "resources.tar.gz"}]}, "systemRequirements": {}, "interpreter": "python2.7", "release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "executionPolicy": {}, "distribution": "Ubuntu"}, "inputSpec": [], "access": {"network": []}, "links": ["file-FKqvkxQ014pG093BPbZkY9bG"]}

$ dx describe --json file-FKqvkxQ014pG093BPbZkY9bG
{
    "folder": "/",
    "properties": {},
    "hidden": true,
    "sponsored": false,
    "details": {},
    "name": "tmp2dojfexp.tar.gz",
    "created": 1538772214000,
    "tags": [],
    "links": [],
    "types": [],
    "archivalState": "live",
    "project": "project-FKqvkp8014pF6V404KBXf4vJ",
    "size": 256,
    "id": "file-FKqvkxQ014pG093BPbZkY9bG",
    "createdBy": {
        "user": "user-orodeh"
    },
    "modified": 1538772216512,
    "class": "file",
    "media": "application/gzip",
    "state": "closed"
}

$ dx build -f --json  /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"title": "", "links": ["file-FKqvkz0014p4V1JGPfgV6FvZ"], "summary": "", "name": "upload_resources_advanced", "outputSpec": [], "inputSpec": [], "folder": "/", "developerNotes": "", "project": "project-FKqvkp8014pF6V404KBXf4vJ", "modified": 1538772223675, "id": "applet-FKqvkzj014pJ6fP0PbFbK3x6", "ignoreReuse": false, "sponsored": false, "description": "", "hidden": false, "dxapi": "1.0.0", "createdBy": {"user": "user-orodeh"}, "types": [], "state": "closed", "class": "applet", "tags": [], "created": 1538772223000, "runSpec": {"bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkz0014p4V1JGPfgV6FvZ"}}], "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "release": "14.04", "distribution": "Ubuntu", "interpreter": "python2.7", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "systemRequirements": {}, "executionPolicy": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvkz0014p4V1JGPfgV6FvZ"}}]}}, "access": {"network": []}}

$ dx build -f --json  /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"modified": 1538772228432, "hidden": false, "summary": "", "state": "closed", "id": "applet-FKqvp10014pJ6fP0PbFbK3x8", "types": [], "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvp08014pKjkqFPf8KkfkB"}, "name": "resources.tar.gz"}]}, "systemRequirements": {}, "interpreter": "python2.7", "distribution": "Ubuntu", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "executionPolicy": {}, "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvp08014pKjkqFPf8KkfkB"}, "name": "resources.tar.gz"}], "release": "14.04"}, "links": ["file-FKqvp08014pKjkqFPf8KkfkB"], "description": "", "outputSpec": [], "name": "upload_resources_advanced", "ignoreReuse": false, "developerNotes": "", "dxapi": "1.0.0", "class": "applet", "inputSpec": [], "created": 1538772228000, "createdBy": {"user": "user-orodeh"}, "sponsored": false, "folder": "/", "tags": [], "project": "project-FKqvkp8014pF6V404KBXf4vJ", "access": {"network": []}, "title": ""}

$ dx build -f --json  /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"sponsored": false, "name": "upload_resources_advanced", "outputSpec": [], "state": "closed", "ignoreReuse": false, "summary": "", "hidden": false, "createdBy": {"user": "user-orodeh"}, "title": "", "description": "", "id": "applet-FKqvp28014p9kQyPPfJjb8Xv", "links": ["file-FKqvp18014pJ6fP0PbFbK3xB"], "class": "applet", "modified": 1538772233137, "access": {"network": []}, "developerNotes": "", "runSpec": {"release": "14.04", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "executionPolicy": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvp18014pJ6fP0PbFbK3xB"}, "name": "resources.tar.gz"}]}, "distribution": "Ubuntu", "interpreter": "python2.7", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvp18014pJ6fP0PbFbK3xB"}, "name": "resources.tar.gz"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "systemRequirements": {}}, "folder": "/", "tags": [], "types": [], "created": 1538772233000, "inputSpec": [], "dxapi": "1.0.0", "project": "project-FKqvkp8014pF6V404KBXf4vJ"}
ok
test_upload_resources_permissions (test_dxclient.TestDXBuildApp) ... ok
test_upload_resources_symlink (test_dxclient.TestDXBuildApp) ...
$ dx build -f --json  /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"class": "applet", "types": [], "title": "", "hidden": false, "inputSpec": [], "summary": "", "ignoreReuse": false, "modified": 1538772234894, "dxapi": "1.0.0", "access": {"network": []}, "id": "applet-FKqvp2Q014p35kk4Pg1xk45P", "outputSpec": [], "developerNotes": "", "created": 1538772234000, "folder": "/", "links": ["file-FKqvp18014pJ6fP0PbFbK3xB"], "runSpec": {"release": "14.04", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvp18014pJ6fP0PbFbK3xB"}}]}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "executionPolicy": {}, "interpreter": "python2.7", "distribution": "Ubuntu", "systemRequirements": {}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvp18014pJ6fP0PbFbK3xB"}}]}, "name": "upload_resources_advanced", "description": "", "createdBy": {"user": "user-orodeh"}, "sponsored": false, "state": "closed", "tags": [], "project": "project-FKqvkp8014pF6V404KBXf4vJ"}

$ dx build -f --json --ensure-upload /tmp/tmpk36tq9fv/upload_Ã¥pp_resources_advanced
{"links": ["file-FKqvp30014p4V1JGPfgV6Fvk"], "tags": [], "dxapi": "1.0.0", "description": "", "summary": "", "id": "applet-FKqvp3j014pKjkqFPf8KkfkP", "types": [], "class": "applet", "modified": 1538772239574, "state": "closed", "sponsored": false, "developerNotes": "", "name": "upload_resources_advanced", "title": "", "hidden": false, "access": {"network": []}, "folder": "/", "runSpec": {"distribution": "Ubuntu", "executionPolicy": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvp30014p4V1JGPfgV6Fvk"}, "name": "resources.tar.gz"}], "systemRequirements": {}, "release": "14.04", "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvp30014p4V1JGPfgV6Fvk"}, "name": "resources.tar.gz"}]}}, "outputSpec": [], "ignoreReuse": false, "project": "project-FKqvkp8014pF6V404KBXf4vJ", "created": 1538772239000, "inputSpec": [], "createdBy": {"user": "user-orodeh"}}

$ dx cd project-FKqvp500BpBpffQ84KPxZ8Bz:/

$ dx build -f --json  /tmp/tmp8b4kspbb/upload_resources_permissions/app
{"created": 1538772250000, "access": {"network": []}, "createdBy": {"user": "user-orodeh"}, "links": ["file-FKqvp5Q0BpBq9ykx1XqKGJ57"], "types": [], "folder": "/", "developerNotes": "", "dxapi": "1.0.0", "description": "", "inputSpec": [], "hidden": false, "project": "project-FKqvp500BpBpffQ84KPxZ8Bz", "title": "", "class": "applet", "outputSpec": [], "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {}}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "systemRequirements": {}, "executionPolicy": {}, "distribution": "Ubuntu", "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvp5Q0BpBq9ykx1XqKGJ57"}, "name": "resources.tar.gz"}]}, "release": "14.04", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvp5Q0BpBq9ykx1XqKGJ57"}, "name": "resources.tar.gz"}]}, "state": "closed", "ignoreReuse": false, "sponsored": false, "id": "applet-FKqvp6Q0BpByG7FP1Vb1bXy1", "summary": "", "tags": [], "modified": 1538772250240, "name": "upload_resources_permissions"}

$ dx build -f --json  /tmp/tmp8b4kspbb/upload_resources_permissions/app
{"createdBy": {"user": "user-orodeh"}, "modified": 1538772252873, "folder": "/", "summary": "", "created": 1538772252000, "id": "applet-FKqvp700BpBx3k5Y1VygK9k6", "hidden": false, "sponsored": false, "dxapi": "1.0.0", "project": "project-FKqvp500BpBpffQ84KPxZ8Bz", "inputSpec": [], "description": "", "class": "applet", "name": "upload_resources_permissions", "runSpec": {"bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvp5Q0BpBq9ykx1XqKGJ57"}, "name": "resources.tar.gz"}], "interpreter": "python2.7", "systemRequirements": {}, "executionPolicy": {}, "release": "14.04", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvp5Q0BpBq9ykx1XqKGJ57"}, "name": "resources.tar.gz"}]}, "distribution": "Ubuntu"}, "access": {"network": []}, "developerNotes": "", "types": [], "links": ["file-FKqvp5Q0BpBq9ykx1XqKGJ57"], "outputSpec": [], "ignoreReuse": false, "title": "", "state": "closed", "tags": []}

$ dx build -f --json  /tmp/tmp8b4kspbb/upload_resources_permissions/app
{"name": "upload_resources_permissions", "modified": 1538772254727, "sponsored": false, "dxapi": "1.0.0", "access": {"network": []}, "types": [], "inputSpec": [], "outputSpec": [], "ignoreReuse": false, "class": "applet", "hidden": false, "description": "", "runSpec": {"bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvp5Q0BpBq9ykx1XqKGJ57"}}]}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvp5Q0BpBq9ykx1XqKGJ57"}}], "distribution": "Ubuntu", "release": "14.04", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "executionPolicy": {}, "systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7"}, "links": ["file-FKqvp5Q0BpBq9ykx1XqKGJ57"], "developerNotes": "", "id": "applet-FKqvp7Q0BpBqF33K1Y3xP37x", "tags": [], "created": 1538772254000, "folder": "/", "summary": "", "project": "project-FKqvp500BpBpffQ84KPxZ8Bz", "createdBy": {"user": "user-orodeh"}, "title": "", "state": "closed"}

$ dx build -f --json  /tmp/tmp8b4kspbb/upload_resources_permissions/app
{"project": "project-FKqvp500BpBpffQ84KPxZ8Bz", "state": "closed", "tags": [], "summary": "", "name": "upload_resources_permissions", "description": "", "modified": 1538772259791, "hidden": false, "title": "", "folder": "/", "outputSpec": [], "dxapi": "1.0.0", "created": 1538772259000, "ignoreReuse": false, "class": "applet", "inputSpec": [], "links": ["file-FKqvp800BpBx3k5Y1VygK9k8"], "id": "applet-FKqvp8j0BpBjv4f81Y9jpZg0", "sponsored": false, "developerNotes": "", "createdBy": {"user": "user-orodeh"}, "access": {"network": []}, "runSpec": {"execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "release": "14.04", "interpreter": "python2.7", "executionPolicy": {}, "systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvp800BpBx3k5Y1VygK9k8"}, "name": "resources.tar.gz"}]}, "distribution": "Ubuntu", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvp800BpBx3k5Y1VygK9k8"}, "name": "resources.tar.gz"}]}, "types": []}

$ dx cd project-FKqvpB00zyB76bQj4GxFByZb:/

$ dx build -f --json  /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"inputSpec": [], "id": "applet-FKqvpF80zyBJ3k5Y1VygK9kG", "state": "closed", "created": 1538772269000, "types": [], "class": "applet", "folder": "/", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "tags": [], "outputSpec": [], "developerNotes": "", "summary": "", "sponsored": false, "createdBy": {"user": "user-orodeh"}, "access": {"network": []}, "links": ["file-FKqvpBQ0zyBJ3k5Y1VygK9kB"], "hidden": false, "name": "upload_resources_symlink", "modified": 1538772269676, "runSpec": {"interpreter": "python2.7", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvpBQ0zyBJ3k5Y1VygK9kB"}, "name": "resources.tar.gz"}], "release": "14.04", "distribution": "Ubuntu", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvpBQ0zyBJ3k5Y1VygK9kB"}, "name": "resources.tar.gz"}]}, "systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "executionPolicy": {}}, "description": "", "title": "", "dxapi": "1.0.0", "ignoreReuse": false}

$ dx build -f --json  app
{"dxapi": "1.0.0", "folder": "/", "state": "closed", "access": {"network": []}, "developerNotes": "", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "createdBy": {"user": "user-orodeh"}, "ignoreReuse": false, "links": ["file-FKqvpBQ0zyBJ3k5Y1VygK9kB"], "sponsored": false, "title": "", "outputSpec": [], "class": "applet", "inputSpec": [], "created": 1538772272000, "summary": "", "tags": [], "runSpec": {"interpreter": "python2.7", "release": "14.04", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "distribution": "Ubuntu", "executionPolicy": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpBQ0zyBJ3k5Y1VygK9kB"}}]}, "systemRequirements": {}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpBQ0zyBJ3k5Y1VygK9kB"}}]}, "name": "upload_resources_symlink", "hidden": false, "id": "applet-FKqvpG00zyBKG7FP1Vb1bXy3", "types": [], "modified": 1538772272396, "description": ""}

$ dx build -f --json  /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"modified": 1538772277586, "created": 1538772277000, "runSpec": {"executionPolicy": {}, "interpreter": "python2.7", "distribution": "Ubuntu", "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpGQ0zyBF9ykx1XqKGJ5G"}}], "systemRequirements": {}, "release": "14.04", "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpGQ0zyBF9ykx1XqKGJ5G"}}]}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}}, "access": {"network": []}, "folder": "/", "hidden": false, "developerNotes": "", "inputSpec": [], "description": "", "name": "upload_resources_symlink", "dxapi": "1.0.0", "summary": "", "links": ["file-FKqvpGQ0zyBF9ykx1XqKGJ5G"], "types": [], "sponsored": false, "title": "", "class": "applet", "id": "applet-FKqvpJ80zyB8JkY81VjxgB7v", "tags": [], "outputSpec": [], "ignoreReuse": false, "project": "project-FKqvpB00zyB76bQj4GxFByZb", "createdBy": {"user": "user-orodeh"}, "state": "closed"}

$ dx build -f --json  /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"modified": 1538772282963, "ignoreReuse": false, "links": ["file-FKqvpJj0zyBFF33K1Y3xP37z"], "summary": "", "sponsored": false, "description": "", "name": "upload_resources_symlink", "types": [], "hidden": false, "project": "project-FKqvpB00zyB76bQj4GxFByZb", "title": "", "runSpec": {"bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpJj0zyBFF33K1Y3xP37z"}}]}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "distribution": "Ubuntu", "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpJj0zyBFF33K1Y3xP37z"}}], "interpreter": "python2.7", "release": "14.04", "systemRequirements": {}, "executionPolicy": {}}, "outputSpec": [], "class": "applet", "created": 1538772282000, "dxapi": "1.0.0", "state": "closed", "inputSpec": [], "developerNotes": "", "createdBy": {"user": "user-orodeh"}, "id": "applet-FKqvpKQ0zyBF9ykx1XqKGJ5K", "access": {"network": []}, "folder": "/", "tags": []}

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"state": "closed", "developerNotes": "", "id": "applet-FKqvpQ00zyBJ3k5Y1VygK9kK", "outputSpec": [], "modified": 1538772288241, "folder": "/", "sponsored": false, "class": "applet", "created": 1538772288000, "title": "", "runSpec": {"executionPolicy": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "distribution": "Ubuntu", "release": "14.04", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "interpreter": "python2.7", "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpP00zyBKG7FP1Vb1bXy5"}}], "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpP00zyBKG7FP1Vb1bXy5"}}]}, "systemRequirements": {}}, "inputSpec": [], "hidden": false, "summary": "", "access": {"network": []}, "name": "upload_resources_symlink", "description": "", "links": ["file-FKqvpP00zyBKG7FP1Vb1bXy5"], "project": "project-FKqvpB00zyB76bQj4GxFByZb", "dxapi": "1.0.0", "createdBy": {"user": "user-orodeh"}, "ignoreReuse": false, "types": [], "tags": []}

$ dx build -f /tmp/tmpiwkcb19v/upload_resources_symlink/app
WARNING:dxpy:app name "upload_resources_symlink" does not match containing directory "app"
Error: ("Broken symlink: Link '/tmp/tmpiwkcb19v/upload_resources_symlink/app/resources/symbolic_link' points to '/tmp/tmpiwkcb19v/upload_resources_symlink/test_file_outside.txt', which does not exist",)

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"tags": [], "outputSpec": [], "access": {"network": []}, "sponsored": false, "links": ["file-FKqvpP00zyBKG7FP1Vb1bXy5"], "title": "", "description": "", "createdBy": {"user": "user-orodeh"}, "developerNotes": "", "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {}}, "distribution": "Ubuntu", "interpreter": "python2.7", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "executionPolicy": {}, "systemRequirements": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvpP00zyBKG7FP1Vb1bXy5"}, "name": "resources.tar.gz"}]}, "release": "14.04", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvpP00zyBKG7FP1Vb1bXy5"}, "name": "resources.tar.gz"}]}, "id": "applet-FKqvpQj0zyBFF33K1Y3xP384", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "summary": "", "folder": "/", "name": "upload_resources_symlink", "class": "applet", "types": [], "dxapi": "1.0.0", "inputSpec": [], "hidden": false, "modified": 1538772291330, "ignoreReuse": false, "created": 1538772291000, "state": "closed"}

$ dx build -f /tmp/tmpiwkcb19v/upload_resources_symlink/app
WARNING:dxpy:app name "upload_resources_symlink" does not match containing directory "app"
Error: ("Cannot include symlinks to directories outside of the resource directory.  '/tmp/tmpiwkcb19v/upload_resources_symlink/app/resources/symbolic_link' points to directory '/tmp/tmpiwkcb19v/upload_resources_symlink/app/test_outside_dir'",)

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"hidden": false, "folder": "/", "state": "closed", "outputSpec": [], "runSpec": {"systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7", "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpVQ0zyBKG7FP1Vb1bXy7"}}], "distribution": "Ubuntu", "release": "14.04", "systemRequirements": {}, "executionPolicy": {}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpVQ0zyBKG7FP1Vb1bXy7"}}]}}, "links": ["file-FKqvpVQ0zyBKG7FP1Vb1bXy7"], "tags": [], "modified": 1538772297353, "description": "", "createdBy": {"user": "user-orodeh"}, "access": {"network": []}, "inputSpec": [], "created": 1538772297000, "name": "upload_resources_symlink", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "class": "applet", "dxapi": "1.0.0", "ignoreReuse": false, "sponsored": false, "title": "", "summary": "", "types": [], "developerNotes": "", "id": "applet-FKqvpX80zyB8v4f81Y9jpZg2"}

$ dx build -f --json  /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"access": {"network": []}, "sponsored": false, "created": 1538772302000, "id": "applet-FKqvpYQ0zyBKG7FP1Vb1bXy9", "ignoreReuse": false, "state": "closed", "developerNotes": "", "class": "applet", "summary": "", "inputSpec": [], "name": "upload_resources_symlink", "runSpec": {"execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "interpreter": "python2.7", "executionPolicy": {}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpXj0zyB11fbZ1X5xp1Fb"}}], "release": "14.04", "distribution": "Ubuntu", "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpXj0zyB11fbZ1X5xp1Fb"}}]}, "systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}}, "links": ["file-FKqvpXj0zyB11fbZ1X5xp1Fb"], "createdBy": {"user": "user-orodeh"}, "hidden": false, "types": [], "description": "", "folder": "/", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "outputSpec": [], "dxapi": "1.0.0", "modified": 1538772302599, "title": "", "tags": []}

$ dx build -f --json  /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"hidden": false, "runSpec": {"bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvpZ00zyB11fbZ1X5xp1Fg"}, "name": "resources.tar.gz"}]}, "systemRequirements": {}, "executionPolicy": {}, "release": "14.04", "interpreter": "python2.7", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvpZ00zyB11fbZ1X5xp1Fg"}, "name": "resources.tar.gz"}], "distribution": "Ubuntu"}, "types": [], "modified": 1538772307818, "sponsored": false, "links": ["file-FKqvpZ00zyB11fbZ1X5xp1Fg"], "id": "applet-FKqvpZj0zyB11fbZ1X5xp1Fk", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "created": 1538772307000, "state": "closed", "tags": [], "description": "", "access": {"network": []}, "class": "applet", "dxapi": "1.0.0", "ignoreReuse": false, "createdBy": {"user": "user-orodeh"}, "name": "upload_resources_symlink", "summary": "", "title": "", "developerNotes": "", "folder": "/", "outputSpec": [], "inputSpec": []}

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"hidden": false, "links": ["file-FKqvpb80zyB8v4f81Y9jpZg4"], "createdBy": {"user": "user-orodeh"}, "runSpec": {"systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "release": "14.04", "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvpb80zyB8v4f81Y9jpZg4"}, "name": "resources.tar.gz"}]}, "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvpb80zyB8v4f81Y9jpZg4"}, "name": "resources.tar.gz"}], "distribution": "Ubuntu", "executionPolicy": {}, "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}]}, "class": "applet", "dxapi": "1.0.0", "id": "applet-FKqvpf80zyB8JkY81VjxgB7y", "sponsored": false, "project": "project-FKqvpB00zyB76bQj4GxFByZb", "developerNotes": "", "ignoreReuse": false, "name": "upload_resources_symlink", "types": [], "access": {"network": []}, "modified": 1538772313137, "inputSpec": [], "state": "closed", "outputSpec": [], "title": "", "tags": [], "description": "", "created": 1538772313000, "summary": "", "folder": "/"}

$ dx build -f --json  /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"types": [], "tags": [], "class": "applet", "id": "applet-FKqvpgQ0zyB8JkY81VjxgB80", "folder": "/", "hidden": false, "description": "", "createdBy": {"user": "user-orodeh"}, "dxapi": "1.0.0", "outputSpec": [], "project": "project-FKqvpB00zyB76bQj4GxFByZb", "name": "upload_resources_symlink", "state": "closed", "modified": 1538772318484, "inputSpec": [], "runSpec": {"executionPolicy": {}, "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpfj0zyBF9ykx1XqKGJ5f"}}]}, "systemRequirements": {}, "release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpfj0zyBF9ykx1XqKGJ5f"}}], "interpreter": "python2.7", "distribution": "Ubuntu", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}]}, "links": ["file-FKqvpfj0zyBF9ykx1XqKGJ5f"], "created": 1538772318000, "ignoreReuse": false, "title": "", "summary": "", "access": {"network": []}, "sponsored": false, "developerNotes": ""}

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"tags": [], "links": ["file-FKqvpj00zyBF9ykx1XqKGJ5j"], "sponsored": false, "dxapi": "1.0.0", "id": "applet-FKqvpjj0zyBKG7FP1Vb1bXyF", "folder": "/", "created": 1538772323000, "summary": "", "name": "upload_resources_symlink", "outputSpec": [], "createdBy": {"user": "user-orodeh"}, "inputSpec": [], "access": {"network": []}, "developerNotes": "", "title": "", "description": "", "class": "applet", "types": [], "hidden": false, "modified": 1538772323679, "runSpec": {"executionPolicy": {}, "systemRequirements": {}, "distribution": "Ubuntu", "release": "14.04", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7", "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpj00zyBF9ykx1XqKGJ5j"}}], "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpj00zyBF9ykx1XqKGJ5j"}}]}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}]}, "state": "closed", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "ignoreReuse": false}

$ dx build -f /tmp/tmpiwkcb19v/upload_resources_symlink/app
WARNING:dxpy:app name "upload_resources_symlink" does not match containing directory "app"
Error: ("Cannot include symlinks to directories outside of the resource directory.  '/tmp/tmpiwkcb19v/upload_resources_symlink/app/resources/symbolic_link' points to directory '/tmp/tmpiwkcb19v/upload_resources_symlink/app/resources/local_dir'",)

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"types": [], "name": "upload_resources_symlink", "id": "applet-FKqvpp80zyBF9ykx1XqKGJ5p", "inputSpec": [], "hidden": false, "state": "closed", "access": {"network": []}, "class": "applet", "tags": [], "dxapi": "1.0.0", "sponsored": false, "outputSpec": [], "description": "", "folder": "/", "summary": "", "links": ["file-FKqvpkQ0zyBKG7FP1Vb1bXyJ"], "createdBy": {"user": "user-orodeh"}, "modified": 1538772329835, "runSpec": {"executionPolicy": {}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpkQ0zyBKG7FP1Vb1bXyJ"}}], "systemRequirements": {}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "release": "14.04", "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpkQ0zyBKG7FP1Vb1bXyJ"}}]}, "interpreter": "python2.7", "distribution": "Ubuntu"}, "developerNotes": "", "title": "", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "ignoreReuse": false, "created": 1538772329000}

$ dx build -f --json  /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"sponsored": false, "state": "closed", "folder": "/", "project": "project-FKqvpB00zyB76bQj4GxFByZb", "runSpec": {"distribution": "Ubuntu", "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "executionPolicy": {}, "release": "14.04", "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqvpq00zyBFF33K1Y3xP388"}, "name": "resources.tar.gz"}]}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqvpq00zyBFF33K1Y3xP388"}, "name": "resources.tar.gz"}], "systemRequirements": {}}, "modified": 1538772335744, "inputSpec": [], "types": [], "class": "applet", "created": 1538772335000, "ignoreReuse": false, "developerNotes": "", "tags": [], "summary": "", "name": "upload_resources_symlink", "access": {"network": []}, "hidden": false, "createdBy": {"user": "user-orodeh"}, "description": "", "links": ["file-FKqvpq00zyBFF33K1Y3xP388"], "dxapi": "1.0.0", "id": "applet-FKqvpqj0zyB8JkY81VjxgB82", "outputSpec": [], "title": ""}

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"name": "upload_resources_symlink", "ignoreReuse": false, "created": 1538772340000, "folder": "/", "modified": 1538772340899, "title": "", "hidden": false, "tags": [], "project": "project-FKqvpB00zyB76bQj4GxFByZb", "description": "", "links": ["file-FKqvpv80zyBF9ykx1XqKGJ5v"], "inputSpec": [], "runSpec": {"bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpv80zyBF9ykx1XqKGJ5v"}}]}, "interpreter": "python2.7", "systemRequirements": {}, "executionPolicy": {}, "release": "14.04", "distribution": "Ubuntu", "systemRequirementsByRegion": {"aws:us-east-1": {}}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpv80zyBF9ykx1XqKGJ5v"}}]}, "outputSpec": [], "sponsored": false, "createdBy": {"user": "user-orodeh"}, "summary": "", "dxapi": "1.0.0", "class": "applet", "developerNotes": "", "id": "applet-FKqvpx00zyBF9ykx1XqKGJ5y", "access": {"network": []}, "types": [], "state": "closed"}

$ dx build -f /tmp/tmpiwkcb19v/upload_resources_symlink/app
WARNING:dxpy:app name "upload_resources_symlink" does not match containing directory "app"
Error: ("Cannot include symlinks to directories outside of the resource directory.  '/tmp/tmpiwkcb19v/upload_resources_symlink/app/resources/symbolic_link' points to directory '/tmp/tmpiwkcb19v/upload_resources_symlink/app/resources/local_dir'",)

$ dx build -f --json --force-symlinks /tmp/tmpiwkcb19v/upload_resources_symlink/app
{"summary": "", "id": "applet-FKqvpyQ0zyB8JkY81VjxgB84", "modified": 1538772347025, "developerNotes": "", "tags": [], "state": "closed", "links": ["file-FKqvpxj0zyB8v4f81Y9jpZg6"], "types": [], "project": "project-FKqvpB00zyB76bQj4GxFByZb", "createdBy": {"user": "user-orodeh"}, "hidden": false, "sponsored": false, "name": "upload_resources_symlink", "title": "", "inputSpec": [], "description": "", "dxapi": "1.0.0", "runSpec": {"systemRequirements": {}, "bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpxj0zyB8v4f81Y9jpZg6"}}], "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqvpxj0zyB8v4f81Y9jpZg6"}}]}, "distribution": "Ubuntu", "executionPolicy": {}, "release": "14.04", "execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "systemRequirementsByRegion": {"aws:us-east-1": {}}, "interpreter": "python2.7"}, "created": 1538772346000, "access": {"network": []}, "ignoreReuse": false, "folder": "/", "class": "applet", "outputSpec": []}
/usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 41676), raddr=('54.152.220.227', 443)>
  self._sock = None
ok
test_version_suffixes (test_dxclient.TestDXBuildApp) ... ok
test_image_only (test_dxclient.TestDXBuildReportHtml) ... ERROR
test_local_file (test_dxclient.TestDXBuildReportHtml) ... ERROR
test_remote_file (test_dxclient.TestDXBuildReportHtml) ... ERROR
test_build_single_region_workflow (test_dxclient.TestDXBuildWorkflow) ... skipped 'skipping test that would create global workflows'
test_build_workflow_invalid_project_context (test_dxclient.TestDXBuildWorkflow) ... skipped 'skipping test that would create global workflows'
test_build_workflow_warnings (test_dxclient.TestDXBuildWorkflow) ... skipped 'skipping test that would create global workflows'
test_build_workflow_with_bill_to (test_dxclient.TestDXBuildWorkflow) ... skipped 'skipping test that would create global workflows'
test_dx_add_list_remove_developers_of_global_workflows (test_dxclient.TestDXBuildWorkflow) ... skipped 'skipping test that would create global workflows'
test_dx_add_list_remove_users_of_global_workflows (test_dxclient.TestDXBuildWorkflow) ... skipped 'skipping test that would create global workflows'
test_dx_publish_global_workflow (test_dxclient.TestDXBuildWorkflow) ... skipped 'skipping test that would create global workflows'
test_dx (test_dxclient.TestDXClient) ... ok
test_dx_add_rm_types (test_dxclient.TestDXClient) ... ok
test_dx_api (test_dxclient.TestDXClient) ... ok
test_dx_api_error_msg (test_dxclient.TestDXClient) ... ok
test_dx_cp (test_dxclient.TestDXClient) ... ok
test_dx_describe_project (test_dxclient.TestDXClient) ... /usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 36980), raddr=('54.175.190.114', 443)>
  self._sock = None
ok
test_dx_env (test_dxclient.TestDXClient) ...
$ dx cd project-FKqvq000y73F9ykx1XqKGJ60:/

$ dx-build-report-html /tmp/tmpv6k230ab/img.gif --local /tmp/tmpv6k230ab/gif.html
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/bin/dx-build-report-html", line 11, in <module>
    sys.exit(main())
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 220, in main
    html = bake(source)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 148, in bake
    html = _load_file(src).read()
  File "/usr/lib/python3.5/codecs.py", line 321, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 10: invalid start byte

$ dx-build-report-html /tmp/tmp9qpwjb4k/index.html --local /tmp/tmp9qpwjb4k/out.html
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/bin/dx-build-report-html", line 11, in <module>
    sys.exit(main())
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 220, in main
    html = bake(source)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 149, in bake
    if imghdr.what("", html):
  File "/usr/lib/python3.5/imghdr.py", line 21, in what
    res = tf(h, f)
  File "/usr/lib/python3.5/imghdr.py", line 43, in test_png
    if h.startswith(b'\211PNG\r\n\032\n'):
TypeError: startswith first arg must be str or a tuple of str, not bytes

$ dx-build-report-html /tmp/tmpmpsii13p/index.html --remote /html_report -w 47 -g 63
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/bin/dx-build-report-html", line 11, in <module>
    sys.exit(main())
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 220, in main
    html = bake(source)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 149, in bake
    if imghdr.what("", html):
  File "/usr/lib/python3.5/imghdr.py", line 21, in what
    res = tf(h, f)
  File "/usr/lib/python3.5/imghdr.py", line 43, in test_png
    if h.startswith(b'\211PNG\r\n\032\n'):
TypeError: startswith first arg must be str or a tuple of str, not bytes

$ dx cd project-FKqvq480gFGyG7FP1Vb1bXyP:/

$ dx

$ dx help
usage: dx help [-h] [command_or_category] [subcommand]

Displays the help message for the given command (and subcommand if given), or
displays the list of all commands in the given category.

CATEGORIES

  all		All commands
  session	Manage your login session
  fs		Navigate and organize your projects and files
  data		View, download, and upload data
  metadata	View and modify metadata for projects, data, and executions
  workflow	View and modify workflows
  exec		Manage and run apps, applets, and workflows
  org		Administer and operate on orgs
  other		Miscellaneous advanced utilities

EXAMPLE

  To find all commands related to running and monitoring a job and then display
  the help message for the command "run", run

  $ dx help exec
    <list of all execution-related dx commands>
  $ dx help run
    <help message for dx run>

positional arguments:
  command_or_category  Display the help message for the given command, or the
                       list of all available commands for the given category
  subcommand           Display the help message for the given subcommand of
                       the command

optional arguments:
  -h, --help           show this help message and exit

$ dx cd project-FKqvq5Q0B0q8JkY81VjxgB86:/

$ dx new record Î¨
ID                  record-FKqvq5j0B0q11fbZ1X5xp1G4
Class               record
Project             project-FKqvq5Q0B0q8JkY81VjxgB86
Folder              /
Name                Î¨
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 13:46:15 2018
Created by          orodeh
Last modified       Fri Oct  5 13:46:15 2018
Size                2

$ dx add_types Î¨ abc xyz

$ dx add_types Î¨ Î¨Î¨
dxpy.exceptions.InvalidInput: Expected key "types" of input to be an array of
valid strings for a type name (characters must be in 0-9, A-Z, a-z, /, and _),
code 422. Request Time=1538772377.4326606, Request ID=1538772377455-290250

$ dx remove_types Î¨ abc xyz

$ dx remove_types Î¨ abc xyz

$ dx remove_types Î¨Î¨ Î¨
dxpy.utils.resolver.ResolutionError: Unable to resolve "Î¨Î¨" to a data object or folder name in '/'

$ dx cd project-FKqvq8001GX8q92B1XYG3f2X:/

$ dx api project-FKqvq8001GX8q92B1XYG3f2X describe --input /tmp/tmpu154fsct
{
    "totalSponsoredEgressBytes": 0,
    "id": "project-FKqvq8001GX8q92B1XYG3f2X",
    "dataUsage": 0,
    "summary": "",
    "storageCost": 0,
    "billTo": "user-orodeh",
    "tags": [],
    "name": "dxclient_test_pr\u00f6ject",
    "archivalProgress": null,
    "pendingTransfer": null,
    "description": "",
    "version": 0,
    "modified": 1538772384000,
    "archivalState": "live",
    "region": "aws:us-east-1",
    "createdBy": {
        "user": "user-orodeh"
    },
    "protected": false,
    "restricted": false,
    "level": "ADMINISTER",
    "consumedSponsoredEgressBytes": 0,
    "sponsoredDataUsage": 0,
    "defaultInstanceType": "mem2_hdd2_x2",
    "atSpendingLimit": false,
    "containsPHI": false,
    "created": 1538772384000,
    "downloadRestricted": false,
    "class": "project"
}

$ dx cd project-FKqvq9801PGjq92B1XYG3f2Y:/

$ dx api file-InvalidFileID describe
dxpy.exceptions.ResourceNotFound: "file-InvalidFileID" is not a recognized ID, code 404. Request Time=1538772390.6416588, Request ID=1538772390885-769604

$ dx cd project-FKqvqBj0Gfv8v4f81Y9jpZg9:/

$ dx new project test_dx_cp_410324_1538772396541 --brief
project-FKqvqF80Gy28JkY81VjxgB87

$ dx new record --brief --details '{"hello": 1}'
record-FKqvqF80Gfv8JkY81VjxgB88

$ dx close --wait record-FKqvqF80Gfv8JkY81VjxgB88

$ dx ls --brief project-FKqvqF80Gy28JkY81VjxgB87

$ dx cp record-FKqvqF80Gfv8JkY81VjxgB88 project-FKqvqF80Gy28JkY81VjxgB87

$ dx ls --brief project-FKqvqF80Gy28JkY81VjxgB87
record-FKqvqF80Gfv8JkY81VjxgB88

$ dx rmproject -y project-FKqvqF80Gy28JkY81VjxgB87
Successfully deleted project "test_dx_cp_410324_1538772396541"

$ dx cd project-FKqvqKj0zXKV1fbZ1X5xp1G6:/

$ dx describe :
Result 1:
ID                  project-FKqvqKj0zXKV1fbZ1X5xp1G6
Class               project
Name                dxclient_test_prÃ¶ject
Summary
Billed to           orodeh
Access level        ADMINISTER
Region              aws:us-east-1
Protected           false
Restricted          false
Contains PHI        false
Created             Fri Oct  5 13:46:51 2018
Created by          orodeh
Last modified       Fri Oct  5 13:46:51 2018
Data usage          0.00 GB
Sponsored data      0.00 GB
Storage cost        $0.000/month
Sponsored egress    0.00 GB used of 0.00 GB total
At spending limit?  false
Tags                -
Properties          -
downloadRestricted  false
defaultInstanceType "mem2_hdd2_x2"

$ dx describe --verbose :
Result 1:
ID                  project-FKqvqKj0zXKV1fbZ1X5xp1G6
Class               project
Name                dxclient_test_prÃ¶ject
Summary
Description
Version             0
Billed to           orodeh
Pending transfer to null
Access level        ADMINISTER
Region              aws:us-east-1
Protected           false
Restricted          false
Contains PHI        false
Archival state      live
Archival progress   null
Created             Fri Oct  5 13:46:51 2018
Created by          orodeh
Last modified       Fri Oct  5 13:46:51 2018
Data usage          0.00 GB
Sponsored data      0.00 GB
Storage cost        $0.000/month
Sponsored egress    0.00 GB used of 0.00 GB total
At spending limit?  false
Permissions         orodeh:ADMINISTER
Tags                -
Properties          -
App caches          {}
downloadRestricted  false
defaultInstanceType "mem2_hdd2_x2"

$ dx cd project-FKqvqQj032XF9ykx1XqKGJ62:/

$ dx env
Auth token used		kfaEjTGdMzdhQO9droWwfE2WQbwSq1zC
API server protocol	https
API server host		stagingapi.dnanexus.com
API server port		443
Current workspace	project-FKqvqQj032XF9ykx1XqKGJ62
Current workspace name	"SpeedTests"
Current folder		/
Current user		orodeh
ok
test_dx_get_record (test_dxclient.TestDXClient) ... ok
test_dx_http_request_handles_auth_errors (test_dxclient.TestDXClient) ... skipped 'skipping tests that require a running authserver'
test_dx_invite (test_dxclient.TestDXClient) ... skipped 'skipping tests that need rate limits to be disabled'
test_dx_login (test_dxclient.TestDXClient) ... skipped 'This test requires authserver to run, requires dx login to select the right authserver, and may result in temporary account lockout. TODO: update test instrumentation to allow it to run'
test_dx_mkdir (test_dxclient.TestDXClient) ... ok
test_dx_notebook (test_dxclient.TestDXClient) ... skipped 'Skipping test that would run jobs'
test_dx_object_properties (test_dxclient.TestDXClient) ... ok
test_dx_object_tagging (test_dxclient.TestDXClient) ... ok
test_dx_project_invite_without_email (test_dxclient.TestDXClient) ... skipped 'skipping test that requires presence of test user'
test_dx_project_properties (test_dxclient.TestDXClient) ... ok
test_dx_project_tagging (test_dxclient.TestDXClient) ... ok
test_dx_remove_project_by_name (test_dxclient.TestDXClient) ... ok
test_dx_run_debug_on (test_dxclient.TestDXClient) ... skipped 'Skipping test that would run jobs'
test_dx_run_debug_on_all (test_dxclient.TestDXClient) ... skipped 'Skipping test that would run jobs'
test_dx_set_details (test_dxclient.TestDXClient) ... ok
test_dx_set_details_with_file (test_dxclient.TestDXClient) ... ok
test_dx_setenv (test_dxclient.TestDXClient) ...
$ dx env --bash
export DX_SECURITY_CONTEXT='{"auth_token": "kfaEjTGdMzdhQO9droWwfE2WQbwSq1zC", "auth_token_type": "bearer"}'
export DX_APISERVER_PROTOCOL=https
export DX_APISERVER_HOST=stagingapi.dnanexus.com
export DX_APISERVER_PORT=443
export DX_PROJECT_CONTEXT_ID=project-FKqvqQj032XF9ykx1XqKGJ62

$ dx env --dx-flags
 --auth-token kfaEjTGdMzdhQO9droWwfE2WQbwSq1zC --apiserver-protocol https --apiserver-host stagingapi.dnanexus.com --apiserver-port 443 --project-context-id project-FKqvqQj032XF9ykx1XqKGJ62

$ dx cd project-FKqvqX80PfGx3k5Y1VygK9kk:/

$ dx new record -o :foo --verbose
ID                  record-FKqvqXQ0PfGjJkY81VjxgB8B
Class               record
Project             project-FKqvqX80PfGx3k5Y1VygK9kk
Folder              /
Name                foo
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Details             {}
Outgoing links      -
Created             Fri Oct  5 13:47:06 2018
Created by          orodeh
Last modified       Fri Oct  5 13:47:06 2018
Size                2

$ dx get :foo

$ dx get --no-ext :foo

$ diff -q foo foo.json

$ dx cd project-FKqvqZ80pV2jq92B1XYG3f2Z:/

$ dx mkdir mkdirtest/b/c

$ dx mkdir -p mkdirtest/b/c

$ dx mkdir -p mkdirtest/b/c

$ dx rm -r mkdirtest

$ dx cd project-FKqvqfQ08j4yG7FP1Vb1bXyX:/

$ dx new record Î¨ --brief
record-FKqvqg008j4q6V404KBXf4vK

$ dx set_properties Î¨ 'Î£_1^n'='n' 'helloo0'='world z' 'ÏÏ'='Ï()'

$ dx unset_properties Î¨ 'Î£_1^n' 'helloo0'

$ dx new record Î¨ --brief
record-FKqvqgQ08j4q6V404KBXf4vQ

$ dx set_properties -a Î¨ 'Î£_1^n'='n' 'helloo0'='world z' 'ÏÏ'='Ï()'

$ dx unset_properties -a Î¨ 'Î£_1^n' 'helloo0' 'ÏÏ'

$ dx set_properties nonexistent key=value
dxpy.utils.resolver.ResolutionError: Unable to resolve "nonexistent" to a data object or folder name in '/'

$ dx unset_properties nonexistent key
dxpy.utils.resolver.ResolutionError: Unable to resolve "nonexistent" to a data object or folder name in '/'

$ dx set_properties -a Î¨ ''
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties -a Î¨ foo=bar=baz
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties -a Î¨ =foo=bar=
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties -a Î¨ foo
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties -a Î¨ =bar
dxpy.cli.parsers.DXParserError: Property keys must be nonempty strings

$ dx set_properties -a Î¨ bar=

$ dx cd project-FKqvqq004pF8v4f81Y9jpZgB:/

$ dx new record Î¨ --brief
record-FKqvqqQ04pF0Jv6x4JjGxx9V

$ dx tag Î¨ Î£1=n helloo0 ÏÏ

$ dx untag Î¨ Î£1=n helloo0

$ dx new record Î¨ --brief
record-FKqvqv804pF5V1604K0F4fgK

$ dx tag -a Î¨ Î£1=n helloo0 ÏÏ

$ dx untag -a Î¨ Î£1=n helloo0 ÏÏ

$ dx tag nonexistent atag
dxpy.utils.resolver.ResolutionError: Unable to resolve "nonexistent" to a data object or folder name in '/'

$ dx untag nonexistent atag
dxpy.utils.resolver.ResolutionError: Unable to resolve "nonexistent" to a data object or folder name in '/'

$ dx cd project-FKqvqyQ04v9jq92B1XYG3f2b:/

$ dx set_properties : '$my.prop'='$hello.world' 'secoÐ¸dprop'='Î£2,n' 'Ñhird prop'='stuff'

$ dx unset_properties : '$my.prop' 'Ñhird prop'

$ dx set_properties nonexistent: key=value
dxpy.utils.resolver.ResolutionError: Could not find a project named "nonexistent"

$ dx unset_properties nonexistent: key
dxpy.utils.resolver.ResolutionError: Could not find a project named "nonexistent"

$ dx set_properties : ''
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties : foo=bar=baz
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties : =foo=bar=
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties : foo
dxpy.cli.parsers.DXParserError: Property key-value pair must be given using syntax "property_key=property_value"

$ dx set_properties : =bar
dxpy.cli.parsers.DXParserError: Property keys must be nonempty strings

$ dx set_properties : bar=

$ dx cd project-FKqvv1Q0KQyyG7FP1Vb1bXyY:/

$ dx tag : \$my.tag secoÐ¸dtag 'Ñhird Ñagggg'

$ dx untag : \$my.tag 'Ñhird Ñagggg'

$ dx tag nonexistent: atag
dxpy.utils.resolver.ResolutionError: Could not find a project named "nonexistent"

$ dx untag nonexistent: atag
dxpy.utils.resolver.ResolutionError: Could not find a project named "nonexistent"

$ dx cd project-FKqvv3Q0922jJkY81VjxgB8K:/

$ dx new project test_dx_remove_project_by_name_419501_1538772495869 --brief
project-FKqvv400y0K0Jv6x4JjGxx9Y

$ dx find projects --brief --name test_dx_remove_project_by_name_419501_1538772495869
project-FKqvv400y0K0Jv6x4JjGxx9Y

$ dx rmproject -y test_dx_remove_project_by_name_419501_1538772495869
Successfully deleted project
"test_dx_remove_project_by_name_419501_1538772495869"

$ dx find projects --brief --name test_dx_remove_project_by_name_419501_1538772495869

$ dx cd project-FKqvv680GP5jq92B1XYG3f2f:/

$ dx new record Î¨1 --brief
record-FKqvv6j0GP5g6bQj4GxFByZg

$ dx set_details Î¨1 '{"foo": "bar"}'

$ dx cd project-FKqvv800Pkz8v4f81Y9jpZgF:/

$ dx new record Î¨2 --brief
record-FKqvv880Pkz5V1604K0F4fgQ

$ dx set_details Î¨2 -f /tmp/tmpen77y08p

$ dx new record Î¨3 --brief
record-FKqvv8j0PkzBffQ84KPxZ8F0

$ dx set_details Î¨3 --details-file /tmp/tmpen77y08p

$ dx new record Î¨4 --brief
record-FKqvv980Pkz0Jv6x4JjGxx9Z

$ dx set_details Î¨4 -f /tmp/tmpylhsb2ti
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 1 column 14 (char 13)
Error: File contents could not be parsed as JSON

$ dx set_details Î¨4 '{ "foo":"bar" }' -f /tmp/tmpen77y08p
dxpy.cli.parsers.DXParserError: Cannot provide both -f/--details-file and details

$ dx new record Î¨5 --brief
record-FKqvv9j0Pkz7fzxb4JGxGx2V

$ cat /tmp/tmpen77y08p | dx set_details Î¨5 -f -

$ dx cd project-FKqvvF00qp28q92B1XYG3f2g:/




ok
test_dx_shell (test_dxclient.TestDXClient) ... $ dx cd project-FKqvvG80bJxKG7FP1Vb1bXyZ:/

dx sh
]0;orodeh@ee2de3afb7c4: ~/dx-toolkit/src/python/testorodeh@ee2de3afb7c4:~/dx-toolkit/src/python/test$ dx sh
dxclient_test_prÃ¶ject:/> Î¨ 'Î¨ Î¨'
Î¨ 'Î¨ Î¨'
'bytes' object has no attribute 'read'

dxclient_test_prÃ¶ject:/> ERROR
test_dx_ssh (test_dxclient.TestDXClient) ... skipped 'Skipping test that would run jobs'
test_dx_ssh_azure (test_dxclient.TestDXClient) ... skipped 'Skipping test that would run jobs in Azure'
test_dx_ssh_config (test_dxclient.TestDXClient) ... $ dx cd project-FKqvvKQ0ZKgq9ykx1XqKGJ65:/

The DNAnexus configuration directory /tmp/tmpps2gf2xz/.dnanexus_config does not exist. Use [1mdx login[0m to create it.
Select an SSH key pair to use when connecting to DNAnexus jobs. The public key will be
saved to your DNAnexus account (readable only by you). The private key will remain on
this computer.

1
0) Generate a new SSH key pair using ssh-keygen
1) Select another SSH key pair...

Pick a numbered choice [0]: 1
Enter the location of your SSH key: Ð½ÐµÑ ÐºÐ»ÑÑÐ°
Ð½ÐµÑ ÐºÐ»ÑÑÐ°
Unable to find Ð½ÐµÑ ÐºÐ»ÑÑÐ° and Ð½ÐµÑ ÐºÐ»ÑÑÐ°.pub
Select an SSH key pair to use when connecting to DNAnexus jobs. The public key will be
saved to your DNAnexus account (readable only by you). The private key will remain on
this computer.

0
0) Generate a new SSH key pair using ssh-keygen
1) Select another SSH key pair...

Pick a numbered choice [0]: 0
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):

Enter same passphrase again:

Your identification has been saved in /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id.
Your public key has been saved in /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id.pub.
The key fingerprint is:
SHA256:YMWig/XpU7TIo/ZKUjLlx74PGGz5LQCdQJzHFjlAxQ4 orodeh@ee2de3afb7c4
The key's randomart image is:
+---[RSA 2048]----+
| +=*oo ..        |
|  EoO...o        |
|  .B+=o= .       |
|  .=++*.o        |
|  o O+ooS        |
|   =oBo.         |
|  ..o.=..        |
|   o  .+         |
|    .....        |
+----[SHA256]-----+
Updated public key for user user-orodeh
Your account has been configured for use with SSH. Use [1mdx run[0m with the
--allow-ssh, --ssh, or --debug-on options to launch jobs and connect to them.
Select an SSH key pair to use when connecting to DNAnexus jobs. The public key will be
saved to your DNAnexus account (readable only by you). The private key will remain on
this computer.

[1mdx[0m is already configured to use the SSH key pair at:
    /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id
    /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id.pub
0) Use this SSH key pair
1) Select or create another SSH key pair...

0
Pick a numbered choice: 0
Updated public key for user user-orodeh
Your account has been configured for use with SSH. Use [1mdx run[0m with the
--allow-ssh, --ssh, or --debug-on options to launch jobs and connect to them.
Select an SSH key pair to use when connecting to DNAnexus jobs. The public key will be
saved to your DNAnexus account (readable only by you). The private key will remain on
this computer.

[1mdx[0m is already configured to use the SSH key pair at:
    /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id
    /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id.pub
0) Use this SSH key pair
1) Select or create another SSH key pair...

1
Pick a numbered choice: 1
0) Generate a new SSH key pair using ssh-keygen
1) Select another SSH key pair...

Pick a numbered choice [0]: 0
0
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):

Enter same passphrase again:

Your identification has been saved in /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id.
Your public key has been saved in /tmp/tmpps2gf2xz/.dnanexus_config/ssh_id.pub.
The key fingerprint is:
SHA256:kzGOasis+UsiXsbKqsH12b8TJ7D9WFIarilYlLveXCk orodeh@ee2de3afb7c4
The key's randomart image is:
+---[RSA 2048]----+
|                 |
|                 |
|      . o        |
|     o + = .     |
|   .. o S +      |
|.oo..+o. O.o     |
|+.=+=o.EooO      |
|+*+o ooo+o .     |
|B=o....o oo      |
+----[SHA256]-----+
Updated public key for user user-orodeh
Your account has been configured for use with SSH. Use [1mdx run[0m with the
--allow-ssh, --ssh, or --debug-on options to launch jobs and connect to them.
/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:852: DeprecationWarning: Please use assertRaisesRegex instead.
  'Tried to put a private key in the sshPublicKey field'):
ok
test_dx_ssh_config_revoke (test_dxclient.TestDXClient) ... $ dx cd project-FKqvvV80YPg0Jv6x4JjGxx9f:/

Select an SSH key pair to use when connecting to DNAnexus jobs. The public key
will be saved to your DNAnexus account (readable only by you). The private key
will remain on this computer.

0
0) Generate a new SSH key pair using ssh-keygen
1) Select another SSH key pair...

Pick a numbered choice [0]: 0
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):

Enter same passphrase again:

Your identification has been saved in /tmp/tmp151jajoe/.dnanexus_config/ssh_id.
Your public key has been saved in /tmp/tmp151jajoe/.dnanexus_config/ssh_id.pub.
The key fingerprint is:
SHA256:95DQCAYPn5vF/th7rDkxzVK2e7lZ531XIZmT5jx53nk orodeh@ee2de3afb7c4
The key's randomart image is:
+---[RSA 2048]----+
|    o.o          |
|     = + o       |
|      + = .   +  |
|       = . .oB . |
|      o S +=+.+ .|
|         =+o+= ..|
|        . o=..+.*|
|          .o+ o*E|
|          ++ .o.*|
+----[SHA256]-----+
Updated public key for user user-orodeh
Your account has been configured for use with SSH. Use [1mdx run[0m with the
--allow-ssh, --ssh, or --debug-on options to launch jobs and connect to them.
ok
test_dx_ssh_proxy (test_dxclient.TestDXClient) ... skipped 'Skipping test that would run jobs'
test_dx_ssh_proxy_azure (test_dxclient.TestDXClient) ... skipped 'Skipping test that would run jobs'
test_dx_uninvite (test_dxclient.TestDXClient) ... skipped 'skipping tests that need rate limits to be disabled'
test_dx_version (test_dxclient.TestDXClient) ... ok
test_dx_watch_invalid_auth (test_dxclient.TestDXClient) ... skipped 'skipping test that requires presence of test user'
test_dx_with_bad_job_id_env (test_dxclient.TestDXClient) ... ok
test_dxpy_session_isolation (test_dxclient.TestDXClient) ... skipped 'PTFM-16383 Disable flaky test'
test_get_unicode_url (test_dxclient.TestDXClient) ... FAIL
test_head (test_dxclient.TestDXClient) ... ok
test_path_resolution_doesnt_crash (test_dxclient.TestDXClient) ... ok
test_windows_pager (test_dxclient.TestDXClient) ... ok
test_bad_current_project (test_dxclient.TestDXClientDescribe) ... ok
test_describe_deleted_app (test_dxclient.TestDXClientDescribe) ... skipped 'skipping test that would create apps'
test_describe_global_workflow (test_dxclient.TestDXClientDescribe) ... skipped 'skipping test that would create global workflows'
test_projects (test_dxclient.TestDXClientDescribe) ... ok
test_user_describe_self_shows_bill_to (test_dxclient.TestDXClientDescribe) ... $ dx cd project-FKqvvYj094ZQJv6x4JjGxx9g:/

$ dx --version
dx v0.265.0-35-ga1d50f5

$ dx cd project-FKqvvb00293QJ4q44Gp7FVPv:/

$ dx env
Auth token used		kfaEjTGdMzdhQO9droWwfE2WQbwSq1zC
API server protocol	https
API server host		stagingapi.dnanexus.com
API server port		443
Current workspace	None
Current workspace name	"SpeedTests"
Current folder		/
Current user		orodeh

$ dx cd project-FKqvvf8055z0Jv6x4JjGxx9j:/

$ dx api project-ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½Ñ describe
ERROR:dxpy:[Fri Oct  5 13:49:30 2018] POST https://stagingapi.dnanexus.com:443/project-ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½Ñ/describe: UnicodeEncodeError: 'ascii' codec can't encode characters in position 14-24: ordinal not in range(128).
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 642, in api
    json_input)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/__init__.py", line 616, in DXHTTPRequest
    timeout=timeout, retries=False, **kwargs)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/request.py", line 72, in request
    **urlopen_kw)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/request.py", line 150, in request_encode_body
    return self.urlopen(method, url, **extra_kw)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/poolmanager.py", line 322, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/connectionpool.py", line 600, in urlopen
    chunked=chunked)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/connectionpool.py", line 354, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib/python3.5/http/client.py", line 1106, in request
    self._send_request(method, url, body, headers)
  File "/usr/lib/python3.5/http/client.py", line 1141, in _send_request
    self.putrequest(method, url, **skips)
  File "/usr/lib/python3.5/http/client.py", line 983, in putrequest
    self._output(request.encode('ascii'))
UnicodeEncodeError: 'ascii' codec can't encode characters in position 14-24: ordinal not in range(128)

$ dx cd project-FKqvvgQ09zxYYZ6g4J2qQpzK:/

$ dx head foo
abcd

$ dx cd project-FKqvvkj0YK1bV1604K0F4fgX:/

$ dx find jobs --project :

$ dx find executions --project :

$ dx find analyses --project :

$ dx find data --project :

$ dx cd project-FKqvvqj0pK20J4q44Gp7FVPx:/


$ dx cd project-FKqvvx00qBK76bQj4GxFByZq:/

$ dx describe nonexistent --project-context-id foo
dxpy.exceptions.DXCLIError: No matches found for nonexistent

$ dx describe project-FKqvvx00qBK76bQj4GxFByZq --project-context-id foo
Result 1:
ID                  project-FKqvvx00qBK76bQj4GxFByZq
Class               project
Name                dxclient_test_prÃ¶ject
Summary
Billed to           orodeh
Access level        ADMINISTER
Region              aws:us-east-1
Protected           false
Restricted          false
Contains PHI        false
Created             Fri Oct  5 13:49:56 2018
Created by          orodeh
Last modified       Fri Oct  5 13:49:57 2018
Data usage          0.00 GB
Sponsored data      0.00 GB
Storage cost        $0.000/month
Sponsored egress    0.00 GB used of 0.00 GB total
At spending limit?  false
Tags                -
Properties          -
downloadRestricted  false
defaultInstanceType "mem2_hdd2_x2"

$ dx cd project-FKqvvyQ0Vb5q6V404KBXf4vZ:/

$ dx describe :
Result 1:
ID                  project-FKqvvyQ0Vb5q6V404KBXf4vZ
Class               project
Name                dxclient_test_prÃ¶ject
Summary
Billed to           orodeh
Access level        ADMINISTER
Region              aws:us-east-1
Protected           false
Restricted          false
Contains PHI        false
Created             Fri Oct  5 13:50:02 2018
Created by          orodeh
Last modified       Fri Oct  5 13:50:04 2018
Data usage          0.00 GB
Sponsored data      0.00 GB
Storage cost        $0.000/month
Sponsored egress    0.00 GB used of 0.00 GB total
At spending limit?  false
Tags                -
Properties          -
downloadRestricted  false
defaultInstanceType "mem2_hdd2_x2"

$ dx describe project-FKqvvyQ0Vb5q6V404KBXf4vZ
Result 1:
ID                  project-FKqvvyQ0Vb5q6V404KBXf4vZ
Class               project
Name                dxclient_test_prÃ¶ject
Summary
Billed to           orodeh
Access level        ADMINISTER
Region              aws:us-east-1
Protected           false
Restricted          false
Contains PHI        false
Created             Fri Oct  5 13:50:02 2018
Created by          orodeh
Last modified       Fri Oct  5 13:50:04 2018
Data usage          0.00 GB
Sponsored data      0.00 GB
Storage cost        $0.000/month
Sponsored egress    0.00 GB used of 0.00 GB total
At spending limit?  false
Tags                -
Properties          -
downloadRestricted  false
defaultInstanceType "mem2_hdd2_x2"

$ dx describe project-FKqvvyQ0Vb5q6V404KBXf4vZ:
Result 1:
ID                  project-FKqvvyQ0Vb5q6V404KBXf4vZ
Class               project
Name                dxclient_test_prÃ¶ject
Summary
Billed to           orodeh
Access level        ADMINISTER
Region              aws:us-east-1
Protected           false
Restricted          false
Contains PHI        false
Created             Fri Oct  5 13:50:02 2018
Created by          orodeh
Last modified       Fri Oct  5 13:50:04 2018
Data usage          0.00 GB
Sponsored data      0.00 GB
Storage cost        $0.000/month
Sponsored egress    0.00 GB used of 0.00 GB total
At spending limit?  false
Tags                -
Properties          -
defaultInstanceType "mem2_hdd2_x2"
downloadRestricted  false

$ dx describe dxclient_test_prÃ¶ject
dxpy.exceptions.DXCLIError: No matches found for dxclient_test_prÃ¶ject

$ dx describe dne:
dxpy.exceptions.DXCLIError: No matches found for dne:

$ dx describe project-123456789012345678901234
dxpy.exceptions.DXCLIError: No matches found for project-123456789012345678901234

$ dx cd project-FKqvx180fV8BffQ84KPxZ8F2:/

$ dx describe user-orodeh
Result 1:
ID                  user-orodeh
Name                Ohad Rodeh
Email               orodeh@dnanexus.com
Default bill to     user-orodeh
Apps installed      test_add_and_remove_tags_app,
                    asset_1538688843_multi_region_app,
                    native_hello,
                    asset_1538695537_multi_region_app,
                    asset_1538694246_multi_region_app,
                    url_fetcher, app_name,
                    asset_1538694219_multi_region_app,
                    asset_1538692152_multi_region_app,
                    asset_1538694931_multi_region_app,
                    asset_1538772022_multi_region_app

$ dx describe user-orodeh --json
{
    "billTo": "user-orodeh",
    "first": "Ohad",
    "email": "orodeh@dnanexus.com",
    "estSpendingLimitLeft": null,
    "appsInstalled": {
        "asset_1538695537_multi_region_app": true,
        "url_fetcher": true,
        "test_add_and_remove_tags_app": true,
        "asset_1538692152_multi_region_app": true,
        "asset_1538694246_multi_region_app": true,
        "native_hello": true,
        "asset_1538694931_multi_region_app": true,
        "asset_1538694219_multi_region_app": true,
        "asset_1538688843_multi_region_app": true,
        "asset_1538772022_multi_region_app": true,
        "app_name": true
    },
    "billingInformation": {
        "state": "CA",
        "address1": "Avellino Way 137",
        "city": "Mountain View",
        "email": "ohad.rodeh@gmail.com",
        "confirmedAt": 1430435430841,
        "postCode": "94043",
        "companyName": "Rodeh",
        "address2": "",
        "additionalInfo": "",
        "phone": "4003003298",
        "country": "USA",
        "purchaseOrder": "",
        "name": "Ohad"
    },
    "last": "Rodeh",
    "passwordExpiresAt": -1,
    "createdBy": {
        "user": "user-orodeh"
    },
    "class": "user",
    "storageCharges": 0.20866880643032573,
    "sshPublicKey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDfVKveULCml2JdFLQyfUpBFjkHT5IHE4U5EwWImanirGJMg4ZsKEpqoaoTqsK/55UkJwmSQRHVorHK9D4HaOC4HcRbAwRtDNqi/QBsuQ18BqqZ8bNhjH7Z8mAgdCUwpOAU91/YsfZ6xLFqdZqVZMKt4TakZe2IeVWSF/KouTBReKJ9xk1Bf5DvYxv0iAfzSUM1PQR67I/SofbpVwKkOpmWKDqcG0w2s2itL9/jAE+Lc1MpUevpr8NdN3hwv7iR2Biq68wLzbL3/Xjr/IXRLKwzJoeIKNj5CkkV8eoUKZ5zv+/nDGD5uLZsJdQbbNat7PBLthgEQ2o3pB+ojA8kcHY7lTLtlcGbT6mYGCKuly0JRgkNfVujlCH2mZ3JvUsm98/npnFiHeXMsYtwPj4RtCrIkDnwKSR//DnEkl3GfjEW1hCOUW2atrudjtZUb23FlTHb2CZ/GoFJgJlwriStzqJ1LHurRbbNSinO59L3nkBmjqqZJOtIfuk8uPTDF88YIBwTSzBhcogHsS+v2zTOWBOjbUWrDvgSEb3w2VtPrSj67rq9lhOHBDrDGYzOsBuF22ewwjcpDDQ8KHWr3pQZPOVLkSi8ST85h1tT+ViO8EIbmfxtbU4Zf7KO7lTqX24cbmvIjfsoBTH9boBu+8Jbz3+PylY7if4ErY4FksdaL/4ZKQ== orodeh@dnanexus.com\n",
    "dataEgressCharges": 0.5432143029756844,
    "policies": {
        "emailWhenJobComplete": "never"
    },
    "storageChargesComputedAt": 1532530312009,
    "otpEnabled": false,
    "permittedRegions": [
        "aws:us-east-1",
        "aws:us-west-2",
        "aws:cn-north-1",
        "aws:ap-southeast-2",
        "azure:westus",
        "azure:westeurope",
        "aws:eu-central-1"
    ],
    "id": "user-orodeh",
    "defaultRegion": "aws:us-east-1",
    "phiFeaturesEnabled": false,
    "pendingBillingInformation": null,
    "handle": "orodeh",
    "securityLevel": "normal",
    "middle": "",
    "computeCharges": 387.900504288056
}
ok
test_dx_cat_project_context (test_dxclient.TestDXClientDownloadDataEgressBilling) ... skipped 'skipping test that would clobber your local environment'
test_dx_download_jbors (test_dxclient.TestDXClientDownloadDataEgressBilling) ... skipped 'skipping test that would clobber your local environment and run jobs'
test_dx_download_multiple_projects_with_same_name (test_dxclient.TestDXClientDownloadDataEgressBilling) ... ERROR
test_dx_download_project_context (test_dxclient.TestDXClientDownloadDataEgressBilling) ... skipped 'skipping test that would clobber your local environment'
test_dx_download_project_explicit (test_dxclient.TestDXClientDownloadDataEgressBilling) ... ERROR
test_dx_find_apps (test_dxclient.TestDXClientFind) ... skipped 'skipping test that creates apps'
test_dx_find_apps_and_globalworkflows_category (test_dxclient.TestDXClientFind) ... ok
test_dx_find_data_by_class (test_dxclient.TestDXClientFind) ... ok
test_dx_find_data_by_name (test_dxclient.TestDXClientFind) ... ok
test_dx_find_data_by_property (test_dxclient.TestDXClientFind) ... ok
test_dx_find_data_by_region (test_dxclient.TestDXClientFind) ... skipped 'skipping test that can take a long time outside local environment'
test_dx_find_data_by_scope (test_dxclient.TestDXClientFind) ...
$ dx download -o - project-FKqvx30019q0J4q44Gp7FVQ2:file-FKqvx40019qF6V404KBXf4vb
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 1907, in cat
    sys.stdout.buffer.write(chunk)
TypeError: a bytes-like object is required, not 'str'

$ dx download -o - project-FKqvx6j054fYYZ6g4J2qQpzQ:file-FKqvx7j054fpffQ84KPxZ8F8
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 1907, in cat
    sys.stdout.buffer.write(chunk)
TypeError: a bytes-like object is required, not 'str'

$ dx cd project-FKqvxBj05gg5V1604K0F4fgY:/

$ dx find apps --category-help
usage: dx find apps --category CATEGORY

List only the apps that belong to a particular category by providing a
category name.

Common category names include:
  Annotation
  Assembly
  Debugging
  Export
  Import
  Mappings Manipulation
  RNA-Seq
  Read Manipulation
  Read Mapping
  Reports
  Statistics
  Structural Variation
  Variation Calling

$ dx find apps --category foo

$ dx find globalworkflows --category-help
usage: dx find globalworkflows --category CATEGORY

List only the workflows that belong to a particular category by providing a
category name.

Common category names include:
  Annotation
  Assembly
  Debugging
  Export
  Import
  Mappings Manipulation
  RNA-Seq
  Read Manipulation
  Read Mapping
  Reports
  Statistics
  Structural Variation
  Variation Calling

$ dx find globalworkflows --category foo

$ dx cd project-FKqvxGQ0b7P0Jv6x4JjGxx9q:/

$ dx new record --brief
record-FKqvxJ00b7PG093BPbZkY9bP

$ dx new workflow --brief
workflow-FKqvxJ80b7P79BgjPbyVKqPP

$ echo foo | dx upload - --brief
file-FKqvxJQ0b7P35kk4Pg1xk45X

$ dx find data --brief --class record
project-FKqvxGQ0b7P0Jv6x4JjGxx9q:record-FKqvxJ00b7PG093BPbZkY9bP

$ dx find data --brief --class file
project-FKqvxGQ0b7P0Jv6x4JjGxx9q:file-FKqvxJQ0b7P35kk4Pg1xk45X

$ dx find data --brief --class workflow
project-FKqvxGQ0b7P0Jv6x4JjGxx9q:workflow-FKqvxJ80b7P79BgjPbyVKqPP

$ dx cd project-FKqvxP80XXPpffQ84KPxZ8FB:/

$ dx find data --brief --name find_data_by_name
project-FKqvxP80XXPpffQ84KPxZ8FB:record-FKqvxPQ0XXPbV1604K0F4fgZ

$ dx cd project-FKqvxQj0GjG3YZ6g4J2qQpzV:/

$ dx new record --brief --property Î¨=world --property foo=bar --property bar=
record-FKqvxV80GjGJ6fP0PbFbK3xK

$ dx new record --brief --property Î¨=notworld --property foo=bar
record-FKqvxV80GjGKjkqFPf8Kkfkg

$ dx find data --property Î¨=world --property foo=bar --brief
project-FKqvxQj0GjG3YZ6g4J2qQpzV:record-FKqvxV80GjGJ6fP0PbFbK3xK

$ dx find data --property Î¨ --brief
project-FKqvxQj0GjG3YZ6g4J2qQpzV:record-FKqvxV80GjGKjkqFPf8Kkfkg
project-FKqvxQj0GjG3YZ6g4J2qQpzV:record-FKqvxV80GjGJ6fP0PbFbK3xK

$ dx find data --property Î¨ --property foo=baz --brief

$ dx find data --property Î¨ --property foo=bar --brief
project-FKqvxQj0GjG3YZ6g4J2qQpzV:record-FKqvxV80GjGKjkqFPf8Kkfkg
project-FKqvxQj0GjG3YZ6g4J2qQpzV:record-FKqvxV80GjGJ6fP0PbFbK3xK

$ dx find data --property bar= --brief
project-FKqvxQj0GjG3YZ6g4J2qQpzV:record-FKqvxV80GjGJ6fP0PbFbK3xK

$ dx find data --property ''
dxpy.cli.parsers.DXParserError: Property keys must be nonempty strings

$ dx find data --property foo=bar=baz
dxpy.cli.parsers.DXParserError: Property value must be given using syntax "property_key" or "property_key=property_value"

$ dx find data --property =foo=bar=
dxpy.cli.parsers.DXParserError: Property value must be given using syntax "property_key" or "property_key=property_value"

$ dx find data --property =bar
dxpy.cli.parsers.DXParserError: Property keys must be nonempty strings

$ dx cd project-FKqvxYj0GPyQJ4q44Gp7FVQ5:/

$ dx new record -p --brief project-FKqvxZ00Qy30Jv6x4JjGxx9v:/test-folder-PTFM-7023-01/test-record-01
record-FKqvxZ80Qy335kk4Pg1xk45Z

$ dx find data --brief --project project-FKqvxZ00Qy30Jv6x4JjGxx9v
project-FKqvxZ00Qy30Jv6x4JjGxx9v:record-FKqvxZ80Qy335kk4Pg1xk45Z

$ dx new record -p --brief /test-folder-PTFM-7023-02/test-record-02
record-FKqvxbQ0GPyx6fP0PbFbK3xQ

$ dx new record -p --brief /test-folder-PTFM-7023-02/test-subfolder/test-record-02
record-FKqvxbj0GPyyjkqFPf8Kkfkk

$ dx find data --brief --folder /test-folder-PTFM-7023-02
project-FKqvxYj0GPyQJ4q44Gp7FVQ5:record-FKqvxbj0GPyyjkqFPf8Kkfkk
project-FKqvxYj0GPyQJ4q44Gp7FVQ5:record-FKqvxbQ0GPyx6fP0PbFbK3xQ

$ dx new record -p --brief project-FKqvxf00y8YQJ4q44Gp7FVQ6:/test-folder-PTFM-7023-03/test-record-03
record-FKqvxf00y8Yv093BPbZkY9bV

$ dx find data --brief --project project-FKqvxf00y8YQJ4q44Gp7FVQ6 --folder /test-folder-PTFM-7023-03
project-FKqvxf00y8YQJ4q44Gp7FVQ6:record-FKqvxf00y8Yv093BPbZkY9bV

$ dx new record -p --brief /test-folder-PTFM-7023-04/test-record-04
record-FKqvxgQ0GPyg9BgjPbyVKqPV

$ dx new record -p --brief /test-folder-PTFM-7023-04/test-subfolder/test-record-04
record-FKqvxgj0GPykkQyPPfJjb8Xy

$ dx find data --brief --folder /test-folder-PTFM-7023-04 --norecurse
project-FKqvxYj0GPyQJ4q44Gp7FVQ5:record-FKqvxgQ0GPyg9BgjPbyVKqPV

$ dx new record -p --brief project-FKqvxj00vk1g6bQj4GxFByZy:/test-folder-PTFM-7023-05/test-record-05
record-FKqvxj80vk1Y5kk4Pg1xk45f

$ dx new record -p --brief project-FKqvxj00vk1g6bQj4GxFByZy:/test-folder-PTFM-7023-05/test-subfolder/test-record-05
record-FKqvxj80vk1g9BgjPbyVKqPY

$ dx find data --brief --project project-FKqvxj00vk1g6bQj4GxFByZy --folder /test-folder-PTFM-7023-05 --norecurse
project-FKqvxj00vk1g6bQj4GxFByZy:record-FKqvxj80vk1Y5kk4Pg1xk45f

$ dx new record -p --brief /test-record-06
record-FKqvxkj0GPyVVz2vPbKb72Z5

$ dx new record -p --brief /test-folder-PTFM-7023-06/test-record-06
record-FKqvxp00GPykkQyPPfJjb8Y0

$ dx new record -p --brief /test-folder-PTFM-7023-06/test-subfolder/test-record-06
record-FKqvxp80GPyZV1JGPfgV6Fvq

$ dx find data --brief --path /test-folder-PTFM-7023-06
project-FKqvxYj0GPyQJ4q44Gp7FVQ5:record-FKqvxp80GPyZV1JGPfgV6Fvq
project-FKqvxYj0GPyQJ4q44Gp7FVQ5:record-FKqvxp00GPykkQyPPfJjb8Y0

$ dx new record -p --brief /test-record-07
record-FKqvxpj0GPyx6fP0PbFbK3xX

$ dx new record -p --brief project-FKqvxpQ0JZf0Jv6x4JjGxx9x:/test-folder-PTFM-7023-07/test-record-07
record-FKqvxpj0JZf35kk4Pg1xk45j

$ dx find data --brief --project project-FKqvxpQ0JZf0Jv6x4JjGxx9x --path /test-folder-PTFM-7023-07
project-FKqvxpQ0JZf0Jv6x4JjGxx9x:record-FKqvxpj0JZf35kk4Pg1xk45j

$ dx new record -p --brief /test-folder-PTFM-7023-08/test-record-08
record-FKqvxvQ0GPyZV1JGPfgV6Fvx

$ dx new record -p --brief /test-folder-PTFM-7023-08/test-subfolder/test-record-08
record-FKqvxvQ0GPyv093BPbZkY9bY

$ dx find data --brief --path /test-folder-PTFM-7023-08 --norecurse
project-FKqvxYj0GPyQJ4q44Gp7FVQ5:record-FKqvxvQ0GPyZV1JGPfgV6Fvx

$ dx new record -p --brief project-FKqvxvj0Z15g6bQj4GxFByZz:/test-folder-PTFM-7023-09/test-record-09
record-FKqvxx00Z15yjkqFPf8Kkfkq

$ dx new record -p --brief project-FKqvxvj0Z15g6bQj4GxFByZz:/test-folder-PTFM-7023-09/test-subfolder/test-record-09
record-FKqvxx80Z15g9BgjPbyVKqPb

$ dx find data --brief --project project-FKqvxvj0Z15g6bQj4GxFByZz --path /test-folder-PTFM-7023-09 --norecurse
project-FKqvxvj0Z15g6bQj4GxFByZz:record-FKqvxx00Z15yjkqFPf8Kkfkq

$ dx new record -p --brief project-FKqvxyQ0y6J3YZ6g4J2qQpzX:/test-folder-PTFM-7023-10/test-record-10
record-FKqvxyj0y6J9kQyPPfJjb8Y2

$ dx new record -p --brief project-FKqvxyQ0y6J3YZ6g4J2qQpzX:/test-folder-PTFM-7023-10/test-subfolder/test-record-10
record-FKqvxz00y6JG093BPbZkY9bb

$ dx find data --brief --path project-FKqvxyQ0y6J3YZ6g4J2qQpzX:/test-folder-PTFM-7023-10
project-FKqvxyQ0y6J3YZ6g4J2qQpzX:record-FKqvxz00y6JG093BPbZkY9bb
project-FKqvxyQ0y6J3YZ6g4J2qQpzX:record-FKqvxyj0y6J9kQyPPfJjb8Y2

$ dx find data --brief --path project-FKqvxyQ0y6J3YZ6g4J2qQpzX:/test-folder-PTFM-7023-10 --norecurse
project-FKqvxyQ0y6J3YZ6g4J2qQpzX:record-FKqvxyj0y6J9kQyPPfJjb8Y2

$ dx new record -p --brief /test-record-12
record-FKqvy0Q0GPykkQyPPfJjb8Y4

$ dx new record -p --brief /test-folder-PTFM-7023-12/test-subfolder/test-record-12
record-FKqvy0j0GPyVVz2vPbKb72Z7

$ dx cd /test-folder-PTFM-7023-12

$ dx find data --brief --path test-subfolder
project-FKqvxYj0GPyQJ4q44Gp7FVQ5:record-FKqvy0j0GPyVVz2vPbKb72Z7

$ dx clearenv

$ dx new record -p --brief project-FKqvy1Q0679bV1604K0F4fgf:/test-folder-PTFM-7023-14/test-record-14ok
test_dx_find_data_by_tag (test_dxclient.TestDXClientFind) ... ok
test_dx_find_data_formatted (test_dxclient.TestDXClientFind) ... /usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 42152), raddr=('54.152.220.227', 443)>
  self._sock = None
ok
test_dx_find_globalworkflows (test_dxclient.TestDXClientFind) ... skipped 'skipping test that creates global workflows'
test_dx_find_jobs_by_tags_and_properties (test_dxclient.TestDXClientFind) ... skipped 'skipping tests that would run jobs'
test_dx_find_projects (test_dxclient.TestDXClientFind) ... ok
test_dx_find_projects_by_created (test_dxclient.TestDXClientFind) ... ok
test_dx_find_projects_by_property (test_dxclient.TestDXClientFind) ... ok
test_dx_find_projects_by_region (test_dxclient.TestDXClientFind) ... ok
test_dx_find_projects_by_tag (test_dxclient.TestDXClientFind) ... ok
test_dx_find_projects_phi (test_dxclient.TestDXClientFind) ...
record-FKqvy1Q0679yjkqFPf8Kkfkx

$ dx find data --brief --project project-FKqvy1Q0679bV1604K0F4fgf --path project-FKqvy1Q0679bV1604K0F4fgf:/test-folder-PTFM-7023-14
dxpy.cli.parsers.DXParserError: Cannot supply both --project and --path PROJECTID:FOLDERPATH.

$ dx find data --brief --folder project-FKqvy1Q0679bV1604K0F4fgf:/test-folder-PTFM-7023-14 --path project-FKqvy1Q0679bV1604K0F4fgf:/test-folder-PTFM-7023-14
dxpy.cli.parsers.DXParserError: Cannot supply both --folder and --path.

$ dx cd project-FKqvy3j0J955V1604K0F4fgg:/

$ dx new record --brief --tag Î¨ --tag foo --tag baz
record-FKqvy400J9579BgjPbyVKqPg

$ dx new record --brief --tag Î¨ --tag foo --tag bar
record-FKqvy480J959kQyPPfJjb8Y6

$ dx find data --tag baz --brief
project-FKqvy3j0J955V1604K0F4fgg:record-FKqvy400J9579BgjPbyVKqPg

$ dx find data --tag Î¨ --tag foo --tag foobar --brief

$ dx find data --tag foo --tag Î¨ --brief
project-FKqvy3j0J955V1604K0F4fgg:record-FKqvy480J959kQyPPfJjb8Y6
project-FKqvy3j0J955V1604K0F4fgg:record-FKqvy400J9579BgjPbyVKqPg

$ dx cd project-FKqvy6001YKbV1604K0F4fgj:/

$ dx find data --name find_data_formatting
closed  2018-10-05 13:52:41           /find_data_formatting (record-FKqvy6801YKY5kk4Pg1xk45p)

$ dx cd project-FKqvy7Q09QqkkQyPPfJjb8Y8:/

$ dx find projects --name 'dx find projects test 1538772767.151922'
project-FKqvy7j08jk35kk4Pg1xk45v : dx find projects test 1538772767.151922 (ADMINISTER)

$ dx find projects --brief --name 'dx find projects test 1538772767.151922'
project-FKqvy7j08jk35kk4Pg1xk45v

$ dx find projects --json --name 'dx find projects test 1538772767.151922'
[
    {
        "public": false,
        "permissionSources": [
            "user-orodeh"
        ],
        "id": "project-FKqvy7j08jk35kk4Pg1xk45v",
        "describe": {
            "archivalProgress": null,
            "restricted": false,
            "consumedSponsoredEgressBytes": 0,
            "downloadRestricted": false,
            "archivalState": "live",
            "atSpendingLimit": false,
            "createdBy": {
                "user": "user-orodeh"
            },
            "tags": [],
            "class": "project",
            "totalSponsoredEgressBytes": 0,
            "modified": 1538772767000,
            "defaultInstanceType": "mem2_hdd2_x2",
            "created": 1538772767000,
            "storageCost": 0,
            "billTo": "user-orodeh",
            "name": "dx find projects test 1538772767.151922",
            "version": 0,
            "containsPHI": false,
            "summary": "",
            "level": "ADMINISTER",
            "pendingTransfer": null,
            "id": "project-FKqvy7j08jk35kk4Pg1xk45v",
            "protected": false,
            "region": "aws:us-east-1",
            "sponsoredDataUsage": 0,
            "dataUsage": 0,
            "description": ""
        },
        "level": "ADMINISTER"
    }
]

$ dx cd project-FKqvyB805bBJ6fP0PbFbK3xZ:/

$ dx find projects --created-after=-1d --brief --name 'dx find projects test 1538772778.2049499'
project-FKqvyBQ0Xp9kkQyPPfJjb8Y9

$ dx find projects --created-before=1538773779000 --brief --name 'dx find projects test 1538772778.2049499'
project-FKqvyBQ0Xp9kkQyPPfJjb8Y9

$ dx find projects --created-after=-1d --created-before=1538773779000 --brief --name 'dx find projects test 1538772778.2049499'
project-FKqvyBQ0Xp9kkQyPPfJjb8Y9

$ dx find projects --created-after=1538773780000 --name 'dx find projects test 1538772778.2049499'

$ dx cd project-FKqvyJ00Z1BJ6fP0PbFbK3xb:/

$ dx new project other --brief
project-FKqvyJQ0Z3g35kk4Pg1xk45x

$ dx set_properties : Î¨=world foo=bar bar=

$ dx set_properties project-FKqvyJQ0Z3g35kk4Pg1xk45x Î¨=notworld foo=bar

$ dx find projects --property Î¨=world --property foo=bar --brief
project-FKqvyJ00Z1BJ6fP0PbFbK3xb

$ dx find projects --property bar= --brief
project-FKqvyJ00Z1BJ6fP0PbFbK3xb

$ dx find projects --property Î¨ --brief
project-FKqvyJQ0Z3g35kk4Pg1xk45x
project-FKqvyJ00Z1BJ6fP0PbFbK3xb

$ dx find projects --property Î¨ --property foo=baz --brief

$ dx find projects --property Î¨ --property foo=bar --brief
project-FKqvyJQ0Z3g35kk4Pg1xk45x
project-FKqvyJ00Z1BJ6fP0PbFbK3xb

$ dx rmproject -y project-FKqvyJQ0Z3g35kk4Pg1xk45x
Successfully deleted project "other"

$ dx find projects --property ''
dxpy.cli.parsers.DXParserError: Property keys must be nonempty strings

$ dx find projects --property foo=bar=baz
dxpy.cli.parsers.DXParserError: Property value must be given using syntax "property_key" or "property_key=property_value"

$ dx find projects --property =foo=bar=
dxpy.cli.parsers.DXParserError: Property value must be given using syntax "property_key" or "property_key=property_value"

$ dx find projects --property =bar
dxpy.cli.parsers.DXParserError: Property keys must be nonempty strings

$ dx find projects --property bar=
project-FKqvyJ00Z1BJ6fP0PbFbK3xb : dxclient_test_prÃ¶ject (ADMINISTER)

$ dx cd project-FKqvyX00x1J4V1JGPfgV6Fvz:/

$ dx find projects --region aws:us-east-1 --brief --name 'dx find projects test 1538772809.4563987'
project-FKqvyX80VbPG093BPbZkY9bg

$ dx find projects --region aws:us-east-1 --brief
project-FKqvyX80VbPG093BPbZkY9bg
project-FKqvyX00x1J4V1JGPfgV6Fvz
project-FKqvfy00QFzjq92B1XYG3f23
project-FKqv3f00G58946YQ4336KjX3
project-FKqpZb80XFp67QvJ8ZfjzV3g
project-FKqpYF80g8PZ936243Bp7zpq
project-FKqpXj80pGK05fz37b26PKf7
project-FKqpX7Q0G2F05fz37b26PKf6
project-FKqpX0Q0FZPZ58bY42gx5ZvF
project-FKqpQgQ0JFV2xy1k43YY14Qz
project-FKqB1PQ02KzvbgqK078P9GB0
project-FKq4j4Q0vg9vyg0G27z8Yk3x
project-FKpfy7Q0k8yGyg0G27z8Yj5Y
project-FKpfbBj0jXB3qgvY52gqZ31f
project-FKpfbBQ00JpGbzFZ524qJXGF
project-FKpfBYQ0FqPjy3f208yBGVQx
project-FKpf9Z00jZqvbgqK078P9Bx6
project-FKpZxYQ0BXQq9gF208Pj3V09
project-FKpZPfQ09JKJJ2Q4285PKj1G
project-FKpZKfQ0Z0x20gQk28k67Jx9
project-FKpQz400YpzyQZk7Kp4vy8vb
project-FGpfqjQ0ffPF1Q106JYP2j3v
project-FJqPYy80bKvP9P9B69Vk484y
project-F9F4k88085XQQypxKfQ9pYbB
project-FFyBb900G22bgKj15xV2Yf0Z
project-FJPpQX801Qz57pqQ8KjVp6BV
project-FJPGQB803g1zj5FPK8v3FbY3
project-FJ4YQ4Q0XGvz6JYYB5289v9B
project-F9b89Fj05x2bx48X881qgfkg
project-F9Y45300pjvQ5Z4Y8gB3b56v
project-Bp22960019f055z8vZpz64XQ
project-BKJ175j0P8kV80FG903Q008G
project-Bv1KFQ80VF76bfzQ8VZ1Xzv4
project-Bq2QKfj0KG2gpq4qV9v7V36G
project-Bfk8Y28050k9vx91Fx44fb33
project-BpYJ3Z80VVfPQv7PB4XKz285
project-BP31z7Q0z43jB9xVxjg000bY

$ dx find projects --region azure:westus --brief
project-FKpfbF09Xp48vq0752QKQFFb
project-FJ8P8b09ggpPbYBK6Fkf2ZB0

$ dx find projects --region azure:westus --brief
project-FKqvyYj9jxYKjkqFPf8Kkfkz
project-FKpfbF09Xp48vq0752QKQFFb
project-FJ8P8b09ggpPbYBK6Fkf2ZB0

$ dx cd project-FKqvyf00J4zVVz2vPbKb72Z9:/

$ dx new project other --brief
project-FKqvyfQ04xGF9ykx1XqKGJ68

$ dx tag : Î¨ world

$ dx find projects --tag Î¨ --tag world --brief
project-FKqvyf00J4zVVz2vPbKb72Z9

$ dx find projects --tag Î¨ --tag world --tag foobar --brief

$ dx tag project-FKqvyfQ04xGF9ykx1XqKGJ68 Î¨ world foobar

$ dx find projects --tag world --tag Î¨ --brief
project-FKqvyfQ04xGF9ykx1XqKGJ68
project-FKqvyf00J4zVVz2vPbKb72Z9

$ dx rmproject -y project-FKqvyfQ04xGF9ykx1XqKGJ68
Successfully deleted project "other"

$ dx cd project-FKqvykQ0gXVJ6fP0PbFbK3xf:/

$ dx find projects --phi true --brief --name tempProject+1538772839.6568077

$ dx find projects --phi false --brief --name tempProject+1538772839.6568077
project-FKqvykj0gz6KjkqFPf8Kkfp0

$ dx find projects --phi
usage: dx find projects [-h] [--brief | --verbose] [--json]
                        [--delimiter [DELIMITER]] [--env-help]
                        [--property KEY[=VALUE]] [--tag TAG]
                        [--phi {true,false}] [--name NAME]
                        [--level {VIEW,UPLOAD,CONTRIBUTE,ADMINISTER}]
                        [--public] [--created-after CREATED_AFTER]
                        [--created-before CREATED_BEFORE] [--region REGION]

Finds projects subject to the given search parameters. Use the --public flag
to list all public projects.

optional arguments:
  -h, --help            show this help message and exit
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --json                Display return value in JSON
  --delimiter [DELIMITER], --delim [DELIMITER]
                        Always use exactly one of DELIMITER to separate fields
                        to be printed; if no delimiter is provided with this
                        flag, TAB will be used
  --env-help            Display help message for overriding environment
                        variables
  --property KEY[=VALUE]
                        Key-value pair of a property or simply a property key;
                        if only a key is provided, matches a result that has
                        the key with any value; repeat as necessary, e.g. "--
                        property key1=val1 --property key2"
  --tag TAG             Tag to match; repeat as necessary, e.g. "--tag tag1
                        --tag tag2" will require both tags
  --phi {true,false}    If set to true, only projects that contain PHI data
                        will be retrieved. If set to false, only projects that
                        do not contain PHI data will be retrieved.
  --name NAME           Name of the project
  --level {VIEW,UPLOAD,CONTRIBUTE,ADMINISTER}
                        Minimum level of permissions expected
  --public              Include ONLY public projects (will automatically set
                        --level to VIEW)
  --created-after CREATED_AFTER
                        Date (e.g. 2012-01-01) or integer timestamp after
                        which the project was created (negative number means
                        ms in the past, or use suffix s, m, h, d, w, M, y)
  --created-before CREATED_BEFORE
                        Date (e.g. 2012-01-01) or integer timestamp after
                        which the project was created (negative number means
                        ms in the past, or use suffix s, m, h, d, w, M, y)
  --region REGION       Restrict the search to the provided region

dx find projects: error: argument --phi: expected one argument
ok
test_dx_find_public_projects (test_dxclient.TestDXClientFind) ... skipped 'skipping test that depends on a public project only defined in the nucleus integration tests'
test_find_analyses_run_by_jobs (test_dxclient.TestDXClientFind) ... skipped 'skipping test that would run a job'
test_find_executions (test_dxclient.TestDXClientFind) ... skipped 'skipping test that would run a job'
test_find_orgs (test_dxclient.TestDXClientFind) ... skipped 'skipping test that requires presence of test org'
test_find_orgs_format (test_dxclient.TestDXClientFind) ... skipped 'skipping test that requires presence of test org'
test_dx_find_org_apps (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_members (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_members_format (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_members_negative (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_projects (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_projects_created (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_projects_format (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_projects_invalid (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_projects_phi (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_find_org_projects_public (test_dxclient.TestDXClientFindInOrg) ... skipped 'skipping test that requires presence of test org, project, and user'
test_dx_run_global_workflow (test_dxclient.TestDXClientGlobalWorkflow) ... skipped 'skipping test that would run build global workflows and run jobs'
test_dx_update_global_workflow (test_dxclient.TestDXClientGlobalWorkflow) ... skipped 'skipping test that would build global workflows'
test_add_membership_default (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_add_membership_negative (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_add_membership_with_options (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_add_update_remove_membership (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_add_update_remove_membership_with_user_id (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_remove_membership_default (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_remove_membership_interactive_conf (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_remove_membership_interactive_conf_format (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_remove_membership_negative (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_update_membership_negative (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_update_membership_positive (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_update_membership_to_member_without_membership_flags (test_dxclient.TestDXClientMembership) ... skipped 'skipping tests that require presence of test user and org'
test_dx_create_new_project_with_bill_to (test_dxclient.TestDXClientNewProject) ... skipped 'skipping test that requires presence of test org'
test_dx_new_project_with_region (test_dxclient.TestDXClientNewProject) ... /home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:5688: DeprecationWarning: Please use assertRaisesRegex instead.
  with self.assertRaisesRegexp(subprocess.CalledProcessError, "InvalidInput"):
ok
test_create_user_account_and_invite_to_org (test_dxclient.TestDXClientNewUser) ... skipped 'skipping tests that require presence of test org and running authserver'
test_create_user_account_and_set_bill_to (test_dxclient.TestDXClientNewUser) ... skipped 'skipping tests that require presence of test org and running authserver'
test_create_user_account_and_set_bill_to_negative (test_dxclient.TestDXClientNewUser) ... skipped 'skipping tests that require presence of test org and running authserver'
test_create_user_account_and_set_token_duration (test_dxclient.TestDXClientNewUser) ... skipped 'skipping tests that require presence of test org and running authserver'
test_create_user_account_and_set_token_duration_negative (test_dxclient.TestDXClientNewUser) ... skipped 'skipping tests that require presence of test org and running authserver'
test_create_user_account_only (test_dxclient.TestDXClientNewUser) ... skipped 'skipping tests that require presence of test org and running authserver'
test_self_signup_negative (test_dxclient.TestDXClientNewUser) ... skipped 'skipping tests that require presence of test org and running authserver'
test_create_new_org (test_dxclient.TestDXClientOrg) ... skipped 'skipping tests that require org creation'
test_create_new_org_negative (test_dxclient.TestDXClientOrg) ... skipped 'skipping tests that require org creation'
test_create_new_org_prompt (test_dxclient.TestDXClientOrg) ... skipped 'skipping tests that require org creation'
test_org_update (test_dxclient.TestDXClientOrg) ... skipped 'skipping tests that require org creation'
test_org_update_format (test_dxclient.TestDXClientOrg) ... skipped 'skipping tests that require org creation'
test_org_update_negative (test_dxclient.TestDXClientOrg) ... skipped 'skipping tests that require org creation'
test_bundledDepends_name_with_whitespaces (test_dxclient.TestDXClientRun) ... skipped 'skipping test that would run jobs'
test_dx_describe_job_with_resolved_jbors (test_dxclient.TestDXClientRun) ... skipped 'skipping tests that would run jobs'
test_dx_resolve (test_dxclient.TestDXClientRun) ... ok
test_dx_resolve_check_resolution_needed (test_dxclient.TestDXClientRun) ... /home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:2563: DeprecationWarning: Please use assertRaisesRegex instead.
  with self.assertRaisesRegexp(ResolutionError, "The entity record-\d+ could not be found"):
ok
test_dx_run_applet_with_input_spec (test_dxclient.TestDXClientRun) ... ok
test_dx_run_applet_without_input_spec (test_dxclient.TestDXClientRun) ... ok
test_dx_run_clone (test_dxclient.TestDXClientRun) ... ok
test_dx_run_depends_on_failure (test_dxclient.TestDXClientRun) ...
$ dx cd project-FKqvyv00QpKg9BgjPbyVKqPq:/

$ dx new project --brief --region aws:us-east-1 ProjectInUSEast
project-FKqvyvQ0v3Kq9ykx1XqKGJ69

$ dx new project --brief --region aws:not-a-region InvalidRegionProject
dxpy.exceptions.InvalidInput: Expected key "region" of input to be a valid region, but got: aws:not-a-region, code 422. Request Time=1538772854.1956675, Request ID=1538772854460-789961

$ dx new project other --brief
project-FKqvyyQ05J9jq92B1XYG3f2j

$ dx cd project-FKqvyyQ071QKjkqFPf8Kkfp1:/

$ dx run applet-FKqvyyj071Q1Vz2vPbKb72ZB -iinput0=resolve_record0 -iinput1=resolve_record1 -iinput2=glob_resolve* -iint0=5 -iint1=15 --brief -y
job-FKqvyzQ071QKG7FP1Vb1bXyj

$ dx run applet-FKqvyyj071Q1Vz2vPbKb72ZB -iinput0=resolve_record0 -iinput0=25 -iinput0=glob_resolve* -iinput0=resolve_record1 -iinput1=record-FKqvyyj071Q9kQyPPfJjb8YK -iinput1=50 -iinput1=resolve_record1 --brief -y
job-FKqvz00071QKG7FP1Vb1bXyp

$ dx run applet-FKqvyyj071Q1Vz2vPbKb72ZB --brief -y -iinput0=cannot_resolve -iinput1=resolve_record0 -iint0=10
job-FKqvz0Q071Q8q92B1XYG3f2p

$ dx run applet-FKqvyyj071Q1Vz2vPbKb72ZB --brief -y -iinput0=glob_cannot_resolve*
job-FKqvz10071Q8JkY81VjxgB8b

$ dx run applet-FKqvyyj071Q1Vz2vPbKb72ZB --brief -y -iinput0=resolve_record0
job-FKqvz1Q071Q8JkY81VjxgB8g

$ dx run applet-FKqvyyj071Q1Vz2vPbKb72ZB --brief -y -iinput0=resolve_record*
job-FKqvz20071Q8JkY81VjxgB8k

$ dx run applet-FKqvz20071Q79BgjPbyVKqPy --brief -y -iinput0=resolve_record1 -iint0=10 -iinput1=resolve_record2 -iinput1=resolve_record1 -iint1=0 -iint1=1 -iint1=2 -ibool0=true -ibool0=0
job-FKqvz2Q071Q8JkY81VjxgB8q

$ dx new workflow myworkflow --output-folder /foo --brief
workflow-FKqvz2j071QKG7FP1Vb1bXyq

$ dx run workflow-FKqvz2j071QKG7FP1Vb1bXyq -istage-FKqvz2j071QJ6fP0PbFbK3xg.input0=myrecord -istage-FKqvz2j071QJ6fP0PbFbK3xg.int0=77 -y --brief
analysis-FKqvz38071QJ3k5Y1VygK9kx

$ dx new project other --brief
project-FKqvz5Q03388v4f81Y9jpZgG

$ dx cd project-FKqvz5Q0672G093BPbZkY9bp:/

$ dx new project other --brief
project-FKqvz8j04JVjq92B1XYG3f2q

$ dx cd project-FKqvz8j01GbjJkY81VjxgB8v:/

$ dx run applet-FKqvz9001Gbjv4f81Y9jpZgJ -iint0=16 -istring0=input_string -irecord0=record-FKqvz9001GbqF33K1Y3xP38Z --brief
job-FKqvz9Q01Gbjv4f81Y9jpZgQ

$ dx run applet-FKqvz9001Gbjv4f81Y9jpZgJ -iint0:int=16 -istring0:string=input_string -irecord0:record=record-FKqvz9001GbqF33K1Y3xP38Z --brief
job-FKqvzB001Gbjv4f81Y9jpZgX

$ dx run applet-FKqvz9001Gbjv4f81Y9jpZgJ -iint0=job-FKqvzB001Gbjv4f81Y9jpZgX:outint -istring0=job-FKqvzB001Gbjv4f81Y9jpZgX:outstring -irecord0=job-FKqvzB001Gbjv4f81Y9jpZgX:outrecord --brief
job-FKqvzBQ01Gbjv4f81Y9jpZgZ

$ dx run applet-FKqvz9001Gbjv4f81Y9jpZgJ -iint0=16 -istring0=input_string -irecord0=my_record --brief
job-FKqvzF001GbqF33K1Y3xP38g

$ dx run applet-FKqvz9001Gbjv4f81Y9jpZgJ -iint0=16 -istring0=input_string -irecord0=record-FKqvz9001GbqF33K1Y3xP38Z -iint1=32 -istring1=second_input_string -irecord1=record-FKqvzF001Gbq9ykx1XqKGJ6G --brief
job-FKqvzFQ01GbjJkY81VjxgB8y

$ dx run applet-FKqvz9001Gbjv4f81Y9jpZgJ -iint0=32 -iint1=job-FKqvzFQ01GbjJkY81VjxgB8y:outint -istring0=second_input_string -istring1=job-FKqvzFQ01GbjJkY81VjxgB8y:outstring -irecord0=record-FKqvzF001Gbq9ykx1XqKGJ6G -irecord1=job-FKqvzFQ01GbjJkY81VjxgB8y:outrecord --brief
job-FKqvzG001Gbx3k5Y1VygK9p2

$ dx new project other --brief
project-FKqvzK8013G8JkY81VjxgB8z

$ dx cd project-FKqvzKQ0J7v11fbZ1X5xp1GF:/

$ dx run applet-FKqvzKj0J7vF9ykx1XqKGJ6K -iint0=16 -istring0=input_string -irecord0=record-FKqvzKQ0J7v8v4f81Y9jpZgb --brief
job-FKqvzP80J7vKG7FP1Vb1bXyy

$ dx run applet-FKqvzKj0J7vF9ykx1XqKGJ6K -iint0:int=16 -istring0:string=input_string -irecord0:record=record-FKqvzKQ0J7v8v4f81Y9jpZgb --brief
job-FKqvzPj0J7v11fbZ1X5xp1GJ

$ dx run applet-FKqvzKj0J7vF9ykx1XqKGJ6K -iint0=job-FKqvzPj0J7v11fbZ1X5xp1GJ:outint -istring0=job-FKqvzPj0J7v11fbZ1X5xp1GJ:outstring -irecord0=job-FKqvzPj0J7v11fbZ1X5xp1GJ:outrecord --brief
job-FKqvzQ80J7v11fbZ1X5xp1GP

$ dx run applet-FKqvzKj0J7vF9ykx1XqKGJ6K -irecord0=record-FKqvzKQ0J7v8v4f81Y9jpZgb -irecord1=job-FKqvzPj0J7v11fbZ1X5xp1GJ:outrecord --brief
job-FKqvzQj0J7vKG7FP1Vb1bXz0

$ dx run applet-FKqvzKj0J7vF9ykx1XqKGJ6K -irecord0=record-FKqvzKQ0J7v8v4f81Y9jpZgb -irecord0=job-FKqvzPj0J7v11fbZ1X5xp1GJ:outrecord --brief
job-FKqvzV80J7v8q92B1XYG3f2z

$ dx run applet-FKqvzKj0J7vF9ykx1XqKGJ6K -irecord0=job-FKqvzPj0J7v11fbZ1X5xp1GJ:outrecord -irecord0=record-FKqvzKQ0J7v8v4f81Y9jpZgb --brief
job-FKqvzVj0J7v8q92B1XYG3f31

$ dx run applet-FKqvzKj0J7vF9ykx1XqKGJ6K -irecord0=my_record --brief
job-FKqvzX80J7v8q92B1XYG3f33

$ dx new project other --brief
project-FKqvzZ80XxpF9ykx1XqKGJ6Q

$ dx cd project-FKqvzZ80BPbjq92B1XYG3f34:/

$ dx run applet-FKqvzZQ0BPbV1fbZ1X5xp1GQ -inumber=32 --name jobname --folder /output --instance-type mem2_hdd2_x2 --tag Î¨ --tag $hello.world --property Î£_1^n=n --property $hello.=world --priority normal --brief -y
job-FKqvzb00BPbjq92B1XYG3f36

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y
job-FKqvzbQ0BPbV1fbZ1X5xp1GY

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y applet-FKqvzZQ0BPbx3k5Y1VygK9p3
job-FKqvzf00BPbyG7FP1Vb1bXz2

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --name newname
job-FKqvzfQ0BPbyG7FP1Vb1bXz4

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --tag new_tag --tag second_new_tag
job-FKqvzg00BPbyG7FP1Vb1bXz6

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --property foo=bar --property baz=quux
job-FKqvzgQ0BPbyG7FP1Vb1bXz8

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --priority high
job-FKqvzj00BPbjv4f81Y9jpZgj

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --folder /otherfolder
job-FKqvzjQ0BPbjv4f81Y9jpZgp

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --project project-FKqvzZ80XxpF9ykx1XqKGJ6Q
job-FKqvzk00Xxp8JkY81VjxgB93

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --folder project-FKqvzZ80XxpF9ykx1XqKGJ6Q:
job-FKqvzkQ0XxpF9ykx1XqKGJ6X

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y -inumber=42
job-FKqvzp00BPbjv4f81Y9jpZgv

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y -inumber2=42
job-FKqvzpQ0BPbqF33K1Y3xP38q

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --input-json '{"number2": 42}'
job-FKqvzq00BPbyG7FP1Vb1bXzB

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --instance-type mem2_hdd2_x1
job-FKqvzqQ0BPbjJkY81VjxgB95

$ dx run --clone job-FKqvzb00BPbjq92B1XYG3f36 --brief -y --instance-type '{"some_ep": "mem2_hdd2_x1", "some_other_ep": "mem2_hdd2_x4"}'
job-FKqvzv00BPbq9ykx1XqKGJ6Z

$ dx run applet-FKqvzZQ0BPbV1fbZ1X5xp1GQ --instance-type '{"some_ep": "mem2_hdd2_x1"}' --brief -y
job-FKqvzv80BPbqF33K1Y3xP38x

$ dx run --clone job-FKqvzv80BPbqF33K1Y3xP38x --brief -y --instance-type mem2_hdd2_x2
job-FKqvzvj0BPbqF33K1Y3xP38z

$ dx run --clone job-FKqvzv80BPbqF33K1Y3xP38x --brief -y --instance-type '{"some_other_ep": "mem2_hdd2_x2"}'
job-FKqvzx80BPbqF33K1Y3xP391

$ dx run --clone job-FKqvzv80BPbqF33K1Y3xP38x --brief -y --instance-type '{"some_ep": "mem2_hdd2_x2"}'
job-FKqvzxj0BPbqF33K1Y3xP393

$ dx new project other --brief
project-FKqx00j02fx11fbZ1X5xp1GZ

$ dx cd project-FKqx00j09fjx3k5Y1VygK9p5:/

$ dx run applet-FKqx01009fjqF33K1Y3xP394 --brief -y
job-FKqx01Q09fjyG7FP1Vb1bXzG

$ dx run applet-FKqx01009fjqF33K1Y3xP394 --brief -y
job-FKqx02009fjjJkY81VjxgB99

$ dx run applet-FKqx01009fjqF33K1Y3xP394 --brief -y --depends-on job-FKqx02009fjjJkY81VjxgB99 --depends-on
usage: dx run [-i INPUT] [-j INPUT_JSON] [-f FILENAME] [--brief | --verbose]
              [--env-help] [--extra-args EXTRA_ARGS]
              [--instance-type INSTANCE_TYPE_OR_MAPPING]
              [--instance-type-help] [--property KEY=VALUE] [--tag TAG]
              [-d DEPENDS_ON] [-h] [--clone CLONE] [--alias ALIAS]
              [--destination PATH] [--batch-folders] [--project PROJECT]
              [--stage-output-folder STAGE_ID FOLDER]
              [--stage-relative-output-folder STAGE_ID FOLDER]
              [--rerun-stage STAGE_ID] [--name NAME]
              [--delay-workspace-destruction] [--priority {normal,high}] [-y]
              [--wait] [--watch] [--allow-ssh [ADDRESS]] [--ssh]
              [--ssh-proxy <address>:<port>]
              [--debug-on {AppError,AppInternalError,ExecutionError,All}]
              [--ignore-reuse] [--batch-tsv FILE] [--input-help]
              [executable]

Run an applet, app, or workflow.  To see a list of executables you can run,
hit <TAB> twice after "dx run" or run "dx find apps" or "dx find
globalworkflows" to see a list of available apps and global workflows.

If any inputs are required but not specified, an interactive mode for
selecting inputs will be launched.  Inputs can be set in multiple ways.  Run
"dx run --input-help" for more details.

Run "dx run --instance-type-help" to see a list of specifications for
computers available to run executables.

positional arguments:
  executable            Name or ID of an applet, app, or workflow to run; must
                        be provided if --clone is not set

optional arguments:
  -i INPUT, --input INPUT
                        An input to be added using "<input
                        name>[:<class>]=<input value>" (provide "class" if
                        there is no input spec; it can be any job IO class,
                        e.g. "string", "array:string", or "array"; if "class"
                        is "array" or not specified, the value will be
                        attempted to be parsed as JSON and is otherwise
                        treated as a string)
  -j INPUT_JSON, --input-json INPUT_JSON
                        The full input JSON (keys=input field names,
                        values=input field values)
  -f FILENAME, --input-json-file FILENAME
                        Load input JSON from FILENAME ("-" to use stdin)
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --env-help            Display help message for overriding environment
                        variables
  --extra-args EXTRA_ARGS
                        Arguments (in JSON format) to pass to the underlying
                        API method, overriding the default settings
  --instance-type INSTANCE_TYPE_OR_MAPPING
                        Specify instance type(s) for jobs this executable will
                        run; see --instance-type-help for more details
  --instance-type-help  Print help for specifying instance types
  --property KEY=VALUE  Key-value pair to add as a property; repeat as
                        necessary,
                         e.g. "--property key1=val1 --property key2=val2"
  --tag TAG             Tag for the resulting execution; repeat as necessary,
                         e.g. "--tag tag1 --tag tag2"
  -d DEPENDS_ON, --depends-on DEPENDS_ON
                        ID of job, analysis, or data object that must be in
                        the "done" or "closed" state, as appropriate, before
                        this executable can be run; repeat as necessary (e.g.
                        "--depends-on id1 ... --depends-on idN"). Cannot be
                        supplied when running workflows
  -h, --help            show this help message and exit
  --clone CLONE         Job or analysis ID or name from which to use as
                        default options (will use the exact same executable
                        ID, destination project and folder, job input,
                        instance type requests, and a similar name unless
                        explicitly overridden by command-line arguments)
  --alias ALIAS, --version ALIAS
                        Alias (tag) or version of the app to run (default:
                        "default" if an app)
  --destination PATH, --folder PATH
                        The full project:folder path in which to output the
                        results.  By default, the current working directory
                        will be used.
  --batch-folders       Output results to separate folders, one per batch,
                        using batch ID as the name of the output folder. The
                        batch output folder location will be relative to the
                        path set in --destination
  --project PROJECT     Project name or ID in which to run the executable.
                        This can also be specified together with the output
                        folder in --destination.
  --stage-output-folder STAGE_ID FOLDER
                        A stage identifier (ID, name, or index), and a folder
                        path to use as its output folder
  --stage-relative-output-folder STAGE_ID FOLDER
                        A stage identifier (ID, name, or index), and a
                        relative folder path to the workflow output folder to
                        use as the output folder
  --rerun-stage STAGE_ID
                        A stage (using its ID, name, or index) to rerun, or
                        "*" to indicate all stages should be rerun; repeat as
                        necessary
  --name NAME           Name for the job (default is the app or applet name)
  --delay-workspace-destruction
                        Whether to keep the job's temporary workspace around
                        for debugging purposes for 3 days after it succeeds or
                        fails
  --priority {normal,high}
                        Request a scheduling priority for all resulting jobs
  -y, --yes             Do not ask for confirmation
  --wait                Wait until the job is done before returning
  --watch               Watch the job after launching it; sets --priority high
  --allow-ssh [ADDRESS]
                        Configure the job to allow SSH access; sets --priority
                        high. If an argument is supplied, it is interpreted as
                        an IP or hostname mask to allow connections from, e.g.
                        "--allow-ssh 1.2.3.4 --allow-ssh berkeley.edu"
  --ssh                 Configure the job to allow SSH access and connect to
                        it after launching; sets --priority high
  --ssh-proxy <address>:<port>
                        SSH connect via proxy, argument supplied is used as
                        the proxy address and port
  --debug-on {AppError,AppInternalError,ExecutionError,All}
                        Configure the job to hold for debugging when any of
                        the listed errors occur
  --ignore-reuse        Disable job reuse for execution
  --batch-tsv FILE      A file in tab separated value (tsv) format, with a
                        subset of the executable input arguments. A job will
                        be launched for each table row.
  --input-help          Print help and examples for how to specify inputs

dx run: error: argument -d/--depends-on: expected one argument

$ dx run applet-FKqx01009fjqF33K1Y3xP394 -d --depends-on job-FKqx01Q09fjyG7FP1Vb1bXzG --brief -y
usage: dx run [-i INPUT] [-j INPUT_JSON] [-f FILENAME] [--brief | --verbose]
              [--env-help] [--extra-args EXTRA_ARGS]
              [--instance-type INSTANCE_TYPE_OR_MAPPING]
              [--instance-type-help] [--property KEY=VALUE] [--tag TAG]
              [-d DEPENDS_ON] [-h] [--clone CLONE] [--alias ALIAS]
              [--destination PATH] [--batch-folders] [--project PROJECT]
              [--stage-output-folder STAGE_ID FOLDER]
              [--stage-relative-output-folder STAGE_ID FOLDER]
              [--rerun-stage STAGE_ID] [--name NAME]
              [--delay-workspace-destruction] [--priority {normal,high}] [-y]
              [--wait] [--watch] [--allow-ssh [ADDRESS]] [--ssh]
              [--ssh-proxy <address>:<port>]
              [--debug-on {AppError,AppInternalError,ExecutionError,All}]
              [--ignore-reuse] [--batch-tsv FILE] [--input-help]
              [executable]

Run an applet, app, or workflow.  To see a list of executables you can run,
hit <TAB> twice after "dx run" or run "dx find apps" or "dx find
globalworkflows" to see a list of available apps and global workflows.

If any inputs are required but not specified, an interactive mode for
selecting inputs will be launched.  Inputs can be set in multiple ways.  Run
"dx run --input-help" for more details.

Run "dx run --instance-type-help" to see a list of specifications for
computers available to run executables.

positional arguments:
  executable            Name or ID of an applet, app, or workflow to run; must
                        be provided if --clone is not set

optional arguments:
  -i INPUT, --input INPUT
                        An input to be added using "<input
                        name>[:<class>]=<input value>" (provide "class" if
                        there is no input spec; it can be any job IO class,
                        e.g. "string", "array:string", or "array"; if "class"
                        is "array" or not specified, the value will be
                        attempted to be parsed as JSON and is otherwise
                        treated as a string)
  -j INPUT_JSON, --input-json INPUT_JSON
                        The full input JSON (keys=input field names,
                        values=input field values)
  -f FILENAME, --input-json-file FILENAME
                        Load input JSON from FILENAME ("-" to use stdin)
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --env-help            Display help message for overriding environment
                        variables
  --extra-args EXTRA_ARGS
                        Arguments (in JSON format) to pass to the underlying
                        API method, overriding the default settings
  --instance-type INSTANCE_TYPE_OR_MAPPING
                        Specify instance type(s) for jobs this executable will
                        run; see --instance-type-help for more details
  --instance-type-help  Print help for specifying instance types
  --property KEY=VALUE  Key-value pair to add as a property; repeat as
                        necessary,
                         e.g. "--property key1=val1 --property key2=val2"
  --tag TAG             Tag for the resulting execution; repeat as necessary,
                         e.g. "--tag tag1 --tag tag2"
  -d DEPENDS_ON, --depends-on DEPENDS_ON
                        ID of job, analysis, or data object that must be in
                        the "done" or "closed" state, as appropriate, before
                        this executable can be run; repeat as necessary (e.g.
                        "--depends-on id1 ... --depends-on idN"). Cannot be
                        supplied when running workflows
  -h, --help            show this help message and exit
  --clone CLONE         Job or analysis ID or name from which to use as
                        default options (will use the exact same executable
                        ID, destination project and folder, job input,
                        instance type requests, and a similar name unless
                        explicitly overridden by command-line arguments)
  --alias ALIAS, --version ALIAS
                        Alias (tag) or version of the app to run (default:
                        "default" if an app)
  --destination PATH, --folder PATH
                        The full project:folder path in which to output the
                        results.  By default, the current working directory
                        will be used.
  --batch-folders       Output results to separate folders, one per batch,
                        using batch ID as the name of the output folder. The
                        batch output folder location will be relative to the
                        path set in --destination
  --project PROJECT     Project name or ID in which to run the executable.
                        This can also be specified together with the output
                        folder in --destination.
  --stage-output-folder STAGE_ID FOLDER
                        A stage identifier (ID, name, or index), and a folder
                        path to use as its output folder
  --stage-relative-output-folder STAGE_ID FOLDER
                        A stage identifier (ID, name, or index), and a
                        relative folder path to the workflow output folder to
                        use as the output folder
  --rerun-stage STAGE_ID
                        A stage (using its ID, name, or index) to rerun, or
                        "*" to indicate all stages should be rerun; repeat as
                        necessary
  --name NAME           Name for the job (default is the app or applet name)
  --delay-workspace-destruction
                        Whether to keep the job's temporary workspace around
                        for debugging purposes for 3 days after it succeeds or
                        fails
  --priority {normal,high}
                        Request a scheduling priority for all resulting jobs
  -y, --yes             Do not ask for confirmation
  --wait                Wait until the job is done before returning
  --watch               Watch the job after launching it; sets --priority high
  --allow-ssh [ADDRESS]
                        Configure the job to allow SSH access; sets --priority
                        high. If an argument is supplied, it is interpreted as
                        an IP or hostname mask to allow connections from, e.g.
                        "--allow-ssh 1.2.3.4 --allow-ssh berkeley.edu"
  --ssh                 Configure the job to allow SSH access and connect to
                        it after launching; sets --priority high
  --ssh-proxy <address>:<port>
                        SSH connect via proxy, argument supplied is used as
                        the proxy address and port
  --debug-on {AppError,AppInternalError,ExecutionError,All}
                        Configure the job to hold for debugging when any of
                        the listed errors occur
  --ignore-reuse        Disable job reuse for execution
  --batch-tsv FILE      A file in tab separated value (tsv) format, with a
                        subset of the executable input arguments. A job will
                        be launched for each table row.
  --input-help          Print help and examples for how to specify inputs

dx run: error: argument -d/--depends-on: expected one argument

$ dx run applet-FKqx01009fjqF33K1Y3xP394 --brief -y -d job-FKqx02009fjjJkY81VjxgB99 job-FKqx01Q09fjyG7FP1Vb1bXzG
usage: dx [-h] [--version] command ...

DNAnexus Command-Line Client, API v1.0.0, client v0.265.0-35-ga1d50f5

dx is a command-line client for interacting with the DNAnexus platform.  You
can log in, navigate, upload, organize and share your data, launch analyses,
and more.  For a quick tour of what the tool can do, see

  https://wiki.dnanexus.com/Command-Line-Client/Quickstart

For a breakdown of dx commands by category, run "dx help".

dx exits with exit code 3 if invalid input is provided or an invalid operation
is requested, and exit code 1 if an internal error is encountered.  The latter
usually indicate bugs in dx; please report them at

  https://github.com/dnanexus/dx-toolkit/issues

optional arguments:
  -h, --help  show this help message and exit
  --env-help  Display help message for overriding environment
              variables
  --version   show program's version number and exit

dx: error: unrecognized arguments: job-FKqx01Q09fjyG7FP1Vb1bXzG
ok
test_dx_run_depends_on_success (test_dxclient.TestDXClientRun) ... ok
test_dx_run_disallow_project_and_folder (test_dxclient.TestDXClientRun) ... /home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:2182: DeprecationWarning: Please use assertRaisesRegex instead.
  with self.assertRaisesRegexp(subprocess.CalledProcessError, "Options --project and --folder/--destination cannot be specified together.\nIf specifying both a project and a folder, please include them in the --folder option."):
ok
test_dx_run_extra_args (test_dxclient.TestDXClientRun) ... ok
test_dx_run_jbor_array_ref (test_dxclient.TestDXClientRun) ... skipped 'skipping tests that would run jobs'
test_dx_run_no_hidden_executables (test_dxclient.TestDXClientRun) ... ok
test_dx_run_priority (test_dxclient.TestDXClientRun) ... skipped 'skipping tests that would run jobs'
test_dx_run_ssh_no_config (test_dxclient.TestDXClientRun) ... ERROR
test_dx_run_tags_and_properties (test_dxclient.TestDXClientRun) ... ok
test_bill_non_existent_user (test_dxclient.TestDXClientUpdateProject) ... ok
test_update_booleans (test_dxclient.TestDXClientUpdateProject) ... /usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 37596), raddr=('54.175.190.114', 443)>
  self._sock = None
ok
test_update_multiple_items (test_dxclient.TestDXClientUpdateProject) ... ok
test_update_project_by_name (test_dxclient.TestDXClientUpdateProject) ... ok
test_update_strings (test_dxclient.TestDXClientUpdateProject) ...
$ dx run applet-FKqx01009fjqF33K1Y3xP394 --brief -y -d not_a_valid_id
dxpy.exceptions.ResourceNotFound: "not_a_valid_id" is not a recognized ID, code 404. Request Time=1538773002.8900375, Request ID=1538773002915-142516

$ dx new workflow myworkflow --output-folder /foo --brief
workflow-FKqx02j09fjjq92B1XYG3f37

$ dx run workflow-FKqx02j09fjjq92B1XYG3f37 -d job-FKqx01Q09fjyG7FP1Vb1bXzG -y --brief
dxpy.cli.parsers.DXParserError: -d/--depends-on cannot be supplied when running workflows.

$ dx run myworkflow -d job-FKqx01Q09fjyG7FP1Vb1bXzG -y --brief
dxpy.cli.parsers.DXParserError: -d/--depends-on cannot be supplied when running workflows.

$ dx new project other --brief
project-FKqx06001JBFF33K1Y3xP396

$ dx cd project-FKqx060084Z8v4f81Y9jpZgz:/

$ dx run applet-FKqx068084Z8JkY81VjxgB9B --brief -y
job-FKqx06j084Z8v4f81Y9jpZj1

$ dx run applet-FKqx068084Z8JkY81VjxgB9B --brief -y
job-FKqx078084ZJ3k5Y1VygK9p9

$ dx run applet-FKqx068084Z8JkY81VjxgB9B --brief -y -d job-FKqx06j084Z8v4f81Y9jpZj1
job-FKqx07j084Z11fbZ1X5xp1Gg

$ dx run applet-FKqx068084Z8JkY81VjxgB9B -d job-FKqx06j084Z8v4f81Y9jpZj1 --depends-on record-FKqx06j084ZF9ykx1XqKGJ6b --brief -y
job-FKqx088084Z8v4f81Y9jpZj3

$ dx new project other --brief
project-FKqx0BQ0JPx11fbZ1X5xp1Gj

$ dx cd project-FKqx0BQ02ZpyG7FP1Vb1bXzJ:/

$ dx run bogusapplet --project project-bogus --folder bogusfolder
dxpy.exceptions.DXCLIError: Options --project and --folder/--destination cannot be specified together.
If specifying both a project and a folder, please include them in the --folder option.

$ dx new project other --brief
project-FKqx0GQ08Vkjq92B1XYG3f39

$ dx cd project-FKqx0Gj0yVqjJkY81VjxgB9G:/

$ dx run applet-FKqx0J00yVqx3k5Y1VygK9pB -inumber=32 --name overwritten_name --delay-workspace-destruction --brief -y --extra-args '{"input": {"second": true}, "name": "new_name"}'
job-FKqx0J80yVqjJkY81VjxgB9K

$ dx run applet-FKqx0J00yVqx3k5Y1VygK9pB --extra-args not-a-JSON-string
dxpy.cli.parsers.DXParserError: Value given for --extra-args could not be parsed as JSON

$ dx new project other --brief
project-FKqx0PQ02vgJ3k5Y1VygK9pG

$ dx cd project-FKqx0PQ0bJFqF33K1Y3xP397:/

$ dx describe hidden_applet
Result 1:
ID                  applet-FKqx0Pj0bJFjq92B1XYG3f3B
Class               applet
Project             project-FKqx0PQ0bJFqF33K1Y3xP397
Folder              /
Name                hidden_applet
State               closed
Visibility          hidden
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 13:57:35 2018
Created by          orodeh
Last modified       Fri Oct  5 13:57:35 2018
Title
Summary
Access              {"network": []}
API version         1.0.0
Input Spec          -
Output Spec         -
Interpreter         bash
Sys Requirements    {}
ignoreReuse         false

$ dx run hidden_applet
dxpy.utils.resolver.ResolutionError: Unable to resolve "hidden_applet" to a data object or folder name in '/'

$ dx run applet-FKqx0Pj0bJFjq92B1XYG3f3B -y

Using input JSON:
{}

Calling applet-FKqx0Pj0bJFjq92B1XYG3f3B with output destination
  project-FKqx0PQ0bJFqF33K1Y3xP397:/

Job ID: job-FKqx0Qj0bJFx3k5Y1VygK9pK

$ dx run hidden_workflow
dxpy.utils.resolver.ResolutionError: Unable to resolve "hidden_workflow" to a data object or folder name in '/'

$ dx run workflow-FKqx0Qj0bJFqF33K1Y3xP398 -y

Using input JSON:
{}

Calling workflow-FKqx0Qj0bJFqF33K1Y3xP398 with output destination
  project-FKqx0PQ0bJFqF33K1Y3xP397:/

Analysis ID: analysis-FKqx0X00bJFyG7FP1Vb1bXzP

$ dx new project other --brief
project-FKqx0Z80JpKjJkY81VjxgB9Q

$ dx cd project-FKqx0Z80KQxV1fbZ1X5xp1Gy:/

$ dx new project other --brief
project-FKqx0gQ0Xgxjv4f81Y9jpZj6

$ dx cd project-FKqx0gQ0bf0jJkY81VjxgB9Y:/

$ dx run applet-FKqx0gj0bf0qF33K1Y3xP39G -inumber=32 --brief -y --property '$my.prop'='$hello.world' --property 'secoÐ¸dprop'='Î£2,n' --property 'Ñhird prop'='stuff' --tag Î£1=n --tag helloo0 --tag ÏÏ
job-FKqx0j80bf0V1fbZ1X5xp1J0

$ dx tag job-FKqx0j80bf0V1fbZ1X5xp1J0 foo bar foo

$ dx set_properties job-FKqx0j80bf0V1fbZ1X5xp1J0 foo=bar Î£_1^n=n

$ dx describe job-FKqx0j80bf0V1fbZ1X5xp1J0 --delim ' '
Result 1:
ID job-FKqx0j80bf0V1fbZ1X5xp1J0
Class job
Job name applet-FKqx0gj0bf0qF33K1Y3xP39G
Executable name applet-FKqx0gj0bf0qF33K1Y3xP39G
Project context project-FKqx0gQ0bf0jJkY81VjxgB9Y
Region aws:us-east-1
Billed to orodeh
Workspace container-FKqx0j80QJB40K70FVz5K107
Applet applet-FKqx0gj0bf0qF33K1Y3xP39G
Instance Type mem2_hdd2_x2
Priority high
State runnable
Root execution job-FKqx0j80bf0V1fbZ1X5xp1J0
Origin job job-FKqx0j80bf0V1fbZ1X5xp1J0
Parent job -
Function main
Input number=32
Output -
Output folder /
Launched by orodeh
Created Fri Oct  5 13:58:08 2018
Last modified Fri Oct  5 13:58:11 2018
Depends on -
Sys Requirements {}
Tags Î£1=n helloo0 ÏÏ foo bar
Properties secoÐ¸dprop=Î£2,n foo=bar $my.prop=$hello.world Î£_1^n=n Ñhird prop=stuff
failureCounts {}
workerReuseDeadlineRunTime {"at": -1, "waitTime": -1, "state": "reuse-off"}
singleContext false
executionPolicy {"restartOn": {"JMInternalError": 1, "UnresponsiveWorker": 2, "ExecutionError": 1}}
debug {}
ignoreReuse false
trueInstanceType "dx_m1.large"
networkAccess []

$ dx untag job-FKqx0j80bf0V1fbZ1X5xp1J0 foo

$ dx unset_properties job-FKqx0j80bf0V1fbZ1X5xp1J0 Î£_1^n

$ dx describe job-FKqx0j80bf0V1fbZ1X5xp1J0 --json
{
    "runInput": {
        "number": 32
    },
    "output": null,
    "stateTransitions": [
        {
            "newState": "runnable",
            "setAt": 1538773089341
        }
    ],
    "executionPolicy": {
        "restartOn": {
            "JMInternalError": 1,
            "UnresponsiveWorker": 2,
            "ExecutionError": 1
        }
    },
    "workerReuseDeadlineRunTime": {
        "state": "reuse-off",
        "at": -1,
        "waitTime": -1
    },
    "launchedBy": "user-orodeh",
    "region": "aws:us-east-1",
    "rootExecution": "job-FKqx0j80bf0V1fbZ1X5xp1J0",
    "state": "runnable",
    "debug": {},
    "trueInstanceType": "dx_m1.large",
    "analysis": null,
    "name": "applet-FKqx0gj0bf0qF33K1Y3xP39G",
    "applet": "applet-FKqx0gj0bf0qF33K1Y3xP39G",
    "priority": "high",
    "executableName": "applet-FKqx0gj0bf0qF33K1Y3xP39G",
    "modified": 1538773093532,
    "created": 1538773088747,
    "failureCounts": {},
    "originJob": "job-FKqx0j80bf0V1fbZ1X5xp1J0",
    "billTo": "user-orodeh",
    "function": "main",
    "input": {
        "number": 32
    },
    "project": "project-FKqx0gQ0bf0jJkY81VjxgB9Y",
    "stage": null,
    "class": "job",
    "properties": {
        "\u0442hird prop": "stuff",
        "seco\u0438dprop": "\u03a32,n",
        "$my.prop": "$hello.world",
        "foo": "bar"
    },
    "folder": "/",
    "ignoreReuse": false,
    "singleContext": false,
    "parentJob": null,
    "executable": "applet-FKqx0gj0bf0qF33K1Y3xP39G",
    "details": {},
    "id": "job-FKqx0j80bf0V1fbZ1X5xp1J0",
    "tags": [
        "\u03a31=n",
        "helloo0",
        "\u03c9\u03c9",
        "bar"
    ],
    "delayWorkspaceDestruction": false,
    "parentAnalysis": null,
    "workspace": "container-FKqx0j80QJB40K70FVz5K107",
    "invoiceMetadata": null,
    "instanceType": "mem2_hdd2_x2",
    "dependsOn": [],
    "systemRequirements": {},
    "networkAccess": [],
    "originalInput": {
        "number": 32
    }
}

$ dx cd project-FKqx0qj0Z2jq9ykx1XqKGJ6j:/

$ dx update project project-FKqx0qj0Z2jq9ykx1XqKGJ6j --bill-to user-wronguser
dxpy.exceptions.InvalidInput: Cannot use another user's account for key "billTo", code 422. Request Time=1538773104.6971793, Request ID=1538773104944-68137

$ dx cd project-FKqx0x0044FFF33K1Y3xP39K:/

$ dx update project project-FKqx0x0044FFF33K1Y3xP39K --restricted true
{"id": "project-FKqx0x0044FFF33K1Y3xP39K"}

$ dx update project project-FKqx0x0044FFF33K1Y3xP39K --protected true
{"id": "project-FKqx0x0044FFF33K1Y3xP39K"}

$ dx cd project-FKqx0yQ0Zv3qF33K1Y3xP39P:/

$ dx cd project-FKqx1080FfK8v4f81Y9jpZj7:/

$ dx update project Project_name1538773121.3238153 --name 'Another Project Name1538773122.4420793'
{"id": "project-FKqx1080FfK8v4f81Y9jpZj7"}

$ dx cd project-FKqx12Q0bq7FF33K1Y3xP39Q:/
ok
test_download_to_stdout (test_dxclient.TestDXClientUploadDownload) ... ERROR
test_dx_download_by_job_id_and_output_field (test_dxclient.TestDXClientUploadDownload) ... skipped 'Skipping test that would run jobs'
test_dx_download_no_env (test_dxclient.TestDXClientUploadDownload) ... skipped 'skipping test that would clobber your local environment'
test_dx_download_recursive_overwrite (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_download_resume_and_checksum (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_download_root_recursive (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_download_when_current_project_inaccessible (test_dxclient.TestDXClientUploadDownload) ... skipped 'skipping test that would clobber your local environment'
test_dx_make_download_url (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_make_download_url_project_affinity (test_dxclient.TestDXClientUploadDownload) ... /usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 37946), raddr=('54.175.190.114', 443)>
  self._sock = None
WARNING:dxpy:[Fri Oct  5 14:05:40 2018] POST https://stagingapi.dnanexus.com:443/project-FKqx1qQ0FyK8v4f81Y9jpZj8/destroy: urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response',)). Waiting 1 seconds before retry 1 of 6...
ERROR
test_dx_upload_download (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_upload_empty_file (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_upload_empty_file_azure (test_dxclient.TestDXClientUploadDownload) ... skipped 'Skipping test that would upload file to Azure'
test_dx_upload_mult_paths (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_upload_mult_paths_with_dest (test_dxclient.TestDXClientUploadDownload) ... ok
test_dx_upload_no_env (test_dxclient.TestDXClientUploadDownload) ... skipped 'skipping test that would clobber your local environment'
test_dx_upload_with_upload_perm (test_dxclient.TestDXClientUploadDownload) ... skipped 'skipping tests that require a running authserver'
test_build_worklow_malformed_dxworkflow_json (test_dxclient.TestDXClientWorkflow) ... FAIL
test_dx_add_remove_list_stages (test_dxclient.TestDXClientWorkflow) ...
$ dx update project project-FKqx12Q0bq7FF33K1Y3xP39Q --description 'This is a description'
{"id": "project-FKqx12Q0bq7FF33K1Y3xP39Q"}

$ dx update project project-FKqx12Q0bq7FF33K1Y3xP39Q --summary 'This is a summary'
{"id": "project-FKqx12Q0bq7FF33K1Y3xP39Q"}

$ dx update project project-FKqx12Q0bq7FF33K1Y3xP39Q --name NewProjectName1538773131.091275
{"id": "project-FKqx12Q0bq7FF33K1Y3xP39Q"}

$ dx cd project-FKqx1580Yqpjq92B1XYG3f3G:/

$ dx download -o - X.txt
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 1907, in cat
    sys.stdout.buffer.write(chunk)
TypeError: a bytes-like object is required, not 'str'

$ dx cd project-FKqx1900v0yV1fbZ1X5xp1J1:/

$ dx upload -r foodir

$ dx download -r -f foodir

$ rm -rf foodir

$ dx cd project-FKqx1F00x6bjq92B1XYG3f3J:/

$ cd /tmp/tmpli7uo5hx; dx download test; ls -la
total 5248
drwx------  3 orodeh orodeh      96 Oct  5 13:59 .
drwxrwxrwt 88 orodeh orodeh    2816 Oct  5 13:59 ..
-rw-r--r--  1 orodeh orodeh 5242881 Oct  5 13:59 test

$ cd /tmp/tmpli7uo5hx; dx download -f test

$ cd /tmp/tmpli7uo5hx; dx download -f test

$ cd /tmp/tmpli7uo5hx; dx download -f test

$ cd /tmp/tmpli7uo5hx; rm test; touch test

$ cd /tmp/tmpli7uo5hx; dx download -f test

$ dx cd project-FKqx1YQ0YvBqF33K1Y3xP39V:/

$ dx download -r project-FKqx1Yj0JyK11fbZ1X5xp1J2:/

$ dx download -r /

$ diff -Naur /tmp/tmplf2d3xxb /tmp/tmpga2seois

$ dx download -r project-FKqx1Yj0JyK11fbZ1X5xp1J2:/*

$ diff -Naur /tmp/tmplf2d3xxb /tmp/tmpm3qn9162

$ dx download -r *

$ diff -Naur /tmp/tmplf2d3xxb /tmp/tmpx9ioj7ts

$ dx cd project-FKqx1jQ0j0pKG7FP1Vb1bXzf:/

$ dx upload /tmp/tmpzu498q07/tmp7sx_9xmi --brief --wait
file-FKqx1jj0j0p11fbZ1X5xp1J3

$ dx make_download_url file-FKqx1jj0j0p11fbZ1X5xp1J3
https://stagingdl.dnanex.us/F/D/0GPBFJGV1jZ5y96gq350bJKFX9BVFBFxVpqgq8B0/tmp7sx_9xmi

$ wget -P /tmp/tmpkfogg_bz https://stagingdl.dnanex.us/F/D/0GPBFJGV1jZ5y96gq350bJKFX9BVFBFxVpqgq8B0/tmp7sx_9xmi

$ cmp /tmp/tmpkfogg_bz/tmp7sx_9xmi /tmp/tmpzu498q07/tmp7sx_9xmi

$ dx make_download_url file-FKqx1jj0j0p11fbZ1X5xp1J3 --filename foo
https://stagingdl.dnanex.us/F/D/vgJ706VzbGG0907fJ0Pg1F2y2vqVvqBy3zpGzjVq/foo

$ wget -P /tmp/tmpkfogg_bz https://stagingdl.dnanex.us/F/D/vgJ706VzbGG0907fJ0Pg1F2y2vqVvqBy3zpGzjVq/foo


$ cmp /tmp/tmpkfogg_bz/foo /tmp/tmpzu498q07/tmp7sx_9xmi

$ dx cd project-FKqx1q80FV48JkY81VjxgB9Z:/

$ dx make_download_url file-FKqx1qj0FyKF9ykx1XqKGJ6y
https://stagingdl.dnanex.us/F/D/PJv15Vx726QKy8ZYJFzkPqJB0PgQ5bKj3FYYJ1v2/file-FKqx1qj0FyKF9ykx1XqKGJ6y

$ wget -O /dev/null https://stagingdl.dnanex.us/F/D/PJv15Vx726QKy8ZYJFzkPqJB0PgQ5bKj3FYYJ1v2/file-FKqx1qj0FyKF9ykx1XqKGJ6y

$ dx cd project-FKqx4FQ0j8JjJkY81VjxgB9b:/

$ dx download ""
dxpy.utils.resolver.ResolutionError: Cannot parse ""; expected the path to be a non-empty string

$ dx upload /tmp/tmpcoo7dqdu
Error: /tmp/tmpcoo7dqdu is a directory but the -r/--recursive option was not given

$ dx upload -r /tmp/tmpcoo7dqdu

$ dx wait "tmpcoo7dqdu/a/Ð±/tmp7vrk7mkq"
Waiting for tmpcoo7dqdu/a/Ð±/tmp7vrk7mkq to close...
Done

$ dx download tmpcoo7dqdu
Error: "/tmpcoo7dqdu" is a folder but the -r/--recursive option was not given

$ dx download -r tmpcoo7dqdu

$ dx download -r -o t tmpcoo7dqdu

$ dx download -o t2 tmpcoo7dqdu/a/Ð±/tmp7vrk7mkq

$ dx mkdir /super/

$ dx mv 'tmpcoo7dqdu' /super/

$ dx download -r 'project-FKqx4FQ0j8JjJkY81VjxgB9b:/super/tmpcoo7dqdu'

$ dx download -r super/tmpcoo7dqdu/

$ dx cd /super/tmpcoo7dqdu/a/Ð±; dx mkdir tmp7vrk7mkq; dx download -r tmp7vrk7mkq*
Error: The following paths are both file and folder names, and cannot be
downloaded to the same destination: tmp7vrk7mkq

$ dx cd project-FKqx7580VKK205QKJkbzgBbg:/

$ dx upload --wait /tmp/tmpnffr13vc
ID                  file-FKqx75Q03vQq5fyYJkzxBY11
Class               file
Project             project-FKqx75Q03vQQFj2kJjx8VYK2
Folder              /
Name                tmpnffr13vc
State               closed
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:11:50 2018
Created by          orodeh
Last modified       Fri Oct  5 14:11:53 2018
Size                0 bytes
Media type          inode/x-empty
archivalState       "live"

$ dx cd project-FKqx78Q0qQ1zFBjkJk859335:/

$ dx upload -r /tmp/tmp477rlp58/tmpuojdh6ol /tmp/tmp477rlp58/a --wait
ID                  file-FKqx78j0qQ1X05QKJkbzgBbj
Class               file
Project             project-FKqx78Q0qQ1zFBjkJk859335
Folder              /
Name                tmpuojdh6ol
State               closed
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:12:03 2018
Created by          orodeh
Last modified       Fri Oct  5 14:12:05 2018
Media type          text/plain
Size                9 bytes
archivalState       "live"

$ dx ls
a/
tmpuojdh6ol

$ dx ls a
tmpu8dij72j

$ dx cd project-FKqx7G804zpQFj2kJjx8VYK3:/

$ dx mkdir /destdir

$ dx upload -r /tmp/tmplmf30v2k/tmpvste6d8b /tmp/tmplmf30v2k/a --destination /destdir --wait
ID                  file-FKqx7J004zpbbG3qJjY5pB7p
Class               file
Project             project-FKqx7G804zpQFj2kJjx8VYK3
Folder              /destdir
Name                tmpvste6d8b
State               closed
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:12:20 2018
Created by          orodeh
Last modified       Fri Oct  5 14:12:21 2018
archivalState       "live"
Size                9 bytes
Media type          text/plain

$ dx ls /destdir/
a/
tmpvste6d8b

$ dx ls /destdir/a
tmpp8wz1oye

$ dx cd project-FKqx7Q00VfkfVpq3JkJkzj9B:/

$ dx build /tmp/tmpaa_q9m26/dxbuilt_workflow
Error: 'JSONDecodeError' object has no attribute 'message'
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/workflow_builder.py", line 68, in _parse_executable_spec
    return json_load_raise_on_duplicates(desc)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/__init__.py", line 275, in json_load_raise_on_duplicates
    return json.load(*args, **kwargs)
  File "/usr/lib/python3.5/json/__init__.py", line 268, in load
    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.5/json/__init__.py", line 332, in loads
    return cls(**kw).decode(s)
  File "/usr/lib/python3.5/json/decoder.py", line 339, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.5/json/decoder.py", line 355, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2616, in build
    workflow_builder.build(args, build_parser)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/workflow_builder.py", line 511, in build
    json_spec = _parse_executable_spec(args.src_dir, "dxworkflow.json", parser)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/workflow_builder.py", line 70, in _parse_executable_spec
    raise WorkflowBuilderException("Could not parse {} file as JSON: {}".format(json_file_name, e.message))
AttributeError: 'JSONDecodeError' object has no attribute 'message'

$ dx cd project-FKqx7V80bVP0Fj2kJjx8VYK4:/

$ dx new workflow myworkflow --title title --brief
workflow-FKqx7Vj0bVPPFBjkJk859336

$ dx describe workflow-FKqx7Vj0bVPPFBjkJk859336
Result 1:
ID                  workflow-FKqx7Vj0bVPPFBjkJk859336
Class               workflow
Project             project-FKqx7V80bVP0Fj2kJjx8VYK4
Folder              /
Name                myworkflow
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:12:39 2018
Created by          orodeh
Last modified       Fri Oct  5 14:12:39 2018
Edit Version        0
Title               title
Summary
Output Folder       -
Input Spec          -
Output Spec         -
ok
test_dx_build_get_build_workflow (test_dxclient.TestDXClientWorkflow) ...
$ dx list stages myworkflow
myworkflow (workflow-FKqx7Vj0bVPPFBjkJk859336)

Title: title
Output Folder: -

 No stages; add stages with the command "dx add stage"

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 --name first applet-FKqx7X00bVP2B155Jp8qgYP2 --brief
stage-FKqx7Xj0bVP3XKf1Jjf23Gk3

$ dx add stage myworkflow --relative-output-folder output myapplet --brief -inumber=32 --instance-type mem2_hdd2_x2
stage-FKqx7Y80bVPPFBjkJk859338

$ dx mkdir -p a/b/c

$ dx cd a/b/c

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 --name second --output-folder . applet-FKqx7X00bVP2B155Jp8qgYP2 --brief --instance-type '{"main": "mem2_hdd2_x2"}'
stage-FKqx7Z80bVP6Vpq3JkJkzj9F

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 applet-FKqx7X00bVP2B155Jp8qgYP2 -inonexistent=42
dxpy.exceptions.DXCLIError: Input field called "nonexistent" was not found in the input spec

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 applet-FKqx7X00bVP2B155Jp8qgYP2 --output-folder /foo --relative-output-folder foo
usage: dx add stage [-h] [-i INPUT] [-j INPUT_JSON] [-f FILENAME]
                    [--brief | --verbose] [--env-help]
                    [--instance-type INSTANCE_TYPE_OR_MAPPING]
                    [--instance-type-help] [--alias ALIAS] [--name NAME]
                    [--id STAGE_ID]
                    [--output-folder OUTPUT_FOLDER | --relative-output-folder RELATIVE_OUTPUT_FOLDER]
                    workflow executable

Add a stage to a workflow. Default inputs for the stage can also be set at the
same time.

positional arguments:
  workflow              Name or ID of a workflow
  executable            Name or ID of an executable to add as a stage in the
                        workflow

optional arguments:
  -h, --help            show this help message and exit
  -i INPUT, --input INPUT
                        An input to be added using "<input
                        name>[:<class>]=<input value>" (provide "class" if
                        there is no input spec; it can be any job IO class,
                        e.g. "string", "array:string", or "array"; if "class"
                        is "array" or not specified, the value will be
                        attempted to be parsed as JSON and is otherwise
                        treated as a string)
  -j INPUT_JSON, --input-json INPUT_JSON
                        The full input JSON (keys=input field names,
                        values=input field values)
  -f FILENAME, --input-json-file FILENAME
                        Load input JSON from FILENAME ("-" to use stdin)
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --env-help            Display help message for overriding environment
                        variables
  --instance-type INSTANCE_TYPE_OR_MAPPING
                        Specify instance type(s) for jobs this executable will
                        run; see --instance-type-help for more details
  --instance-type-help  Print help for specifying instance types
  --alias ALIAS, --version ALIAS, --tag ALIAS
                        Tag or version of the app to add if the executable is
                        an app (default: "default" if an app)
  --name NAME           Stage name
  --id STAGE_ID         Stage ID
  --output-folder OUTPUT_FOLDER
                        Path to the output folder for the stage (interpreted
                        as an absolute path)
  --relative-output-folder RELATIVE_OUTPUT_FOLDER
                        A relative folder path for the stage (interpreted as
                        relative to the workflow's output folder)

dx add stage: error: argument --relative-output-folder: not allowed with argument --output-folder

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 foo
dxpy.utils.resolver.ResolutionError: Unable to resolve "foo" to a data object or folder name in '/a/b/c'

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 -inumber=foo applet-FKqx7X00bVP2B155Jp8qgYP2
dxpy.exceptions.DXCLIError: Value provided for input field "number" could not be parsed as int: invalid literal for int() with base 10: 'foo'

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 applet-FKqx7X00bVP2B155Jp8qgYP2 --instance-type {]
dxpy.exceptions.DXCLIError: Error while parsing JSON value for --instance-type

$ dx add stage workflow-FKqx7Vj0bVPPFBjkJk859336 applet-FKqx7X00bVP2B155Jp8qgYP2 --instance-type foo
dxpy.exceptions.InvalidInput: The instance type specified for stage "*" is not a recognized instance type, code 422. Request Time=1538773979.3654952, Request ID=1538773979377-656150

$ dx list stages workflow-FKqx7Vj0bVPPFBjkJk859336
myworkflow (workflow-FKqx7Vj0bVPPFBjkJk859336)

Title: title
Output Folder: -

Stage 0: first (stage-FKqx7Xj0bVP3XKf1Jjf23Gk3)
Executable      applet-FKqx7X00bVP2B155Jp8qgYP2
Output Folder   <workflow output folder>/

Stage 1: <no name> (stage-FKqx7Y80bVPPFBjkJk859338)
Executable      applet-FKqx7X00bVP2B155Jp8qgYP2
Output Folder   <workflow output folder>/output
Bound input     number=32

Stage 2: second (stage-FKqx7Z80bVP6Vpq3JkJkzj9F)
Executable      applet-FKqx7X00bVP2B155Jp8qgYP2
Output Folder   /a/b/c

$ dx describe workflow-FKqx7Vj0bVPPFBjkJk859336
Result 1:
ID                  workflow-FKqx7Vj0bVPPFBjkJk859336
Class               workflow
Project             project-FKqx7V80bVP0Fj2kJjx8VYK4
Folder              /
Name                myworkflow
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:12:39 2018
Created by          orodeh
Last modified       Fri Oct  5 14:12:49 2018
Edit Version        3
Title               title
Summary
Output Folder       -
Input Spec          stage-FKqx7Z80bVP6Vpq3JkJkzj9F:
                    stage-FKqx7Z80bVP6Vpq3JkJkzj9F.number (int)
                stage-FKqx7Y80bVPPFBjkJk859338:
                    [stage-FKqx7Y80bVPPFBjkJk859338.number (int,
                  default=32)]
                stage-FKqx7Xj0bVP3XKf1Jjf23Gk3:
                    stage-FKqx7Xj0bVP3XKf1Jjf23Gk3.number (int)
Output Spec         stage-FKqx7Z80bVP6Vpq3JkJkzj9F:
                    stage-FKqx7Z80bVP6Vpq3JkJkzj9F.number (int)
                stage-FKqx7Y80bVPPFBjkJk859338:
                    stage-FKqx7Y80bVPPFBjkJk859338.number (int)
                stage-FKqx7Xj0bVP3XKf1Jjf23Gk3:
                    stage-FKqx7Xj0bVP3XKf1Jjf23Gk3.number (int)
Stage 0             first (stage-FKqx7Xj0bVP3XKf1Jjf23Gk3)
  Executable        applet-FKqx7X00bVP2B155Jp8qgYP2
Stage 1             stage-FKqx7Y80bVPPFBjkJk859338
  Executable        applet-FKqx7X00bVP2B155Jp8qgYP2
Stage 2             second (stage-FKqx7Z80bVP6Vpq3JkJkzj9F)
  Executable        applet-FKqx7X00bVP2B155Jp8qgYP2

$ dx remove stage /myworkflow 1
Removed stage stage-FKqx7Y80bVPPFBjkJk859338

$ dx remove stage workflow-FKqx7Vj0bVPPFBjkJk859336 stage-FKqx7Xj0bVP3XKf1Jjf23Gk3 --brief
stage-FKqx7Xj0bVP3XKf1Jjf23Gk3

$ dx remove stage workflow-FKqx7Vj0bVPPFBjkJk859336 second
Removed stage stage-FKqx7Z80bVP6Vpq3JkJkzj9F

$ dx remove stage /myworkflow 5
dxpy.exceptions.DXError: DXWorkflow: the workflow contains 0 stage(s), and the numerical value of the given stage identifier is out of range

$ dx remove stage /myworkflow badstageID
dxpy.exceptions.DXError: DXWorkflow: the given stage identifier could not be found as a stage ID nor as a stage name

$ dx remove stage /myworkflow stage-123456789012345678901234
dxpy.exceptions.DXError: DXWorkflow: the given stage identifier could not be found as a stage ID nor as a stage name

$ dx cd project-FKqx7p80jyZ3XKf1Jjf23Gk4:/

$ dx build --json /tmp/tmp57epjcqq/workflow_cycle
{"tags": [], "project": "project-FKqx7p80jyZ3XKf1Jjf23Gk4", "created": 1538773995000, "hidden": false, "temporary": false, "stages": [{"executionPolicy": {}, "executable": "applet-FKqx7pQ0jyZ6Vpq3JkJkzj9G", "systemRequirements": {}, "name": "stage_0_name", "accessible": true, "id": "stage_0", "input": {"number": 123456}, "folder": "/stage_0_output"}, {"executionPolicy": {}, "executable": "applet-FKqx7pQ0jyZ6Vpq3JkJkzj9G", "systemRequirements": {}, "name": null, "accessible": true, "id": "stage_1", "input": {"number": {"$dnanexus_link": {"outputField": "number", "stage": "stage_0"}}}, "folder": null}], "class": "workflow", "links": [], "title": "orig_workflow_name", "modified": 1538773995444, "outputs": null, "description": "Workflow Cycle Readme", "editVersion": 0, "outputSpec": [{"group": "stage_0", "class": "int", "name": "stage_0.number"}, {"group": "stage_1", "class": "int", "name": "stage_1.number"}], "outputFolder": "/", "inputSpec": [{"group": "stage_0", "class": "int", "name": "stage_0.number", "default": 123456}, {"group": "stage_1", "class": "int", "name": "stage_1.number", "default": {"$dnanexus_link": {"outputField": "number", "stage": "stage_0"}}}], "folder": "/", "inputs": [{"class": "int", "name": "foo"}], "summary": "", "sponsored": false, "types": [], "state": "closed", "id": "workflow-FKqx7pj0jyZ5bG3qJjY5pB7v", "name": "orig_workflow_name", "createdBy": {"user": "user-orodeh"}}
/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:4084: ResourceWarning: unclosed file <_io.TextIOWrapper name='orig_workflow_name/dxworkflow.json' mode='r' encoding='UTF-8'>
  workflow_metadata = open(os.path.join(workflow_name, "dxworkflow.json")).read()
ok
test_dx_build_workflow (test_dxclient.TestDXClientWorkflow) ... ok
test_dx_build_workflow_with_destination (test_dxclient.TestDXClientWorkflow) ... ok
test_dx_describe_workflow (test_dxclient.TestDXClientWorkflow) ...
$ dx get workflow-FKqx7pj0jyZ5bG3qJjY5pB7v

$ dx build --json
{"hidden": false, "outputFolder": "/", "stages": [{"systemRequirements": {}, "folder": "/stage_0_output", "input": {"number": 123456}, "executable": "applet-FKqx7pQ0jyZ6Vpq3JkJkzj9G", "accessible": true, "executionPolicy": {}, "id": "stage_0", "name": "stage_0_name"}, {"systemRequirements": {}, "folder": null, "input": {"number": {"$dnanexus_link": {"stage": "stage_0", "outputField": "number"}}}, "executable": "applet-FKqx7pQ0jyZ6Vpq3JkJkzj9G", "accessible": true, "executionPolicy": {}, "id": "stage_1", "name": null}], "description": "Workflow Cycle Readme", "modified": 1538773998210, "title": "orig_workflow_name", "class": "workflow", "folder": "/", "state": "closed", "tags": [], "summary": "", "created": 1538773997000, "types": [], "temporary": false, "inputSpec": [{"default": 123456, "group": "stage_0", "name": "stage_0.number", "class": "int"}, {"default": {"$dnanexus_link": {"stage": "stage_0", "outputField": "number"}}, "group": "stage_1", "name": "stage_1.number", "class": "int"}], "outputs": null, "sponsored": false, "createdBy": {"user": "user-orodeh"}, "inputs": [{"name": "foo", "class": "int"}], "name": "orig_workflow_name", "project": "project-FKqx7p80jyZ3XKf1Jjf23Gk4", "links": [], "editVersion": 0, "outputSpec": [{"group": "stage_0", "name": "stage_0.number", "class": "int"}, {"group": "stage_1", "name": "stage_1.number", "class": "int"}], "id": "workflow-FKqx7q80jyZ6Vpq3JkJkzj9K"}

$ dx cd project-FKqx7vj0JQqYXKf1Jjf23Gk5:/

$ dx build --json /tmp/tmpi1zi94ei/dxbuilt_workflow
{"summary": "", "folder": "/", "name": "my_workflow", "description": "Workflow Readme", "modified": 1538774005553, "id": "workflow-FKqx7x80JQqbbG3qJjY5pB7y", "state": "closed", "stages": [{"input": {"number": 123456}, "folder": "/stage_0_output", "id": "stage_0", "executionPolicy": {"onNonRestartableFailure": "failStage", "restartOn": {}}, "name": "stage_0_name", "accessible": true, "systemRequirements": {"main": {"instanceType": "mem2_hdd2_x2"}}, "executable": "applet-FKqx7x00JQqfVpq3JkJkzj9Q"}, {"input": {"number": {"$dnanexus_link": {"outputField": "number", "stage": "stage_0"}}}, "folder": null, "id": "stage_1", "executionPolicy": {}, "name": null, "accessible": true, "systemRequirements": {}, "executable": "applet-FKqx7x00JQqfVpq3JkJkzj9Q"}], "project": "project-FKqx7vj0JQqYXKf1Jjf23Gk5", "hidden": false, "sponsored": false, "class": "workflow", "outputFolder": "/", "createdBy": {"user": "user-orodeh"}, "links": [], "tags": [], "temporary": false, "inputs": [{"name": "foo", "class": "int"}], "created": 1538774005000, "outputs": [{"name": "bar", "class": "int", "outputSource": {"$dnanexus_link": {"outputField": "number", "stage": "stage_0"}}}], "types": [], "editVersion": 0, "title": "my_workflow", "outputSpec": [{"name": "stage_0.number", "class": "int", "group": "stage_0"}, {"name": "stage_1.number", "class": "int", "group": "stage_1"}], "inputSpec": [{"name": "stage_0.number", "class": "int", "default": 123456, "group": "stage_0"}, {"name": "stage_1.number", "class": "int", "default": {"$dnanexus_link": {"outputField": "number", "stage": "stage_0"}}, "group": "stage_1"}]}

$ dx cd project-FKqx7y8087Yq5fyYJkzxBY17:/

$ dx build --json --destination project-FKqx7y8087Yq5fyYJkzxBY17 /tmp/tmpqdultaj4/dxbuilt_workflow
{"description": "Workflow doc", "inputSpec": [], "outputSpec": [], "types": [], "inputs": null, "id": "workflow-FKqx7yj087YX05QKJkbzgBbp", "createdBy": {"user": "user-orodeh"}, "name": "my_workflow", "class": "workflow", "outputFolder": null, "hidden": false, "stages": [], "title": "my_workflow", "summary": "", "folder": "/", "temporary": false, "project": "project-FKqx7y8087Yq5fyYJkzxBY17", "state": "closed", "sponsored": false, "modified": 1538774011800, "created": 1538774011000, "outputs": null, "links": [], "tags": [], "editVersion": 0}

$ dx build --json -d /overriding_wf_name /tmp/tmpqdultaj4/dxbuilt_workflow
{"description": "Workflow doc", "hidden": false, "createdBy": {"user": "user-orodeh"}, "tags": [], "folder": "/", "state": "closed", "editVersion": 0, "links": [], "temporary": false, "name": "overriding_wf_name", "outputFolder": null, "project": "project-FKqx7y8087Yq5fyYJkzxBY17", "summary": "", "modified": 1538774012979, "inputSpec": [], "types": [], "title": "overriding_wf_name", "id": "workflow-FKqx7z0087YzFBjkJk85933J", "created": 1538774012000, "inputs": null, "class": "workflow", "outputs": null, "sponsored": false, "outputSpec": [], "stages": []}

$ dx build --json --destination /foo/ /tmp/tmpqdultaj4/dxbuilt_workflow
{"inputSpec": [], "hidden": false, "modified": 1538774014262, "summary": "", "createdBy": {"user": "user-orodeh"}, "inputs": null, "folder": "/foo", "name": "my_workflow", "id": "workflow-FKqx7zQ087Yq5fyYJkzxBY1B", "editVersion": 0, "links": [], "state": "closed", "outputSpec": [], "title": "my_workflow", "created": 1538774014000, "class": "workflow", "tags": [], "temporary": false, "sponsored": false, "stages": [], "description": "Workflow doc", "outputFolder": null, "project": "project-FKqx7y8087Yq5fyYJkzxBY17", "types": [], "outputs": null}

$ dx build --json --destination project-FKqx7y8087Yq5fyYJkzxBY17:/wf_dest_folder/overriding_wf_name /tmp/tmpqdultaj4/dxbuilt_workflow
{"created": 1538774015000, "class": "workflow", "summary": "", "hidden": false, "tags": [], "temporary": false, "editVersion": 0, "sponsored": false, "modified": 1538774015505, "outputs": null, "inputs": null, "stages": [], "id": "workflow-FKqx7zj087YXB155Jp8qgYP4", "project": "project-FKqx7y8087Yq5fyYJkzxBY17", "title": "overriding_wf_name", "name": "overriding_wf_name", "folder": "/wf_dest_folder", "outputFolder": null, "description": "Workflow doc", "outputSpec": [], "inputSpec": [], "createdBy": {"user": "user-orodeh"}, "links": [], "state": "closed", "types": []}

$ dx build --json --destination project-FKqx7y8087Yq5fyYJkzxBY17:/no_such_folder/ /tmp/tmpqdultaj4/dxbuilt_workflow
WARNING:dxpy:workflow name "my_workflow" does not match containing directory "/tmp/tmpqdultaj4/dxbuilt_workflow"
WARNING:dxpy:dxworkflow.json is missing a title, please add one in the 'title' field
WARNING:dxpy:dxworkflow.json is missing a summary, please add one in the 'summary' field
Error: The folder could not be found in project-FKqx7y8087Yq5fyYJkzxBY17, code 404. Request Time=1538774016.2187202, Request ID=1538774016473-354622
dxpy.exceptions.ResourceNotFound: The folder could not be found in project-FKqx7y8087Yq5fyYJkzxBY17, code 404. Request Time=1538774016.2187202, Request ID=1538774016473-354622

$ dx build --json /tmp/tmpqdultaj4/dxbuilt_workflow
WARNING:dxpy:workflow name "my_workflow" does not match containing directory "/tmp/tmpqdultaj4/dxbuilt_workflow"
WARNING:dxpy:dxworkflow.json is missing a title, please add one in the 'title' field
WARNING:dxpy:dxworkflow.json is missing a summary, please add one in the 'summary' field
dxpy.utils.resolver.ResolutionError: Cannot resolve ".": expected the path to be qualified with a project name or ID, and a colon; or for a current project to be set

$ dx cd project-FKqx81Q0z2j5bG3qJjY5pB84:/

$ dx new workflow myworkflow --title title --brief
workflow-FKqx81j0z2j0Fj2kJjx8VYK5

$ dx describe workflow-FKqx81j0z2j0Fj2kJjx8VYK5
Result 1:
ID                  workflow-FKqx81j0z2j0Fj2kJjx8VYK5
Class               workflow
Project             project-FKqx81Q0z2j5bG3qJjY5pB84
Folder              /
Name                myworkflow
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:13:43 2018
Created by          orodeh
Last modified       Fri Oct  5 14:13:44 2018
Edit Version        0
Title               title
Summary
Output Folder       -
Input Spec          -
Output Spec         -

$ dx add stage workflow-FKqx81j0z2j0Fj2kJjx8VYK5 -inumber=10 applet-FKqx8280z2j205QKJkbzgBby --brief
stage-FKqx82j0z2j3XKf1Jjf23Gk8

$ dx describe myworkflow
Result 1:
ID                  workflow-FKqx81j0z2j0Fj2kJjx8VYK5
Class               workflow
Project             project-FKqx81Q0z2j5bG3qJjY5pB84
Folder              /
Name                myworkflow
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:13:43 2018
Created by          orodeh
Last modified       Fri Oct  5 14:13:47 2018
Edit Version        1
Title               title
Summary
Output Folder       -
Input Spec          stage-FKqx82j0z2j3XKf1Jjf23Gk8:
                    [stage-FKqx82j0z2j3XKf1Jjf23Gk8.number (int,
                  default=10)]
Output Spec         stage-FKqx82j0z2j3XKf1Jjf23Gk8:
                    stage-FKqx82j0z2j3XKf1Jjf23Gk8.number (int)
Stage 0             stage-FKqx82j0z2j3XKf1Jjf23Gk8
  Executable        applet-FKqx8280z2j205QKJkbzgBby
ok
test_dx_new_workflow (test_dxclient.TestDXClientWorkflow) ... ok
test_dx_new_workflow_without_context (test_dxclient.TestDXClientWorkflow) ... skipped 'skipping test that would clobber your local environment'
test_dx_run_clone_analysis (test_dxclient.TestDXClientWorkflow) ... skipped 'skipping test that runs jobs'
test_dx_run_workflow (test_dxclient.TestDXClientWorkflow) ... skipped 'skipping test that would run jobs'
test_dx_run_workflow_prints_cached_executions (test_dxclient.TestDXClientWorkflow) ... skipped 'skipping test that runs jobs'
test_dx_run_workflow_with_inst_type_requests (test_dxclient.TestDXClientWorkflow) ... skipped 'skipping test that runs jobs'
test_dx_run_workflow_with_stage_folders (test_dxclient.TestDXClientWorkflow) ... skipped 'skipping test that would attempt to run a job'
test_dx_update_stage (test_dxclient.TestDXClientWorkflow) ...
$ dx cd project-FKqx8480PfZ2B155Jp8qgYP6:/

$ dx new workflow --title=Ñitle --summary=SÎ¨mmary --brief --description=DÎ£sc wÃrkflÃwname --output-folder /wÃrkflÃwÃutput
workflow-FKqx84j0PfZ5bG3qJjY5pB87

$ dx add stage wÃrkflÃwname applet-FKqx84j0PfZPFBjkJk85933V
ID                  workflow-FKqx84j0PfZ5bG3qJjY5pB87
Class               workflow
Project             project-FKqx8480PfZ2B155Jp8qgYP6
Folder              /
Name                wÃrkflÃwname
State               open
Visibility          visible
Types               -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:13:55 2018
Created by          orodeh
Last modified       Fri Oct  5 14:13:57 2018
Edit Version        1
Title               Ñitle
Summary             SÎ¨mmary
Output Folder       /wÃrkflÃwÃutput
Input Spec          -
Output Spec         -
Stage 0             stage-FKqx8580PfZ205QKJkbzgBf0
  Executable        applet-FKqx84j0PfZPFBjkJk85933V

$ dx new workflow --init wÃrkflÃwname --title newtitle --summary newsummary --output-folder /output --brief
workflow-FKqx85j0PfZPFBjkJk85933Y

$ dx new workflow --init workflow-FKqx84j0PfZ5bG3qJjY5pB87
ID                  workflow-FKqx8600PfZ205QKJkbzgBf1
Class               workflow
Project             project-FKqx8480PfZ2B155Jp8qgYP6
Folder              /
Name                wÃrkflÃwname
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:14:00 2018
Created by          orodeh
Last modified       Fri Oct  5 14:14:00 2018
Edit Version        0
Title               Ñitle
Summary             SÎ¨mmary
Output Folder       /wÃrkflÃwÃutput
Input Spec          -
Output Spec         -
Stage 0             stage-FKqx8580PfZ205QKJkbzgBf0
  Executable        applet-FKqx84j0PfZPFBjkJk85933V
initializedFrom     workflow-FKqx84j0PfZ5bG3qJjY5pB87

$ dx rm workflow-FKqx84j0PfZ5bG3qJjY5pB87

$ dx new workflow --init workflow-FKqx84j0PfZ5bG3qJjY5pB87
dxpy.utils.resolver.ResolutionError: The entity workflow-FKqx84j0PfZ5bG3qJjY5pB87 could not be found, code 404. Request Time=1538774042.1431763, Request ID=1538774042406-599433

$ dx cd project-FKqx87Q066gbbG3qJjY5pB89:/

$ dx new workflow myworkflow --brief
workflow-FKqx87j066gQFj2kJjx8VYK7

$ dx describe workflow-FKqx87j066gQFj2kJjx8VYK7
Result 1:
ID                  workflow-FKqx87j066gQFj2kJjx8VYK7
Class               workflow
Project             project-FKqx87Q066gbbG3qJjY5pB89
Folder              /
Name                myworkflow
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:14:07 2018
Created by          orodeh
Last modified       Fri Oct  5 14:14:07 2018
Edit Version        0
Title               myworkflow
Summary
Output Folder       -
Input Spec          -
Output Spec         -

$ dx add stage workflow-FKqx87j066gQFj2kJjx8VYK7 applet-FKqx880066gfVpq3JkJkzj9X --brief
stage-FKqx88j066gQFj2kJjx8VYK9

$ dx update stage myworkflow 0 --name Ñitle -inumber=32 --relative-output-folder=foo --instance-type mem2_hdd2_x2

$ dx update stage myworkflow 0 --name Ñitle -inumber=32 --output-folder=. --instance-type '{"main": "mem2_hdd2_x2"}'

$ dx update stage myworkflow stage-FKqx88j066gQFj2kJjx8VYK9 --no-name

$ dx update stage myworkflow 0 --executable applet-FKqx88j066gzFBjkJk85933b
dxpy.exceptions.DXCLIError: The requested executable could not be verified as a compatible replacement for the following reasons:
- the previous output field "number" is not present in the output spec of the
  new executable
- the previous input field "number" is not present in the input spec of the
  new executable
Rerun with --force to replace the executable anyway

$ dx update stage myworkflow 0 --force --executable applet-FKqx88j066gzFBjkJk85933b

$ dx rm applet-FKqx88j066gzFBjkJk85933b

$ dx describe myworkflow
Result 1:
ID                  workflow-FKqx87j066gQFj2kJjx8VYK7
Class               workflow
Project             project-FKqx87Q066gbbG3qJjY5pB89
Folder              /
Name                myworkflow
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:14:07 2018
Created by          orodeh
Last modified       Fri Oct  5 14:14:22 2018
Edit Version        5
Title               myworkflow
Summary
Output Folder       -
Stage 0             stage-FKqx88j066gQFj2kJjx8VYK9
  Executable        applet-FKqx88j066gzFBjkJk85933b (inaccessible)

$ dx update stage myworkflow 0 --force --executable applet-FKqx880066gfVpq3JkJkzj9X

$ dx update stage myworkflow 0 --name foo --no-name
usage: dx update stage [-h] [-i INPUT] [-j INPUT_JSON] [-f FILENAME]
                       [--brief | --verbose] [--env-help]
                       [--instance-type INSTANCE_TYPE_OR_MAPPING]
                       [--instance-type-help] [--executable EXECUTABLE]
                       [--alias ALIAS] [--force] [--name NAME | --no-name]
                       [--output-folder OUTPUT_FOLDER | --relative-output-folder RELATIVE_OUTPUT_FOLDER]
                       workflow stage

Update the metadata for a stage in a workflow

positional arguments:
  workflow              Name or ID of a workflow
  stage                 Stage (index or ID) of the workflow to update

optional arguments:
  -h, --help            show this help message and exit
  -i INPUT, --input INPUT
                        An input to be added using "<input
                        name>[:<class>]=<input value>" (provide "class" if
                        there is no input spec; it can be any job IO class,
                        e.g. "string", "array:string", or "array"; if "class"
                        is "array" or not specified, the value will be
                        attempted to be parsed as JSON and is otherwise
                        treated as a string)
  -j INPUT_JSON, --input-json INPUT_JSON
                        The full input JSON (keys=input field names,
                        values=input field values)
  -f FILENAME, --input-json-file FILENAME
                        Load input JSON from FILENAME ("-" to use stdin)
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --env-help            Display help message for overriding environment
                        variables
  --instance-type INSTANCE_TYPE_OR_MAPPING
                        Specify instance type(s) for jobs this executable will
                        run; see --instance-type-help for more details
  --instance-type-help  Print help for specifying instance types
  --executable EXECUTABLE
                        Name or ID of an executable to replace in the stage
  --alias ALIAS, --version ALIAS, --tag ALIAS
                        Tag or version of the app to use if replacing the
                        stage executable with an app (default: "default" if an
                        app)
  --force               Whether to replace the executable even if it the new
                        one cannot be verified as compatible with the previous
                        version
  --name NAME           Stage name
  --no-name             Unset the stage name
  --output-folder OUTPUT_FOLDER
                        Path to the output folder for the stage (interpreted
                        as an absolute path)
  --relative-output-folder RELATIVE_OUTPUT_FOLDER
                        A relative folder path for the stage (interpreted as
                        relative to the workflow's output folder)

dx update stage: error: argument --no-name: not allowed with argument --name

$ dx update stage myworkflow 0 --output-folder /foo --relative-output-folder foo
usage: dx update stage [-h] [-i INPUT] [-j INPUT_JSON] [-f FILENAME]
                       [--brief | --verbose] [--env-help]
                       [--instance-type INSTANCE_TYPE_OR_MAPPING]
                       [--instance-type-help] [--executable EXECUTABLE]
                       [--alias ALIAS] [--force] [--name NAME | --no-name]
                       [--output-folder OUTPUT_FOLDER | --relative-output-folder RELATIVE_OUTPUT_FOLDER]
                       workflow stage

Update the metadata for a stage in a workflow

positional arguments:
  workflow              Name or ID of a workflow
  stage                 Stage (index or ID) of the workflow to update

optional arguments:
  -h, --help            show this help message and exit
  -i INPUT, --input INPUT
                        An input to be added using "<input
                        name>[:<class>]=<input value>" (provide "class" if
                        there is no input spec; it can be any job IO class,
                        e.g. "string", "array:string", or "array"; if "class"
                        is "array" or not specified, the value will be
                        attempted to be parsed as JSON and is otherwise
                        treated as a string)
  -j INPUT_JSON, --input-json INPUT_JSON
                        The full input JSON (keys=input field names,
                        values=input field values)
  -f FILENAME, --input-json-file FILENAME
                        Load input JSON from FILENAME ("-" to use stdin)
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --env-help            Display help message for overriding environment
                        variables
  --instance-type INSTANCE_TYPE_OR_MAPPING
                        Specify instance type(s) for jobs this executable will
                        run; see --instance-type-help for more details
  --instance-type-help  Print help for specifying instance types
  --executable EXECUTABLE
                        Name or ID of an executable to replace in the stage
  --alias ALIAS, --version ALIAS, --tag ALIAS
                        Tag or version of the app to use if replacing the
                        stage executable with an app (default: "default" if an
                        app)
  --force               Whether to replace the executable even if it the new
                        one cannot be verified as compatible with the previous
                        version
  --name NAME           Stage name
  --no-name             Unset the stage name
  --output-folder OUTPUT_FOLDER
                        Path to the output folder for the stage (interpreted
                        as an absolute path)
  --relative-output-folder RELATIVE_OUTPUT_FOLDER
                        A relative folder path for the stage (interpreted as
                        relative to the workflow's output folder)

dx update stage: error: argument --relative-output-folder: not allowed with argument --output-folder
ok
test_dx_update_workflow (test_dxclient.TestDXClientWorkflow) ... ok
test_dx_workflow_resolution (test_dxclient.TestDXClientWorkflow) ... ok
test_inaccessible_stage (test_dxclient.TestDXClientWorkflow) ... skipped 'skipping test that would attempt to run a job'
test_compile (test_dxclient.TestDXCompile) ... ERROR
test_compile_dxni (test_dxclient.TestDXCompileDxni) ...
$ dx update stage myworkflow 0 -inumber=foo
dxpy.exceptions.DXCLIError: Value provided for input field "number" could not be parsed as int: invalid literal for int() with base 10: 'foo'

$ dx update stage myworkflow 0 --executable foo
dxpy.utils.resolver.ResolutionError: Unable to resolve "foo" to a data object or folder name in '/'

$ dx update stage myworkflow 0 --instance-type {]
dxpy.exceptions.DXCLIError: Error while parsing JSON value for --instance-type

$ dx update stage myworkflow 0 --alias default --force
No updates requested; none made

$ dx update stage /myworkflow 5 --name foo
dxpy.exceptions.DXError: DXWorkflow: the workflow contains 1 stage(s), and the numerical value of the given stage identifier is out of range

$ dx update stage /myworkflow bad.stageID --name foo
dxpy.exceptions.DXError: DXWorkflow: the given stage identifier could not be found as a stage ID nor as a stage name

$ dx update stage /myworkflow stage-123456789012345678901234 --name foo
dxpy.exceptions.DXError: DXWorkflow: the given stage identifier could not be found as a stage ID nor as a stage name

$ dx cd project-FKqx8Q00P5q2B155Jp8qgYP7:/

$ dx new workflow myworkflow --brief
workflow-FKqx8Q80P5qPFBjkJk85933g

$ dx update workflow myworkflow --title Ñitle --summary SÎ¨mmary --description=DÎ£sc --output-folder .

$ dx describe myworkflow --delim ' '
Result 1:
ID workflow-FKqx8Q80P5qPFBjkJk85933g
Class workflow
Project project-FKqx8Q00P5q2B155Jp8qgYP7
Folder /
Name myworkflow
State open
Visibility visible
Types -
Properties -
Tags -
Outgoing links -
Created Fri Oct  5 14:14:41 2018
Created by orodeh
Last modified Fri Oct  5 14:14:43 2018
Edit Version 1
Title Ñitle
Summary SÎ¨mmary
Output Folder /
Input Spec -
Output Spec -

$ dx update workflow myworkflow --no-title --no-output-folder

$ dx describe myworkflow --delim ' '
Result 1:
ID workflow-FKqx8Q80P5qPFBjkJk85933g
Class workflow
Project project-FKqx8Q00P5q2B155Jp8qgYP7
Folder /
Name myworkflow
State open
Visibility visible
Types -
Properties -
Tags -
Outgoing links -
Created Fri Oct  5 14:14:41 2018
Created by orodeh
Last modified Fri Oct  5 14:14:45 2018
Edit Version 2
Title myworkflow
Summary SÎ¨mmary
Output Folder -
Input Spec -
Output Spec -

$ dx describe myworkflow --verbose --delim ' '
Result 1:
ID workflow-FKqx8Q80P5qPFBjkJk85933g
Class workflow
Project project-FKqx8Q00P5q2B155Jp8qgYP7
Folder /
Name myworkflow
State open
Visibility visible
Types -
Properties -
Tags -
Details {}
Outgoing links -
Created Fri Oct  5 14:14:41 2018
Created by orodeh
Last modified Fri Oct  5 14:14:45 2018
Edit Version 2
Title myworkflow
Summary SÎ¨mmary
Description DÎ£sc
Output Folder -
Input Spec -
Output Spec -

$ dx update workflow myworkflow
No updates requested; none made

$ dx update workflow myworkflow --title foo --no-title
usage: dx update workflow [-h] [--brief | --verbose] [--env-help]
                          [--title TITLE | --no-title] [--summary SUMMARY]
                          [--description DESCRIPTION]
                          [--output-folder OUTPUT_FOLDER | --no-output-folder]
                          workflow

Update the metadata for an existing workflow

positional arguments:
  workflow              Name or ID of a workflow

optional arguments:
  -h, --help            show this help message and exit
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --env-help            Display help message for overriding environment
                        variables
  --title TITLE         Workflow title
  --no-title            Unset the workflow title
  --summary SUMMARY     Workflow summary
  --description DESCRIPTION
                        Workflow description
  --output-folder OUTPUT_FOLDER
                        Default output folder for the workflow
  --no-output-folder    Unset the default output folder for the workflow

dx update workflow: error: argument --no-title: not allowed with argument --title

$ dx update workflow myworkflow --output-folder /foo --no-output-folder
usage: dx update workflow [-h] [--brief | --verbose] [--env-help]
                          [--title TITLE | --no-title] [--summary SUMMARY]
                          [--description DESCRIPTION]
                          [--output-folder OUTPUT_FOLDER | --no-output-folder]
                          workflow

Update the metadata for an existing workflow

positional arguments:
  workflow              Name or ID of a workflow

optional arguments:
  -h, --help            show this help message and exit
  --brief               Display a brief version of the return value; for most
                        commands, prints a DNAnexus ID per line
  --verbose             If available, displays extra verbose output
  --env-help            Display help message for overriding environment
                        variables
  --title TITLE         Workflow title
  --no-title            Unset the workflow title
  --summary SUMMARY     Workflow summary
  --description DESCRIPTION
                        Workflow description
  --output-folder OUTPUT_FOLDER
                        Default output folder for the workflow
  --no-output-folder    Unset the default output folder for the workflow

dx update workflow: error: argument --no-output-folder: not allowed with argument --output-folder

$ dx cd project-FKqx8Y80v1XbbG3qJjY5pB8B:/

$ dx update workflow foo
dxpy.utils.resolver.ResolutionError: Unable to resolve "foo" to a data object or folder name in '/'

$ dx new record --type pipeline --brief
record-FKqx8Z00v1XfVpq3JkJkzj9Z

$ dx describe record-FKqx8Z00v1XfVpq3JkJkzj9Z
Result 1:
ID                  record-FKqx8Z00v1XfVpq3JkJkzj9Z
Class               record
Project             project-FKqx8Y80v1XbbG3qJjY5pB8B
Folder              /
Name                record-FKqx8Z00v1XfVpq3JkJkzj9Z
State               open
Visibility          visible
Types               pipeline
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:14:56 2018
Created by          orodeh
Last modified       Fri Oct  5 14:14:56 2018
Size                2

$ dx update workflow record-FKqx8Z00v1XfVpq3JkJkzj9Z
dxpy.exceptions.DXCLIError: Could not resolve "record-FKqx8Z00v1XfVpq3JkJkzj9Z" to a workflow object

$ dx cd project-FKqx8bQ03k76Vpq3JkJkzj9f:/

$ dx compile /home/orodeh/dx-toolkit/src/python/test/wdl/trivial.wdl --quiet
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2662, in check_java_version
    universal_newlines=True)
  File "/usr/lib/python3.5/subprocess.py", line 626, in check_output
    **kwargs).stdout
  File "/usr/lib/python3.5/subprocess.py", line 693, in run
    with Popen(*popenargs, **kwargs) as process:
  File "/usr/lib/python3.5/subprocess.py", line 947, in __init__
    restore_signals, start_new_session)
  File "/usr/lib/python3.5/subprocess.py", line 1551, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: 'java'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 5809, in main
    args.func(args)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2687, in compile
    check_java_version()
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2666, in check_java_version
    raise DXError(fill(msg))
dxpy.exceptions.DXError: Could not call the java executable. This is probably because java (jdk8) is
not installed.

$ dx cd project-FKqx8fj0vZpX05QKJkbzgBf3:/

$ dx compile_dxni --destination project-FKqx8fj0vZpX05QKJkbzgBf3:/ /tmp/tmp1edgua69/headers.wdl
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2662, in check_java_version
    universal_newlines=True)
  File "/usr/lib/python3.5/subprocess.py", line 626, in check_output
    **kwargs).stdout
  File "/usr/lib/python3.5/subprocess.py", line 693, in run
    with Popen(*popenargs, **kwargs) as process:
  File "/usr/lib/python3.5/subprocess.py", line 947, in __init__
    restore_signals, start_new_session)
  File "/usr/lib/python3.5/subprocess.py", line 1551, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: 'java'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 5809, in main
    args.func(args)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2739, in compile_dxni
    check_java_version()
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2666, in check_java_version
    raise DXError(fill(msg))
dxpy.exceptions.DXError: Could not call the java executable. This is probably because java (jdk8) is
not installed.
ERROR
test_copy_empty_folder_on_existing_folder (test_dxclient.TestDXCp) ... ok
test_copy_folder_on_existing_folder (test_dxclient.TestDXCp) ... ok
test_copy_overwrite (test_dxclient.TestDXCp) ... /usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 42994), raddr=('54.152.220.227', 443)>
  self._sock = None
ok
test_cp_dir (test_dxclient.TestDXCp) ... ok
test_cp_rename (test_dxclient.TestDXCp) ... ok
test_error_msg_for_nonexistent_folder (test_dxclient.TestDXCp) ... ok
test_file_in_other_project (test_dxclient.TestDXCp)
Copy a file-id, where the file is not located in the default project-id. ... skipped "PTFM-11906 This doesn't work yet."
test_file_with_same_name (test_dxclient.TestDXCp) ... ok
test_multiple_args (test_dxclient.TestDXCp) ... ok
test_no_env (test_dxclient.TestDXCp)
Try to copy a file when the context is empty. ... skipped 'skipping test that would clobber your local environment'
test_example_matches (test_dxclient.TestDXGenerateBatchInputs) ... ERROR
test_dx_cross_get_and_build_app_and_applet (test_dxclient.TestDXGetAppsAndApplets) ... skipped 'skipping test that would clobber your local environment'
test_get_app (test_dxclient.TestDXGetAppsAndApplets) ... skipped 'skipping test that would clobber your local environment'
test_get_app_by_name (test_dxclient.TestDXGetAppsAndApplets) ... skipped 'skipping test that would create apps'
test_get_app_omit_resources (test_dxclient.TestDXGetAppsAndApplets) ... skipped 'skipping test that would create apps'
test_get_applet (test_dxclient.TestDXGetAppsAndApplets) ... ERROR
test_get_applet_field_cleanup (test_dxclient.TestDXGetAppsAndApplets) ... ERROR
test_get_applet_omit_resources (test_dxclient.TestDXGetAppsAndApplets) ... ERROR
test_get_applet_on_windows (test_dxclient.TestDXGetAppsAndApplets) ...
$ dx cd project-FKqx8j00F1zbbG3qJjY5pB8F:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/bar project-FKqx8j00qf96Vpq3JkJkzj9g:/
dxpy.exceptions.InvalidState: If cloned, a folder would conflict with the route of an existing folder. Successfully cloned from project: None, code 422. Request Time=1538774114.5785158, Request ID=1538774114609-205897

$ dx cd project-FKqx8kj0Pz56Vpq3JkJkzj9j:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/baz project-FKqx8j00qf96Vpq3JkJkzj9g:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/baz project-FKqx8j00qf96Vpq3JkJkzj9g:/
dxpy.exceptions.InvalidState: If cloned, a folder would conflict with the route of an existing folder. Successfully cloned from project: None, code 422. Request Time=1538774129.0505285, Request ID=1538774129061-497190

$ dx cd project-FKqx8xQ07XfPFBjkJk85933p:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/file_3 project-FKqx8j00qf96Vpq3JkJkzj9g:/file_3

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/file_3 project-FKqx8j00qf96Vpq3JkJkzj9g:/file_3
The following objects already existed in the destination container and were
not copied:
 file-FKqx8xj01fP0Fj2kJjx8VYKB

$ dx cd project-FKqx90Q08j10Fj2kJjx8VYKG:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/foo project-FKqx8j00qf96Vpq3JkJkzj9g:/

$ dx cd project-FKqx92805k0bbG3qJjY5pB8G:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/file_4 project-FKqx8j00qf96Vpq3JkJkzj9g:/AAA.txt

$ dx ls project-FKqx8j001fPPFBjkJk85933k:/file_4 --brief
file-FKqx92Q01fP0Fj2kJjx8VYKJ

$ dx ls project-FKqx8j00qf96Vpq3JkJkzj9g:/AAA.txt --brief
file-FKqx92Q01fP0Fj2kJjx8VYKJ

$ dx cd project-FKqx95803QxbbG3qJjY5pB8J:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k/file_5 project-FKqx8j00qf96Vpq3JkJkzj9g:/
dxpy.utils.resolver.ResolutionError: The specified folder could not be found in project-FKqx95803QxbbG3qJjY5pB8J

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/file_5 project-FKqx8j00qf96Vpq3JkJkzj9g:/xxx/yyy/z.txt
dxpy.exceptions.DXCLIError: The destination folder does not exist

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/file_5 project-FKqx8j001fPPFBjkJk85933k:/
dxpy.exceptions.DXCLIError: Error: A source path and the destination path resolved to the same project or
container. Please specify different source and destination containers, e.g.
  dx cp source-project:source-id-or-path dest-project:dest-path

$ dx cd project-FKqx98Q0q9YQFj2kJjx8VYKV:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/earthsea/file-FKqx98j01fPPFBjkJk85933x project-FKqx8j00qf96Vpq3JkJkzj9g:/earthsea/

$ dx cd project-FKqx9F002vbYXKf1Jjf23GkP:/

$ dx cp project-FKqx8j001fPPFBjkJk85933k:/file_7 project-FKqx8j001fPPFBjkJk85933k:/file_8 project-FKqx8j001fPPFBjkJk85933k:/file_9 project-FKqx8j00qf96Vpq3JkJkzj9g:/

$ dx ls project-FKqx8j001fPPFBjkJk85933k:/file_7 --brief
file-FKqx9F801fPF5fyYJkzxBY1K

$ dx ls project-FKqx8j00qf96Vpq3JkJkzj9g:/file_7 --brief
file-FKqx9F801fPF5fyYJkzxBY1K

$ dx ls project-FKqx8j001fPPFBjkJk85933k:/file_8 --brief
file-FKqx9GQ01fP3XKf1Jjf23GkQ

$ dx ls project-FKqx8j00qf96Vpq3JkJkzj9g:/file_8 --brief
file-FKqx9GQ01fP3XKf1Jjf23GkQ

$ dx ls project-FKqx8j001fPPFBjkJk85933k:/file_9 --brief
file-FKqx9J801fPPFBjkJk85933z

$ dx ls project-FKqx8j00qf96Vpq3JkJkzj9g:/file_9 --brief
file-FKqx9J801fPPFBjkJk85933z

$ dx cd project-FKqx9YQ0fgg3XKf1Jjf23GkY:/

$ touch RP10B_S1_R1_001.fastq.gz RP10B_S1_R2_001.fastq.gz RP10T_S5_R1_001.fastq.gz RP10T_S5_R2_001.fastq.gz RP15B_S4_R1_002.fastq.gz RP15B_S4_R2_002.fastq.gz RP15T_S8_R1_002.fastq.gz RP15T_S8_R2_002.fastq.gz SRR123_1.gz SRR223_2.gz SRR2223_2.gz SRR1_1.gz SRR1_1.gz

$ dx upload --brief RP10B_S1_R1_001.fastq.gz RP10B_S1_R2_001.fastq.gz RP10T_S5_R1_001.fastq.gz RP10T_S5_R2_001.fastq.gz RP15B_S4_R1_002.fastq.gz RP15B_S4_R2_002.fastq.gz RP15T_S8_R1_002.fastq.gz RP15T_S8_R2_002.fastq.gz SRR123_1.gz SRR223_2.gz SRR2223_2.gz SRR1_1.gz SRR1_1.gz
file-FKqx9Z00fgg3xyY7F3g45Xf2
file-FKqx9Z80fgg77FqVF4B1QYp5
file-FKqx9ZQ0fgg5py16F3VpF7j1
file-FKqx9Zj0fgg2FpZpF4kkP815
file-FKqx9b00fgg77FqVF4B1QYp7
file-FKqx9b80fgg77FqVF4B1QYp9
file-FKqx9b80fgg7fzxKF53yK8xx
file-FKqx9bQ0fgg3xyY7F3g45Xf4
file-FKqx9bQ0fgg5py16F3VpF7j3
file-FKqx9f00fgg2FpZpF4kkP817
file-FKqx9f80fgg61kVZF41YpGp8
file-FKqx9fQ0fgg5py16F3VpF7j5
file-FKqx9fQ0fgg2FpZpF4kkP819

$ dx generate_batch_inputs -ipair1='RP(.*)_R1_(.*).fastq.gz' -ipair2='RP(.*)_R2_(.*).fastq.gz' 2>&1

$ dx cd project-FKqx9jQ0yvPQFj2kJjx8VYKX:/

$ dx cd project-FKqx9p00Gf86Vpq3JkJkzj9v:/

$ dx build --json /tmp/tmplc8qpdj6/get_Ã¥pplet_field_cleanup
{"title": "", "id": "applet-FKqx9q80Gf85py16F3VpF7j7", "ignoreReuse": false, "folder": "/", "runSpec": {"bundledDepends": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqx9pQ0Gf83xyY7F3g45XfF"}}], "bundledDependsByRegion": {"aws:us-east-1": [{"name": "resources.tar.gz", "id": {"$dnanexus_link": "file-FKqx9pQ0Gf83xyY7F3g45XfF"}}]}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "executionPolicy": {}, "interpreter": "python2.7", "systemRequirements": {}, "execDepends": [{"name": "dx-toolkit", "package_manager": "apt"}], "release": "14.04", "distribution": "Ubuntu"}, "developerNotes": "", "description": "", "hidden": false, "project": "project-FKqx9p00Gf86Vpq3JkJkzj9v", "createdBy": {"user": "user-orodeh"}, "outputSpec": [], "dxapi": "1.0.0", "created": 1538774253000, "state": "closed", "types": [], "sponsored": false, "modified": 1538774253958, "class": "applet", "inputSpec": [], "name": "get_applet_field_cleanup", "access": {"network": []}, "links": ["file-FKqx9pQ0Gf83xyY7F3g45XfF"], "tags": [], "summary": ""}

$ dx get applet-FKqx9q80Gf85py16F3VpF7j7
Creating "./get_applet_field_cleanup" output directory
Downloading applet data
Unpacking resources
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 350, in dump_executable
    _dump_app_or_applet(executable, omit_resources, describe_output)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 293, in _dump_app_or_applet
    _recursive_cleanup(dxapp_json['runSpec'])
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 46, in _recursive_cleanup
    for (key, val) in foo.items():
RuntimeError: dictionary changed size during iteration

$ dx cd project-FKqx9x80XG53XKf1Jjf23GkZ:/

$ dx cd project-FKqx9yQ08k0X05QKJkbzgBf7:/

$ dx build --json /tmp/tmpxrlfc9qt/get_Ã¥pplet_windows
{"ignoreReuse": false, "sponsored": false, "title": "", "folder": "/", "hidden": false, "modified": 1538774272301, "class": "applet", "project": "project-FKqx9yQ08k0X05QKJkbzgBf7", "description": "", "name": "get_applet_windows", "id": "applet-FKqxB0008k0gfzxKF53yK8xz", "tags": [], "types": [], "dxapi": "1.0.0", "runSpec": {"execDepends": [{"package_manager": "apt", "name": "dx-toolkit"}], "distribution": "Ubuntu", "bundledDepends": [{"id": {"$dnanexus_link": "file-FKqx9z008k0YJbfzF3PJ8B7z"}, "name": "resources.tar.gz"}], "interpreter": "python2.7", "bundledDependsByRegion": {"aws:us-east-1": [{"id": {"$dnanexus_link": "file-FKqx9z008k0YJbfzF3PJ8B7z"}, "name": "resources.tar.gz"}]}, "systemRequirementsByRegion": {"aws:us-east-1": {}}, "executionPolicy": {}, "systemRequirements": {}, "release": "14.04"}, "created": 1538774272000, "createdBy": {"user": "user-orodeh"}, "inputSpec": [], "outputSpec": [], "access": {"network": []}, "state": "closed", "developerNotes": "", "links": ["file-FKqx9z008k0YJbfzF3PJ8B7z"], "summary": ""}

$ dx get applet-FKqxB0008k0gfzxKF53yK8xz
Creating "./get_applet_windows" output directory
Downloading applet data
Unpacking resources
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 350, in dump_executable
    _dump_app_or_applet(executable, omit_resources, describe_output)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 293, in _dump_app_or_applet
    _recursive_cleanup(dxapp_json['runSpec'])
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 46, in _recursive_cleanup
    for (key, val) in foo.items():
RuntimeError: dictionary changed size during iteration
ERROR
test_get_preserves_system_requirements (test_dxclient.TestDXGetAppsAndApplets) ... skipped 'skipping test that would create apps'
test_uninstall_app (test_dxclient.TestDXGetAppsAndApplets) ... skipped 'skipping test that would create apps and another user'
test_dx_cross_get_and_build_workflows (test_dxclient.TestDXGetWorkflows) ... skipped 'skipping test that would create global workflows'
test_get_global_workflow (test_dxclient.TestDXGetWorkflows) ... skipped 'skipping test that would create global workflows'
test_get_workflow (test_dxclient.TestDXGetWorkflows) ... /home/orodeh/dx-toolkit/src/python/test/test_dxclient.py:9006: ResourceWarning: unclosed file <_io.TextIOWrapper name='get_workflow/dxworkflow.json' mode='r' encoding='UTF-8'>
  workflow_metadata = open(os.path.join("get_workflow", "dxworkflow.json")).read()
ok
test_long_output (test_dxclient.TestDXLs) ... ok
test_regular_output (test_dxclient.TestDXLs) ... ok
test_dx_mv (test_dxclient.TestDXMv) ... ok
test_dx_mv_folder (test_dxclient.TestDXMv) ... ok
test_dx_new_record_with_close (test_dxclient.TestDXNewRecord) ... ok
test_new_record_basic (test_dxclient.TestDXNewRecord) ... ok
test_new_record_without_context (test_dxclient.TestDXNewRecord) ... skipped 'skipping test that would clobber your local environment'
test_dxpy_import_stdin_none (test_dxclient.TestDXPYImport) ... ok
test_remove_folders (test_dxclient.TestDXRemove) ... /usr/lib/python3.5/socket.py:646: ResourceWarning: unclosed <socket.socket fd=4, family=AddressFamily.AF_INET, type=2049, proto=6, laddr=('172.17.0.2', 43298), raddr=('54.152.220.227', 443)>
  self._sock = None
ok
test_remove_nonexistent_object (test_dxclient.TestDXRemove) ... ok
test_remove_objects (test_dxclient.TestDXRemove) ... ok
test_rename (test_dxclient.TestDXRename) ... ok
test_dx_rmdir (test_dxclient.TestDXRmdir) ... ok
test_dx_run_app (test_dxclient.TestDXRun) ... skipped 'skipping test that requires the smoketest app'
test_basic (test_dxclient.TestDXRunBatch) ... skipped 'skipping test that would run jobs'
test_files (test_dxclient.TestDXRunBatch) ... skipped 'skipping test that would run jobs'
test_minimal_invocation (test_dxclient.TestDXScripts) ...
$ dx cd project-FKqxB1Q0GV7XB155Jp8qgYPF:/

$ dx new workflow get_workflow --brief
workflow-FKqxB200GV7gfzxKF53yK8y1

$ dx get workflow-FKqxB200GV7gfzxKF53yK8y1

$ dx get path_does_not_exist
dxpy.utils.resolver.ResolutionError: Unable to resolve "path_does_not_exist" to a data object or folder name in '/'

$ dx get -o dest get_workflow

$ dx get -o - workflow-FKqxB200GV7gfzxKF53yK8y1
Error: workflow objects cannot be dumped to stdout, please specify a directory

$ dx get -o destdir get_workflow

$ dx get -o destdir_nonempty get_workflow
Error: path "destdir_nonempty/get_workflow" already exists. Remove it and try
again.

$ dx get -o destdir_withfile get_workflow
Error: path "destdir_withfile/get_workflow" already exists but -f/--overwrite
was not set

$ dx cd project-FKqxB500g2QPFBjkJk859346:/

$ dx ls -l
Project: dxclient_test_prÃ¶ject (project-FKqxB500g2QPFBjkJk859346)
Folder : /
State   Last modified       Size      Name (ID)
closed  2018-10-05 14:18:13           foo (record-FKqxB580g2Q2B155Jp8qgYPG)

$ dx cd project-FKqxB680vYk6Vpq3JkJkzj9x:/

$ dx ls
foo

$ dx cd project-FKqxB7j07VvF5fyYJkzxBY1f:/

$ dx mv a b

$ dx cd project-FKqxB9j04G7bbG3qJjY5pB8X:/

$ dx mv '/test_folder' /test_folder_2

$ dx cd project-FKqxBFj0V56q5fyYJkzxBY1g:/

$ dx new record --close --brief
record-FKqxBG00V56gfzxKF53yK8y8

$ dx new record --brief
record-FKqxBG80V56bpy16F3VpF7jF

$ dx cd project-FKqxBJQ0j1yzFBjkJk859349:/

$ dx new record -o :foo --verbose
ID                  record-FKqxBK00j1yv6zPyF4ZJzK7f
Class               record
Project             project-FKqxBJQ0j1yzFBjkJk859349
Folder              /
Name                foo
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Details             {}
Outgoing links      -
Created             Fri Oct  5 14:18:48 2018
Created by          orodeh
Last modified       Fri Oct  5 14:18:48 2018
Size                2

$ dx new record -o :foo2 --brief --visibility hidden --property foo=bar --property baz=quux --tag onetag --tag twotag --type foo --type bar --details '{"hello": "world"}'
record-FKqxBK80j1yYJbfzF3PJ8B82

$ dx ls :foo2 --brief
record-FKqxBK80j1yYJbfzF3PJ8B82

$ dx get -o - :foo2
{
    "hello": "world"
}
$ dx new record :somenewfolder/foo --parents --brief
record-FKqxBKj0j1yf1kVZF41YpGpB

$ dx ls :somenewfolder/foo --brief
record-FKqxBKj0j1yf1kVZF41YpGpB

$ dx describe record-FKqxBK80j1yYJbfzF3PJ8B82
Result 1:
ID                  record-FKqxBK80j1yYJbfzF3PJ8B82
Class               record
Project             project-FKqxBJQ0j1yzFBjkJk859349
Folder              /
Name                foo2
State               open
Visibility          hidden
Types               foo, bar
Properties          foo=bar, baz=quux
Tags                onetag, twotag
Outgoing links      -
Created             Fri Oct  5 14:18:49 2018
Created by          orodeh
Last modified       Fri Oct  5 14:18:49 2018
Size                17

$ dx describe record-FKqxBK80j1yYJbfzF3PJ8B82 --details --json
{
    "folder": "/",
    "size": 17,
    "created": 1538774329000,
    "state": "open",
    "project": "project-FKqxBJQ0j1yzFBjkJk859349",
    "properties": {
        "baz": "quux",
        "foo": "bar"
    },
    "name": "foo2",
    "details": {
        "hello": "world"
    },
    "sponsored": false,
    "createdBy": {
        "user": "user-orodeh"
    },
    "tags": [
        "onetag",
        "twotag"
    ],
    "modified": 1538774329330,
    "hidden": true,
    "id": "record-FKqxBK80j1yYJbfzF3PJ8B82",
    "class": "record",
    "types": [
        "foo",
        "bar"
    ],
    "links": []
}

$ dx describe record-FKqxBKj0j1yf1kVZF41YpGpB --json
{
    "name": "foo",
    "links": [],
    "class": "record",
    "id": "record-FKqxBKj0j1yf1kVZF41YpGpB",
    "project": "project-FKqxBJQ0j1yzFBjkJk859349",
    "createdBy": {
        "user": "user-orodeh"
    },
    "sponsored": false,
    "size": 2,
    "folder": "/somenewfolder",
    "modified": 1538774331768,
    "tags": [],
    "created": 1538774331000,
    "state": "open",
    "details": {},
    "properties": {},
    "hidden": false,
    "types": []
}

$ dx rm :foo

$ dx rm :foo2

$ dx rm -r :somenewfolder

$ dx cd project-FKqxBVj0FX2205QKJkbzgBf8:/

$ dx rm -r /test_folder

$ dx new record test_folder
ID                  record-FKqxBXQ0FX27fzxKF53yK8yB
Class               record
Project             project-FKqxBVj0FX2205QKJkbzgBf8
Folder              /
Name                test_folder
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:19:06 2018
Created by          orodeh
Last modified       Fri Oct  5 14:19:06 2018
Size                2

$ dx rm -r test_folder

$ dx rm test_folder

$ dx rm -r test_folder

$ dx new record test_folder
ID                  record-FKqxBYj0FX277FqVF4B1QYpF
Class               record
Project             project-FKqxBVj0FX2205QKJkbzgBf8
Folder              /
Name                test_folder
State               open
Visibility          visible
Types               -
Properties          -
Tags                -
Outgoing links      -
Created             Fri Oct  5 14:19:11 2018
Created by          orodeh
Last modified       Fri Oct  5 14:19:11 2018
Size                2

$ dx rm test_folder test_folder2

$ dx cd project-FKqxBf00G2pgfzxKF53yK8yG:/

$ dx rm nonexistent

$ dx cd project-FKqxBg8016Fv6zPyF4ZJzK82:/

$ dx rm 'my record'

$ dx cd project-FKqxBk00XqYv6zPyF4ZJzK83:/

$ dx rename 'my record' 'my record 2'

$ dx cd project-FKqxBpQ0P5x7fzxKF53yK8yf:/

$ dx rmdir mydirectory

$ dx cd project-FKqxBvQ0gz3bpy16F3VpF7jj:/

$ dx-variants-to-vcf -h
usage: dx-variants-to-vcf [-h] [-o OUTPUT] [--export-ref-calls]
                          [--export-no-calls] [--chr CHR] [--no-write-header]
                          [--reference REFERENCE]
                          path

Export a Variants gtable into a VCF file. WARNING: This can take a while
because it downloads the entire reference genome. It is recommended that this
script only be called from within an application running on the cloud.

positional arguments:
  path                  Path to the Variants gtable

optional arguments:
  -h, --help            show this help message and exit
  -o OUTPUT, --output OUTPUT
                        Name of file to write VCF to ("-" indicates stdout
                        output)
  --export-ref-calls    If selected, rows confidently called as non-variants
                        will also be written
  --export-no-calls     If selected, rows in which no confident call could be
                        made will also be written
  --chr CHR             If any chr are provided, export will only write rows
                        of the specified chromosomes; repeat to include
                        additional chromosomes
  --no-write-header     If selected, do not write the header the VCF file
                        (useful for concatenating files together with chr
  --reference REFERENCE
                        If present, take reference from this file instead of
                        trying to download it

$ dx-genes-to-gff -h
usage: dx-genes-to-gff [-h] [--output FILE_NAME] [--only_genes_types] genes_id

Export Genes object to GFF File

positional arguments:
  genes_id            Genes table id to read from

optional arguments:
  -h, --help          show this help message and exit
  --output FILE_NAME  Name of file to write GFF to. If not given GFF file will
                      be printed to stdout.
  --only_genes_types  Name of file to write GFF to. If not given GFF file will
                      be printed to stdout.

$ dx-genes-to-gtf -h
usage: dx-genes-to-gtf [-h] [--output FILE_NAME] [--add_gene_biotype] genes_id

Export Genes object to GTF File

positional arguments:
  genes_id            Genes table id to read from

optional arguments:
  -h, --help          show this help message and exit
  --output FILE_NAME  Name of file to write GTF to. If not given GTF file will
                      be printed to stdout.
  --add_gene_biotype  Write either "protein_coding" or "non_coding" in the
                      field "gene_biotype" if it doesn't exist. Useful for
                      programs like snpEff which require this data.
ok
test_as_second_user (test_dxclient.TestDXTestUtils) ... skipped 'skipping test that would require multiple users'
test_select_project (test_dxclient.TestDXTestUtils) ... ok
test_temporary_project (test_dxclient.TestDXTestUtils) ... ok
test_without_auth (test_dxclient.TestDXTestUtils) ... skipped 'skipping test that would clobber your local environment'
test_without_project_context (test_dxclient.TestDXTestUtils) ... skipped 'skipping test that would clobber your local environment'
test_regular_output (test_dxclient.TestDXTree) ... ok
test_tree (test_dxclient.TestDXTree) ... ok
test_update_app (test_dxclient.TestDXUpdateApp) ... skipped 'skipping test that creates apps'
test_dx_whoami_id (test_dxclient.TestDXWhoami) ... ok
test_dx_whoami_name (test_dxclient.TestDXWhoami) ... ok
test_proxy (test_dxclient.TestHTTPProxySupport) ... skipped 'skipping HTTP Proxy support test that needs squid3'
test_tcsh_dash_c (test_dxclient.TestTcshEnvironment) ... skipped 'skipping tests that require tcsh to be installed'
test_tcsh_source_environment (test_dxclient.TestTcshEnvironment) ... skipped 'skipping tests that require tcsh to be installed'

======================================================================
ERROR: test_image_only (test_dxclient.TestDXBuildReportHtml)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 9756, in test_image_only
    run("dx-build-report-html {d}/img.gif --local {d}/gif.html".format(d=self.temp_file_path))
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx-build-report-html /tmp/tmpv6k230ab/img.gif --local /tmp/tmpv6k230ab/gif.html' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/bin/dx-build-report-html", line 11, in <module>
    sys.exit(main())
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 220, in main
    html = bake(source)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 148, in bake
    html = _load_file(src).read()
  File "/usr/lib/python3.5/codecs.py", line 321, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 10: invalid start byte


======================================================================
ERROR: test_local_file (test_dxclient.TestDXBuildReportHtml)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 9737, in test_local_file
    run("dx-build-report-html {d}/index.html --local {d}/out.html".format(d=self.temp_file_path))
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx-build-report-html /tmp/tmp9qpwjb4k/index.html --local /tmp/tmp9qpwjb4k/out.html' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/bin/dx-build-report-html", line 11, in <module>
    sys.exit(main())
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 220, in main
    html = bake(source)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 149, in bake
    if imghdr.what("", html):
  File "/usr/lib/python3.5/imghdr.py", line 21, in what
    res = tf(h, f)
  File "/usr/lib/python3.5/imghdr.py", line 43, in test_png
    if h.startswith(b'\211PNG\r\n\032\n'):
TypeError: startswith first arg must be str or a tuple of str, not bytes


======================================================================
ERROR: test_remote_file (test_dxclient.TestDXBuildReportHtml)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 9765, in test_remote_file
    report = json.loads(run("dx-build-report-html {d}/index.html --remote /html_report -w 47 -g 63".format(d=self.temp_file_path)))
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx-build-report-html /tmp/tmpmpsii13p/index.html --remote /html_report -w 47 -g 63' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/bin/dx-build-report-html", line 11, in <module>
    sys.exit(main())
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 220, in main
    html = bake(source)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx_build_report_html.py", line 149, in bake
    if imghdr.what("", html):
  File "/usr/lib/python3.5/imghdr.py", line 21, in what
    res = tf(h, f)
  File "/usr/lib/python3.5/imghdr.py", line 43, in test_png
    if h.startswith(b'\211PNG\r\n\032\n'):
TypeError: startswith first arg must be str or a tuple of str, not bytes


======================================================================
ERROR: test_dx_shell (test_dxclient.TestDXClient)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/expect.py", line 111, in expect_loop
    incoming = spawn.read_nonblocking(spawn.maxread, timeout)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/pty_spawn.py", line 482, in read_nonblocking
    raise TIMEOUT('Timeout exceeded.')
pexpect.exceptions.TIMEOUT: Timeout exceeded.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 653, in wrapper
    retval = func(*args, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 389, in test_dx_shell
    shell.expect("invalid choice: Î¨")
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/spawnbase.py", line 341, in expect
    timeout, searchwindowsize, async_)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/spawnbase.py", line 369, in expect_list
    return exp.expect_loop(timeout)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/expect.py", line 119, in expect_loop
    return self.timeout(e)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/expect.py", line 82, in timeout
    raise TIMEOUT(msg)
pexpect.exceptions.TIMEOUT: Timeout exceeded.
<pexpect.pty_spawn.spawn object at 0x7f0c16e69860>
command: /bin/bash
args: [b'/bin/bash']
buffer (last 100 chars): " Î¨ 'Î¨ Î¨'\r\n'bytes' object has no attribute 'read'\r\n\r\ndxclient_test_prÃ¶ject:/> "
before (last 100 chars): " Î¨ 'Î¨ Î¨'\r\n'bytes' object has no attribute 'read'\r\n\r\ndxclient_test_prÃ¶ject:/> "
after: <class 'pexpect.exceptions.TIMEOUT'>
match: None
match_index: None
exitstatus: None
flag_eof: False
pid: 4581
child_fd: 11
closed: False
timeout: 3
delimiter: <class 'pexpect.exceptions.EOF'>
logfile: <_io.TextIOWrapper name='<stdout>' mode='w' encoding='UTF-8'>
logfile_read: None
logfile_send: None
maxread: 2000
ignorecase: False
searchwindowsize: None
delaybeforesend: 0.05
delayafterclose: 0.1
delayafterterminate: 0.1
searcher: searcher_re:
    0: re.compile('invalid choice: Î¨')

======================================================================
+ ERROR: test_dx_download_multiple_projects_with_same_name (test_dxclient.TestDXClientDownloadDataEgressBilling)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 2019, in test_dx_download_multiple_projects_with_same_name
    buf = run("dx download -o - {pid}:{f}".format(pid=proj2.get_id(), f=file2_id))
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx download -o - project-FKqvx30019q0J4q44Gp7FVQ2:file-FKqvx40019qF6V404KBXf4vb' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 1907, in cat
    sys.stdout.buffer.write(chunk)
TypeError: a bytes-like object is required, not 'str'


======================================================================
ERROR: test_dx_download_project_explicit (test_dxclient.TestDXClientDownloadDataEgressBilling)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 1931, in test_dx_download_project_explicit
    buf = run("dx download -o - {p}:{f}".format(p=proj2.get_id(), f=file2_id))
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx download -o - project-FKqvx6j054fYYZ6g4J2qQpzQ:file-FKqvx7j054fpffQ84KPxZ8F8' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 1907, in cat
    sys.stdout.buffer.write(chunk)
TypeError: a bytes-like object is required, not 'str'


======================================================================
ERROR: test_dx_run_ssh_no_config (test_dxclient.TestDXClientRun)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/spawnbase.py", line 166, in read_nonblocking
    s = os.read(self.child_fd, size)
OSError: [Errno 5] Input/output error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/expect.py", line 111, in expect_loop
    incoming = spawn.read_nonblocking(spawn.maxread, timeout)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/pty_spawn.py", line 485, in read_nonblocking
    return super(spawn, self).read_nonblocking(size)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/spawnbase.py", line 171, in read_nonblocking
    raise EOF('End Of File (EOF). Exception style platform.')
pexpect.exceptions.EOF: End Of File (EOF). Exception style platform.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 3169, in test_dx_run_ssh_no_config
    shell.expect("IOError")
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/spawnbase.py", line 341, in expect
    timeout, searchwindowsize, async_)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/spawnbase.py", line 369, in expect_list
    return exp.expect_loop(timeout)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/expect.py", line 117, in expect_loop
    return self.eof(e)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/pexpect/expect.py", line 63, in eof
    raise EOF(msg)
pexpect.exceptions.EOF: End Of File (EOF). Exception style platform.
<pexpect.pty_spawn.spawn object at 0x7f0c1671e160>
command: /home/orodeh/dx-toolkit/bin/dx
args: [b'/home/orodeh/dx-toolkit/bin/dx', b'run', b'--ssh', b'applet-FKqx0b00KQxqF33K1Y3xP39B']
buffer (last 100 chars): ''
before (last 100 chars): "d? [y/N]: N\r\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmp2g0fn4nf/ssh_id.pub'\r\n"
after: <class 'pexpect.exceptions.EOF'>
match: None
match_index: None
exitstatus: None
flag_eof: True
pid: 5777
child_fd: 7
closed: False
timeout: 30
delimiter: <class 'pexpect.exceptions.EOF'>
logfile: None
logfile_read: None
logfile_send: None
maxread: 2000
ignorecase: False
searchwindowsize: None
delaybeforesend: 0.05
delayafterclose: 0.1
delayafterterminate: 0.1
searcher: searcher_re:
    0: re.compile('IOError')

======================================================================
ERROR: test_download_to_stdout (test_dxclient.TestDXClientUploadDownload)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 653, in wrapper
    retval = func(*args, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 1745, in test_download_to_stdout
    buf = run("dx download -o - X.txt")
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx download -o - X.txt' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 1907, in cat
    sys.stdout.buffer.write(chunk)
TypeError: a bytes-like object is required, not 'str'


======================================================================
ERROR: test_dx_make_download_url_project_affinity (test_dxclient.TestDXClientUploadDownload)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 1528, in test_dx_make_download_url_project_affinity
    run("wget -O /dev/null " + download_url)
  File "/usr/lib/python3.5/contextlib.py", line 66, in __exit__
    next(self.gen)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 184, in temporary_project
    dxpy.api.project_destroy(temp_project.get_id(), {"terminateJobs": True}, **kwargs)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/api.py", line 1078, in project_destroy
    return DXHTTPRequest('/%s/destroy' % object_id, input_params, always_retry=always_retry, **kwargs)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/__init__.py", line 654, in DXHTTPRequest
    raise error_class(content, response.status, time_started, req_id)
dxpy.exceptions.ResourceNotFound: The entity project-FKqx1qQ0FyK8v4f81Y9jpZj8 could not be found, code 404. Request Time=1538773541.1742287, Request ID=1538773541485-582713

======================================================================
ERROR: test_compile (test_dxclient.TestDXCompile)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 653, in wrapper
    retval = func(*args, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 10232, in test_compile
    wfid = run("dx compile {} --quiet".format(path)).strip()
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx compile /home/orodeh/dx-toolkit/src/python/test/wdl/trivial.wdl --quiet' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2662, in check_java_version
    universal_newlines=True)
  File "/usr/lib/python3.5/subprocess.py", line 626, in check_output
    **kwargs).stdout
  File "/usr/lib/python3.5/subprocess.py", line 693, in run
    with Popen(*popenargs, **kwargs) as process:
  File "/usr/lib/python3.5/subprocess.py", line 947, in __init__
    restore_signals, start_new_session)
  File "/usr/lib/python3.5/subprocess.py", line 1551, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: 'java'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 5809, in main
    args.func(args)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2687, in compile
    check_java_version()
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2666, in check_java_version
    raise DXError(fill(msg))
dxpy.exceptions.DXError: Could not call the java executable. This is probably because java (jdk8) is
not installed.


======================================================================
ERROR: test_compile_dxni (test_dxclient.TestDXCompileDxni)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 653, in wrapper
    retval = func(*args, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 10246, in test_compile_dxni
    headers_path))
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx compile_dxni --destination project-FKqx8fj0vZpX05QKJkbzgBf3:/ /tmp/tmp1edgua69/headers.wdl' returned non-zero exit status 1, stderr:
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2662, in check_java_version
    universal_newlines=True)
  File "/usr/lib/python3.5/subprocess.py", line 626, in check_output
    **kwargs).stdout
  File "/usr/lib/python3.5/subprocess.py", line 693, in run
    with Popen(*popenargs, **kwargs) as process:
  File "/usr/lib/python3.5/subprocess.py", line 947, in __init__
    restore_signals, start_new_session)
  File "/usr/lib/python3.5/subprocess.py", line 1551, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: 'java'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 5809, in main
    args.func(args)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2739, in compile_dxni
    check_java_version()
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2666, in check_java_version
    raise DXError(fill(msg))
dxpy.exceptions.DXError: Could not call the java executable. This is probably because java (jdk8) is
not installed.


======================================================================
ERROR: test_example_matches (test_dxclient.TestDXGenerateBatchInputs)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 10023, in test_example_matches
    readpair_test_stderr = run("dx generate_batch_inputs -ipair1='RP(.*)_R1_(.*).fastq.gz' -ipair2='RP(.*)_R2_(.*).fastq.gz' 2>&1")
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx generate_batch_inputs -ipair1='RP(.*)_R1_(.*).fastq.gz' -ipair2='RP(.*)_R2_(.*).fastq.gz' 2>&1' returned non-zero exit status 1, stderr:


======================================================================
ERROR: test_get_applet (test_dxclient.TestDXGetAppsAndApplets)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 9150, in test_get_applet
    output_app_spec = dict((k, v) for (k, v) in app_spec.iteritems() if k not in ('description',
AttributeError: 'dict' object has no attribute 'iteritems'

======================================================================
ERROR: test_get_applet_field_cleanup (test_dxclient.TestDXGetAppsAndApplets)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 9324, in test_get_applet_field_cleanup
    run("dx get " + new_applet_id)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx get applet-FKqx9q80Gf85py16F3VpF7j7' returned non-zero exit status 1, stderr:
Creating "./get_applet_field_cleanup" output directory
Downloading applet data
Unpacking resources
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 350, in dump_executable
    _dump_app_or_applet(executable, omit_resources, describe_output)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 293, in _dump_app_or_applet
    _recursive_cleanup(dxapp_json['runSpec'])
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 46, in _recursive_cleanup
    for (key, val) in foo.items():
RuntimeError: dictionary changed size during iteration


======================================================================
ERROR: test_get_applet_omit_resources (test_dxclient.TestDXGetAppsAndApplets)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 9280, in test_get_applet_omit_resources
    output_app_spec = dict((k, v) for (k, v) in app_spec.iteritems() if k not in ('description',
AttributeError: 'dict' object has no attribute 'iteritems'

======================================================================
ERROR: test_get_applet_on_windows (test_dxclient.TestDXGetAppsAndApplets)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 9348, in test_get_applet_on_windows
    run("dx get " + new_applet_id)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 111, in check_output
    raise exc
dxpy_testutil.DXCalledProcessError: Command 'dx get applet-FKqxB0008k0gfzxKF53yK8xz' returned non-zero exit status 1, stderr:
Creating "./get_applet_windows" output directory
Downloading applet data
Unpacking resources
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 350, in dump_executable
    _dump_app_or_applet(executable, omit_resources, describe_output)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 293, in _dump_app_or_applet
    _recursive_cleanup(dxapp_json['runSpec'])
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/executable_unbuilder.py", line 46, in _recursive_cleanup
    for (key, val) in foo.items():
RuntimeError: dictionary changed size during iteration


======================================================================
FAIL: test_dx_debug_shows_request_response (test_dxclient.TestApiDebugOutput)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 203, in test_dx_debug_shows_request_response
    self.assertIn("{u'name': u'dx_debug_test'}", stderr)
AssertionError: "{u'name': u'dx_debug_test'}" not found in ">0 [1538771831.930631] POST https://stagingapi.dnanexus.com:443/project/new => {'name': 'dx_debug_test'}\n  <0 [1538771831.930631] POST 1538771832204-868829 https://stagingapi.dnanexus.com:443/project/new <= 200 (354ms) {'id': 'project-FKqv...jq92B1XYG3f23'}\n"

======================================================================
FAIL: test_get_unicode_url (test_dxclient.TestDXClient)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 380, in assertSubprocessFailure
    yield
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 277, in test_get_unicode_url
    run("dx api project-ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½Ñ describe")
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
dxpy_testutil.DXCalledProcessError: Command 'dx api project-ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½Ñ describe' returned non-zero exit status 1, stderr:
ERROR:dxpy:[Fri Oct  5 13:49:30 2018] POST https://stagingapi.dnanexus.com:443/project-ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½Ñ/describe: UnicodeEncodeError: 'ascii' codec can't encode characters in position 14-24: ordinal not in range(128).
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 642, in api
    json_input)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/__init__.py", line 616, in DXHTTPRequest
    timeout=timeout, retries=False, **kwargs)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/request.py", line 72, in request
    **urlopen_kw)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/request.py", line 150, in request_encode_body
    return self.urlopen(method, url, **extra_kw)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/poolmanager.py", line 322, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/connectionpool.py", line 600, in urlopen
    chunked=chunked)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/urllib3/connectionpool.py", line 354, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib/python3.5/http/client.py", line 1106, in request
    self._send_request(method, url, body, headers)
  File "/usr/lib/python3.5/http/client.py", line 1141, in _send_request
    self.putrequest(method, url, **skips)
  File "/usr/lib/python3.5/http/client.py", line 983, in putrequest
    self._output(request.encode('ascii'))
UnicodeEncodeError: 'ascii' codec can't encode characters in position 14-24: ordinal not in range(128)


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 277, in test_get_unicode_url
    run("dx api project-ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½Ñ describe")
  File "/usr/lib/python3.5/contextlib.py", line 77, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 382, in assertSubprocessFailure
    self.assertEqual(exit_code, e.returncode, "Expected command to return code %d but it returned code %d" % (exit_code, e.returncode))
AssertionError: 3 != 1 : Expected command to return code 3 but it returned code 1

======================================================================
FAIL: test_build_worklow_malformed_dxworkflow_json (test_dxclient.TestDXClientWorkflow)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 380, in assertSubprocessFailure
    yield
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 4114, in test_build_worklow_malformed_dxworkflow_json
    run("dx build " + workflow_dir)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 140, in run
    output = check_output(command, shell=True, **kwargs)
dxpy_testutil.DXCalledProcessError: Command 'dx build /tmp/tmpaa_q9m26/dxbuilt_workflow' returned non-zero exit status 1, stderr:
Error: 'JSONDecodeError' object has no attribute 'message'
Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/workflow_builder.py", line 68, in _parse_executable_spec
    return json_load_raise_on_duplicates(desc)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/utils/__init__.py", line 275, in json_load_raise_on_duplicates
    return json.load(*args, **kwargs)
  File "/usr/lib/python3.5/json/__init__.py", line 268, in load
    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.5/json/__init__.py", line 332, in loads
    return cls(**kw).decode(s)
  File "/usr/lib/python3.5/json/decoder.py", line 339, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.5/json/decoder.py", line 355, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/scripts/dx.py", line 2616, in build
    workflow_builder.build(args, build_parser)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/workflow_builder.py", line 511, in build
    json_spec = _parse_executable_spec(args.src_dir, "dxworkflow.json", parser)
  File "/home/orodeh/dx-toolkit/share/dnanexus/lib/python3.5/site-packages/dxpy/workflow_builder.py", line 70, in _parse_executable_spec
    raise WorkflowBuilderException("Could not parse {} file as JSON: {}".format(json_file_name, e.message))
AttributeError: 'JSONDecodeError' object has no attribute 'message'


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/orodeh/dx-toolkit/src/python/test/test_dxclient.py", line 4114, in test_build_worklow_malformed_dxworkflow_json
    run("dx build " + workflow_dir)
  File "/usr/lib/python3.5/contextlib.py", line 77, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/orodeh/dx-toolkit/src/python/test/dxpy_testutil.py", line 382, in assertSubprocessFailure
    self.assertEqual(exit_code, e.returncode, "Expected command to return code %d but it returned code %d" % (exit_code, e.returncode))
AssertionError: 3 != 1 : Expected command to return code 3 but it returned code 1

----------------------------------------------------------------------
Ran 309 tests in 2614.441s

FAILED (failures=3, errors=16, skipped=145)

$ dx-mappings-to-fastq -h
usage: dx-mappings-to-fastq [-h] [--output FILE_NAME] mappings_id

Export Mappings gtable to a FASTQ/FASTA file

positional arguments:
  mappings_id         Mappings table id to read from

optional arguments:
  -h, --help          show this help message and exit
  --output FILE_NAME  Name of file to write FASTQ to. If not given data will
                      be printed to stdout.

$ dx-build-applet -h

$ dx cd project-FKqxBy00bxgYxyY7F3g45Xfp:/

$ dx mkdir -p project-FKqxBy80Z92XFpZpF4kkP81f:/test_folder

$ dx cd /test_folder

$ dx cd project-FKqxF180f18gfzxKF53yK8yg:/

$ dx pwd
test_temporary_project:/

$ dx cd project-FKqxF3j0422XFpZpF4kkP81p:/

$ dx tree
.
âââ foo

$ dx cd project-FKqxF5Q0Qf7XFpZpF4kkP81q:/

$ dx tree -l
.
âââ closed  2018-10-05 14:20:23           foo (record-FKqxF5j0Qf7gfzxKF53yK8yj)

$ dx cd project-FKqxF6j0qvBYJbfzF3PJ8B8X:/

$ dx whoami --id
user-orodeh

$ dx cd project-FKqxF80001FYJbfzF3PJ8B8Y:/

$ dx whoami
orodeh

*** unittest invocation failed with code 1
